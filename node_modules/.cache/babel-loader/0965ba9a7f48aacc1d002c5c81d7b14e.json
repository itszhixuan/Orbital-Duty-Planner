{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable prefer-spread */\n\n\nimport { Component, Event, NotifyPropertyChanges, Property } from '@syncfusion/ej2-base';\nimport { Browser, closest, detach, EventHandler, getInstance, select, selectAll, formatUnit } from '@syncfusion/ej2-base';\nimport { addClass, attributes, classList, isNullOrUndefined, L10n } from '@syncfusion/ej2-base';\nimport { remove, removeClass, rippleEffect } from '@syncfusion/ej2-base';\nimport { SplitButton, getModel } from '@syncfusion/ej2-splitbuttons';\nimport { Deferred } from '@syncfusion/ej2-splitbuttons';\nimport { Tooltip, getZindexPartial, Popup } from '@syncfusion/ej2-popups';\nimport { Input } from './../input/index';\nimport { NumericTextBox } from './../numerictextbox/index';\nimport { Slider } from './../slider/slider';\nvar APPLY = 'e-apply';\nvar CANCEL = 'e-cancel';\nvar CURRENT = 'e-current';\nvar CONTAINER = 'e-container';\nvar CTRLBTN = 'e-ctrl-btn';\nvar CTRLSWITCH = 'e-switch-ctrl-btn';\nvar DISABLED = 'e-disabled';\nvar FORMATSWITCH = 'e-value-switch-btn';\nvar HANDLER = 'e-handler';\nvar HEX = 'e-hex';\nvar HIDEHEX = 'e-hide-hex-value';\nvar HIDEOPACITY = 'e-hide-opacity';\nvar HIDERGBA = 'e-hide-switchable-value';\nvar HIDEVALUE = 'e-hide-value';\nvar HIDEVALUESWITCH = 'e-hide-valueswitcher';\nvar HSVAREA = 'e-hsv-color';\nvar HSVCONTAINER = 'e-hsv-container';\nvar INPUTWRAPPER = 'e-selected-value';\nvar MODESWITCH = 'e-mode-switch-btn';\nvar NOCOLOR = 'e-nocolor-item';\nvar OPACITY = 'e-opacity-value';\nvar PALETTES = 'e-palette';\nvar PALETTECONTENT = 'e-color-palette';\nvar PICKERCONTENT = 'e-color-picker';\nvar PREVIEW = 'e-preview-container';\nvar PREVIOUS = 'e-previous';\nvar RTL = 'e-rtl';\nvar SHOWVALUE = 'e-show-value';\nvar SELECT = 'e-selected';\nvar SPLITPREVIEW = 'e-split-preview';\nvar TILE = 'e-tile';\nvar presets = {\n  default: ['#000000', '#f44336', '#e91e63', '#9c27b0', '#673ab7', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#ffeb3b', '#ffffff', '#ffebee', '#fce4ec', '#f3e5f5', '#ede7f6', '#e3f2fd', '#e1f5fe', '#e0f7fa', '#e0f2f1', '#fffde7', '#f2f2f2', '#ffcdd2', '#f8bbd0', '#e1bee7', '#d1c4e9', '#bbdefb', '#b3e5fc', '#b2ebf2', '#b2dfdb', '#fff9c4', '#e6e6e6', '#ef9a9a', '#f48fb1', '#ce93d8', '#b39ddb', '#90caf9', '#81d4fa', '#80deea', '#80cbc4', '#fff59d', '#cccccc', '#e57373', '#f06292', '#ba68c8', '#9575cd', '#64b5f6', '#4fc3f7', '#4dd0e1', '#4db6ac', '#fff176', '#b3b3b3', '#ef5350', '#ec407a', '#ab47bc', '#7e57c2', '#42a5f5', '#29b6f6', '#26c6da', '#26a69a', '#ffee58', '#999999', '#e53935', '#d81b60', '#8e24aa', '#5e35b1', '#1e88e5', '#039be5', '#00acc1', '#00897b', '#fdd835', '#808080', '#d32f2f', '#c2185b', '#7b1fa2', '#512da8', '#1976d2', '#0288d1', '#0097a7', '#00796b', '#fbc02d', '#666666', '#c62828', '#ad1457', '#6a1b9a', '#4527a0', '#1565c0', '#0277bd', '#00838f', '#00695c', '#f9a825', '#4d4d4d', '#b71c1c', '#880e4f', '#4a148c', '#311b92', '#0d47a1', '#01579b', '#006064', '#004d40', '#f57f17']\n};\n/**\n * ColorPicker component is a user interface to select and adjust color values. It provides supports for various\n * color specification like Red Green Blue, Hue Saturation Value and Hex codes.\n * ```html\n * <input type=\"color\" id=\"color-picker\">\n * ```\n * ```typescript\n * <script>\n *   let colorPickerObj: ColorPicker = new ColorPicker(null , \"#color-picker\");\n * </script>\n * ```\n */\n\nvar ColorPicker =\n/** @class */\nfunction (_super) {\n  __extends(ColorPicker, _super);\n\n  function ColorPicker(options, element) {\n    return _super.call(this, options, element) || this;\n  }\n\n  ColorPicker.prototype.preRender = function () {\n    var ele = this.element;\n    this.formElement = closest(this.element, 'form');\n\n    if (this.formElement) {\n      EventHandler.add(this.formElement, 'reset', this.formResetHandler, this);\n    }\n\n    var localeText = {\n      Apply: 'Apply',\n      Cancel: 'Cancel',\n      ModeSwitcher: 'Switch Mode'\n    };\n    this.l10n = new L10n('colorpicker', localeText, this.locale);\n\n    if (ele.getAttribute('ejs-for') && !ele.getAttribute('name')) {\n      ele.setAttribute('name', ele.id);\n    }\n  };\n  /**\n   * To Initialize the component rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  ColorPicker.prototype.render = function () {\n    this.initWrapper();\n\n    if (this.inline) {\n      this.createWidget();\n    } else {\n      this.createSplitBtn();\n    }\n\n    if (!this.enableOpacity) {\n      addClass([this.container.parentElement], HIDEOPACITY);\n    }\n\n    this.renderComplete();\n  };\n\n  ColorPicker.prototype.initWrapper = function () {\n    var wrapper = this.createElement('div', {\n      className: 'e-' + this.getModuleName() + '-wrapper'\n    });\n    this.element.parentNode.insertBefore(wrapper, this.element);\n    wrapper.appendChild(this.element);\n    attributes(this.element, {\n      'tabindex': '-1',\n      'spellcheck': 'false'\n    });\n    this.container = this.createElement('div', {\n      className: CONTAINER\n    });\n    this.getWrapper().appendChild(this.container);\n    var value = this.value ? this.roundValue(this.value).toLowerCase() : '#008000ff';\n\n    if (this.noColor && this.mode === 'Palette' && this.value === '') {\n      value = '';\n    }\n\n    var slicedValue = value.slice(0, 7);\n\n    if (isNullOrUndefined(this.initialInputValue)) {\n      this.initialInputValue = slicedValue;\n    }\n\n    this.element.value = slicedValue;\n\n    if (this.enableOpacity) {\n      this.setProperties({\n        'value': value\n      }, true);\n    } else {\n      this.setProperties({\n        'value': slicedValue\n      }, true);\n    }\n\n    if (this.enableRtl) {\n      wrapper.classList.add(RTL);\n    }\n\n    if (this.cssClass) {\n      addClass([wrapper], this.cssClass.split(' '));\n    }\n\n    this.tileRipple = rippleEffect(this.container, {\n      selector: '.' + TILE\n    });\n    this.ctrlBtnRipple = rippleEffect(this.container, {\n      selector: '.e-btn'\n    });\n  };\n\n  ColorPicker.prototype.getWrapper = function () {\n    return this.element.parentElement;\n  };\n\n  ColorPicker.prototype.createWidget = function () {\n    if (this.mode === 'Palette') {\n      this.createPalette();\n\n      if (!this.inline) {\n        this.firstPaletteFocus();\n      }\n    } else {\n      this.createPicker();\n\n      if (!this.inline) {\n        this.getDragHandler().focus();\n      }\n    }\n\n    this.isRgb = true;\n    this.createInput();\n    this.createCtrlBtn();\n\n    if (!this.disabled) {\n      this.wireEvents();\n    }\n\n    if (this.inline && this.disabled) {\n      this.toggleDisabled(true);\n    }\n\n    if (Browser.isDevice) {\n      this.refreshPopupPos();\n    }\n  };\n\n  ColorPicker.prototype.createSplitBtn = function () {\n    var _this = this;\n\n    var splitButton = this.createElement('button', {\n      className: 'e-split-colorpicker'\n    });\n    this.getWrapper().appendChild(splitButton);\n    this.splitBtn = new SplitButton({\n      iconCss: 'e-selected-color',\n      target: this.container,\n      disabled: this.disabled,\n      enableRtl: this.enableRtl,\n      createPopupOnClick: this.createPopupOnClick,\n      open: this.onOpen.bind(this),\n      click: function () {\n        _this.trigger('change', {\n          currentValue: {\n            hex: _this.value.slice(0, 7),\n            rgba: _this.convertToRgbString(_this.hexToRgb(_this.value))\n          },\n          previousValue: {\n            hex: null,\n            rgba: null\n          },\n          value: _this.value\n        });\n      }\n    });\n    this.splitBtn.createElement = this.createElement;\n    this.splitBtn.appendTo(splitButton);\n    var preview = this.createElement('span', {\n      className: SPLITPREVIEW\n    });\n    select('.e-selected-color', splitButton).appendChild(preview);\n    preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));\n    var popupEle = this.getPopupEle();\n    addClass([popupEle], 'e-colorpicker-popup');\n\n    if (this.cssClass) {\n      addClass([popupEle], this.cssClass.split(' '));\n    }\n\n    if (Browser.isDevice) {\n      var popupInst = this.getPopupInst();\n      popupInst.relateTo = document.body;\n      popupInst.position = {\n        X: 'center',\n        Y: 'center'\n      };\n      popupInst.targetType = 'container';\n      popupInst.collision = {\n        X: 'fit',\n        Y: 'fit'\n      };\n      popupInst.offsetY = 4;\n      popupEle.style.zIndex = getZindexPartial(this.splitBtn.element).toString();\n    }\n\n    this.bindCallBackEvent();\n  };\n\n  ColorPicker.prototype.onOpen = function () {\n    this.trigger('open', {\n      element: this.container\n    });\n  };\n\n  ColorPicker.prototype.getPopupInst = function () {\n    return getInstance(this.getPopupEle(), Popup);\n  };\n\n  ColorPicker.prototype.bindCallBackEvent = function () {\n    var _this = this;\n\n    this.splitBtn.beforeOpen = function (args) {\n      var callBackPromise = new Deferred();\n\n      _this.trigger('beforeOpen', args, function (observeOpenArgs) {\n        if (!observeOpenArgs.cancel) {\n          var popupEle = _this.getPopupEle();\n\n          popupEle.style.top = formatUnit(0 + pageYOffset);\n          popupEle.style.left = formatUnit(0 + pageXOffset);\n          popupEle.style.display = 'block';\n\n          _this.createWidget();\n\n          popupEle.style.display = '';\n\n          if (Browser.isDevice) {\n            _this.modal = _this.createElement('div');\n            _this.modal.className = 'e-' + _this.getModuleName() + ' e-modal';\n            _this.modal.style.display = 'none';\n            document.body.insertBefore(_this.modal, popupEle);\n            document.body.className += ' e-colorpicker-overflow';\n            _this.modal.style.display = 'block';\n            _this.modal.style.zIndex = (Number(popupEle.style.zIndex) - 1).toString();\n          }\n        }\n\n        args.cancel = observeOpenArgs.cancel;\n        callBackPromise.resolve(observeOpenArgs);\n      });\n\n      return callBackPromise;\n    };\n\n    this.splitBtn.beforeClose = function (args) {\n      var callBackPromise = new Deferred();\n\n      if (!isNullOrUndefined(args.event)) {\n        var beforeCloseArgs = {\n          element: _this.container,\n          event: args.event,\n          cancel: false\n        };\n\n        _this.trigger('beforeClose', beforeCloseArgs, function (observedCloseArgs) {\n          if (Browser.isDevice && args.event.target === _this.modal) {\n            observedCloseArgs.cancel = true;\n          }\n\n          if (!observedCloseArgs.cancel) {\n            _this.onPopupClose();\n          }\n\n          args.cancel = observedCloseArgs.cancel;\n          callBackPromise.resolve(observedCloseArgs);\n        });\n      } else {\n        callBackPromise.resolve(args);\n      }\n\n      return callBackPromise;\n    };\n  };\n\n  ColorPicker.prototype.onPopupClose = function () {\n    this.unWireEvents();\n    this.destroyOtherComp();\n    this.container.style.width = '';\n    select('.' + SPLITPREVIEW, this.splitBtn.element).style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));\n    this.container.innerHTML = '';\n    removeClass([this.container], [PICKERCONTENT, PALETTECONTENT]);\n\n    if (Browser.isDevice && this.modal) {\n      removeClass([document.body], 'e-colorpicker-overflow');\n      this.modal.style.display = 'none';\n      this.modal.outerHTML = '';\n      this.modal = null;\n    }\n  };\n\n  ColorPicker.prototype.createPalette = function () {\n    classList(this.container, [PALETTECONTENT], [PICKERCONTENT]);\n\n    if (this.presetColors) {\n      var paletteGroup = this.createElement('div', {\n        className: 'e-custom-palette'\n      });\n      this.appendElement(paletteGroup);\n      var keys = Object.keys(this.presetColors);\n\n      if (keys.length === 1) {\n        this.appendPalette(this.presetColors[keys[0]], keys[0], paletteGroup);\n      } else {\n        for (var i = 0, len = keys.length; i < len; i++) {\n          this.appendPalette(this.presetColors[keys[i]], keys[i], paletteGroup);\n        }\n      }\n\n      if (selectAll('.e-row', paletteGroup).length > 10) {\n        addClass([paletteGroup], 'e-palette-group');\n      }\n    } else {\n      this.appendPalette(presets.default, 'default');\n    }\n\n    if (this.mode === 'Palette' && !this.modeSwitcher && this.noColor) {\n      this.setNoColor();\n    }\n\n    var width = parseInt(getComputedStyle(this.container).borderBottomWidth, 10);\n    this.container.style.width = formatUnit(this.container.children[0].offsetWidth + width + width);\n    this.rgb = this.hexToRgb(this.roundValue(this.value));\n    this.hsv = this.rgbToHsv.apply(this, this.rgb);\n  };\n\n  ColorPicker.prototype.firstPaletteFocus = function () {\n    if (!select('.' + SELECT, this.container.children[0])) {\n      selectAll('.' + PALETTES, this.container)[0].focus();\n    }\n  };\n\n  ColorPicker.prototype.appendPalette = function (colors, key, refEle) {\n    var palette = this.createElement('div', {\n      className: PALETTES,\n      attrs: {\n        'tabindex': '0'\n      }\n    });\n\n    if (refEle) {\n      refEle.appendChild(palette);\n    } else {\n      this.appendElement(palette);\n    }\n\n    var row;\n    var tile;\n    var roundedColor;\n\n    for (var i = 0, len = colors.length; i < len; i++) {\n      if (i === 0 || i % this.columns === 0) {\n        row = this.createElement('div', {\n          className: 'e-row',\n          attrs: {\n            'role': 'presentation'\n          }\n        });\n        palette.appendChild(row);\n      }\n\n      roundedColor = this.roundValue(colors[i]).toLowerCase();\n      tile = this.createElement('span', {\n        className: TILE,\n        attrs: {\n          'role': 'gridcell',\n          'aria-label': roundedColor,\n          'aria-selected': 'false',\n          'tabindex': '0'\n        }\n      });\n      this.trigger('beforeTileRender', {\n        element: tile,\n        presetName: key,\n        value: colors[i]\n      });\n      row.appendChild(tile);\n\n      if (this.value === roundedColor) {\n        this.addTileSelection(tile);\n        palette.focus();\n      }\n\n      tile.style.backgroundColor = this.convertToRgbString(this.hexToRgb(roundedColor));\n    }\n  };\n\n  ColorPicker.prototype.setNoColor = function () {\n    var noColorEle = this.container.querySelector('.e-row').children[0];\n    noColorEle.classList.add(NOCOLOR);\n\n    if (!this.value) {\n      noColorEle.classList.add(SELECT);\n      closest(noColorEle, '.' + PALETTES).focus();\n    }\n\n    ['aria-selected', 'aria-label'].forEach(function (attr) {\n      noColorEle.removeAttribute(attr);\n    });\n    noColorEle.style.backgroundColor = '';\n  };\n\n  ColorPicker.prototype.appendElement = function (ele, insertPos) {\n    if (insertPos === void 0) {\n      insertPos = 0;\n    }\n\n    var refEle = this.container.children[insertPos];\n\n    if (refEle) {\n      this.container.insertBefore(ele, refEle);\n    } else {\n      this.container.appendChild(ele);\n    }\n  };\n\n  ColorPicker.prototype.addTileSelection = function (ele) {\n    ele.classList.add(SELECT);\n    ele.setAttribute('aria-selected', 'true');\n  };\n\n  ColorPicker.prototype.createPicker = function () {\n    classList(this.container, [PICKERCONTENT], [PALETTECONTENT]);\n    var hsvContainer = this.createElement('div', {\n      className: HSVCONTAINER\n    });\n    this.appendElement(hsvContainer);\n    hsvContainer.appendChild(this.createElement('div', {\n      className: HSVAREA\n    }));\n    var dragHandler = this.createElement('span', {\n      className: HANDLER,\n      attrs: {\n        'tabindex': '0'\n      }\n    });\n    hsvContainer.appendChild(dragHandler);\n\n    if (this.value === null) {\n      this.value = '#008000ff';\n    }\n\n    this.rgb = this.hexToRgb(this.value);\n    this.hsv = this.rgbToHsv.apply(this, this.rgb);\n    this.setHsvContainerBg();\n    this.setHandlerPosition();\n    this.createSlider();\n    this.createDragTooltip();\n  };\n\n  ColorPicker.prototype.setHsvContainerBg = function (h) {\n    if (h === void 0) {\n      h = this.hsv[0];\n    }\n\n    this.getHsvContainer().style.backgroundColor = this.convertToRgbString(this.hsvToRgb(h, 100, 100, 1));\n  };\n\n  ColorPicker.prototype.getHsvContainer = function () {\n    return select('.' + HSVCONTAINER, this.container);\n  };\n\n  ColorPicker.prototype.setHandlerPosition = function () {\n    var dragHandler = this.getDragHandler();\n    var hsvArea = select('.' + HSVAREA, this.container);\n\n    if (this.enableRtl) {\n      dragHandler.style.left = formatUnit(hsvArea.offsetWidth * Math.abs(100 - this.hsv[1]) / 100);\n    } else {\n      dragHandler.style.left = formatUnit(hsvArea.offsetWidth * this.hsv[1] / 100);\n    }\n\n    dragHandler.style.top = formatUnit(hsvArea.offsetHeight * (100 - this.hsv[2]) / 100);\n  };\n\n  ColorPicker.prototype.createSlider = function () {\n    var sliderPreviewWrapper = this.createElement('div', {\n      className: 'e-slider-preview'\n    });\n    this.appendElement(sliderPreviewWrapper, 1);\n    this.createPreview(sliderPreviewWrapper);\n    var sliderWrapper = this.createElement('div', {\n      className: 'e-colorpicker-slider'\n    });\n    sliderPreviewWrapper.insertBefore(sliderWrapper, sliderPreviewWrapper.children[0]);\n    var slider = this.createElement('div', {\n      className: 'e-hue-slider'\n    });\n    sliderWrapper.appendChild(slider);\n    this.hueSlider = new Slider({\n      value: this.hsv[0],\n      min: 0,\n      max: 359,\n      enableRtl: this.enableRtl,\n      enabled: !this.disabled,\n      change: this.hueChange.bind(this)\n    });\n    this.hueSlider.createElement = this.createElement;\n    this.hueSlider.appendTo(slider);\n\n    if (this.enableOpacity) {\n      slider = this.createElement('div', {\n        className: 'e-opacity-slider'\n      });\n      sliderWrapper.appendChild(slider);\n      this.createOpacitySlider(slider);\n    }\n  };\n\n  ColorPicker.prototype.createOpacitySlider = function (slider) {\n    this.opacitySlider = new Slider({\n      value: this.rgb[3] * 100,\n      min: 0,\n      max: 100,\n      enableRtl: this.enableRtl,\n      enabled: !this.disabled,\n      change: this.opacityChange.bind(this)\n    });\n    this.opacitySlider.createElement = this.createElement;\n    this.opacitySlider.appendTo(slider);\n    var opacityBgTrack = this.createElement('div', {\n      className: 'e-opacity-empty-track'\n    });\n    slider.appendChild(opacityBgTrack);\n    this.updateOpacitySliderBg();\n  };\n\n  ColorPicker.prototype.updateOpacitySliderBg = function () {\n    var direction = this.enableRtl ? 'to left' : 'to right';\n    var opacityEle = select('.e-opacity-empty-track', this.opacitySlider.element);\n\n    if (opacityEle) {\n      opacityEle.style.background = 'linear-gradient(' + direction + ', rgba(' + this.rgb.slice(0, 3) + ', 0) 0%, ' + this.convertToRgbString(this.rgb.slice(0, 3)) + ' 100%)';\n    }\n  };\n\n  ColorPicker.prototype.hueChange = function (args) {\n    this.hsv[0] = args.value;\n    this.setHsvContainerBg();\n    this.convertToOtherFormat();\n  };\n\n  ColorPicker.prototype.opacityChange = function (args) {\n    var value = args.value;\n    var pValue = this.rgbToHex(this.rgb);\n    this.hsv[3] = value / 100;\n    this.rgb[3] = value / 100;\n    var cValue = this.rgbToHex(this.rgb);\n    this.updateOpacityInput(value);\n    var rgb = this.convertToRgbString(this.rgb);\n    this.updatePreview(rgb);\n    this.triggerEvent(cValue, pValue, rgb);\n  };\n\n  ColorPicker.prototype.updateOpacityInput = function (value) {\n    if (this.enableOpacity && !this.getWrapper().classList.contains(HIDEVALUE)) {\n      var opacityTextBoxInst = getInstance(select('.' + OPACITY, this.container), NumericTextBox);\n      opacityTextBoxInst.value = value;\n      opacityTextBoxInst.dataBind();\n    }\n  };\n\n  ColorPicker.prototype.createPreview = function (parentEle) {\n    var previewContainer = this.createElement('div', {\n      className: PREVIEW\n    });\n    parentEle.appendChild(previewContainer);\n    var preview = this.createElement('span', {\n      className: 'e-preview ' + CURRENT\n    });\n    previewContainer.appendChild(preview);\n    var colorValue = this.convertToRgbString(this.rgb);\n    preview.style.backgroundColor = colorValue;\n    preview = this.createElement('span', {\n      className: 'e-preview ' + PREVIOUS\n    });\n    previewContainer.appendChild(preview);\n    preview.style.backgroundColor = colorValue;\n  };\n\n  ColorPicker.prototype.isPicker = function () {\n    return !this.container.classList.contains(PALETTECONTENT);\n  };\n\n  ColorPicker.prototype.getPopupEle = function () {\n    return this.container.parentElement;\n  };\n\n  ColorPicker.prototype.createNumericInput = function (element, value, label, max) {\n    var _this = this;\n\n    var numericInput = new NumericTextBox({\n      value: value,\n      placeholder: label,\n      min: 0,\n      max: max,\n      format: '###.##',\n      showSpinButton: false,\n      floatLabelType: 'Always',\n      enableRtl: this.enableRtl,\n      enabled: !this.disabled,\n      readonly: this.isPicker() ? false : true,\n      change: function (args) {\n        if (args.event) {\n          _this.inputHandler(args.event);\n        }\n      }\n    });\n    numericInput.createElement = this.createElement;\n    numericInput.appendTo(element);\n  };\n\n  ColorPicker.prototype.createInput = function () {\n    var isPicker = this.isPicker();\n    var wrapper = this.getWrapper();\n\n    if (isPicker && !wrapper.classList.contains(HIDEVALUE) || !isPicker && wrapper.classList.contains(SHOWVALUE)) {\n      var inputWrap = this.createElement('div', {\n        className: INPUTWRAPPER\n      });\n\n      if (isPicker) {\n        this.appendElement(inputWrap, 2);\n      } else {\n        this.appendElement(inputWrap, 1);\n      }\n\n      var container = this.createElement('div', {\n        className: 'e-input-container'\n      });\n      inputWrap.appendChild(container);\n\n      if (!wrapper.classList.contains(HIDEVALUESWITCH)) {\n        this.appendValueSwitchBtn(inputWrap);\n      }\n\n      if (!wrapper.classList.contains(HIDEHEX)) {\n        var hexInput = this.createElement('input', {\n          className: HEX,\n          attrs: {\n            'maxlength': '7',\n            'spellcheck': 'false'\n          }\n        });\n        container.appendChild(hexInput);\n        Input.createInput({\n          element: hexInput,\n          floatLabelType: 'Always',\n          properties: {\n            placeholder: 'HEX',\n            enableRtl: this.enableRtl,\n            enabled: !this.disabled,\n            readonly: this.isPicker() ? false : true\n          }\n        }, this.createElement);\n        Input.setValue(this.value.slice(0, 7), hexInput);\n        hexInput.addEventListener('input', this.inputHandler.bind(this));\n      }\n\n      if (!wrapper.classList.contains(HIDERGBA)) {\n        var label = void 0;\n        var value = void 0;\n\n        if (this.isRgb) {\n          label = 'RGB';\n          value = this.rgb;\n        } else {\n          label = 'HSV';\n          value = this.hsv;\n        }\n\n        var clsName = ['rh', 'gs', 'bv'];\n\n        for (var i = 0; i < 3; i++) {\n          this.createNumericInput(container.appendChild(this.createElement('input', {\n            className: 'e-' + clsName[i] + '-value'\n          })), value[i], label[i], 255);\n        }\n\n        if (this.enableOpacity) {\n          this.appendOpacityValue(container);\n        }\n      }\n    }\n  };\n\n  ColorPicker.prototype.appendOpacityValue = function (container) {\n    this.createNumericInput(container.appendChild(this.createElement('input', {\n      className: OPACITY\n    })), this.rgb[3] * 100, 'A', 100);\n  };\n\n  ColorPicker.prototype.appendValueSwitchBtn = function (targetEle) {\n    var valueSwitchBtn = this.createElement('button', {\n      className: 'e-icons e-css e-btn e-flat e-icon-btn ' + FORMATSWITCH\n    });\n    targetEle.appendChild(valueSwitchBtn);\n\n    if (this.isPicker() && !this.getWrapper().classList.contains(HIDERGBA)) {\n      valueSwitchBtn.addEventListener('click', this.formatSwitchHandler.bind(this));\n    }\n  };\n\n  ColorPicker.prototype.createCtrlBtn = function () {\n    if (this.modeSwitcher || this.showButtons) {\n      this.l10n.setLocale(this.locale);\n      var btnWrapper = this.createElement('div', {\n        className: CTRLSWITCH\n      });\n      this.container.appendChild(btnWrapper);\n\n      if (this.showButtons) {\n        var controlBtnWrapper = this.createElement('div', {\n          className: CTRLBTN\n        });\n        btnWrapper.appendChild(controlBtnWrapper);\n        var apply = this.l10n.getConstant('Apply');\n        controlBtnWrapper.appendChild(this.createElement('button', {\n          innerHTML: apply,\n          className: 'e-btn e-css e-flat e-primary e-small ' + APPLY,\n          attrs: {\n            'title': apply\n          }\n        }));\n        var cancel = this.l10n.getConstant('Cancel');\n        controlBtnWrapper.appendChild(this.createElement('button', {\n          innerHTML: cancel,\n          className: 'e-btn e-css e-flat e-small ' + CANCEL,\n          attrs: {\n            'title': cancel\n          }\n        }));\n      }\n\n      if (this.modeSwitcher) {\n        this.appendModeSwitchBtn();\n      }\n    }\n  };\n\n  ColorPicker.prototype.appendModeSwitchBtn = function () {\n    var modeSwitcher = this.createElement('button', {\n      className: 'e-icons e-btn e-flat e-icon-btn ' + MODESWITCH,\n      attrs: {\n        title: this.l10n.getConstant('ModeSwitcher')\n      }\n    });\n    select('.' + CTRLSWITCH, this.container).insertBefore(modeSwitcher, select('.' + CTRLBTN, this.container));\n  };\n\n  ColorPicker.prototype.createDragTooltip = function () {\n    var _this = this;\n\n    var tooltip = new Tooltip({\n      opensOn: 'Custom',\n      showTipPointer: false,\n      cssClass: 'e-color-picker-tooltip',\n      beforeOpen: function (args) {\n        _this.tooltipEle = args.element;\n      },\n      animation: {\n        open: {\n          effect: 'None'\n        },\n        close: {\n          effect: 'None'\n        }\n      }\n    });\n    tooltip.createElement = this.createElement;\n    tooltip.appendTo(this.container);\n    tooltip.open(this.container);\n    this.tooltipEle.style.zIndex = getZindexPartial(this.tooltipEle).toString();\n    select('.e-tip-content', this.tooltipEle).appendChild(this.createElement('div', {\n      className: 'e-tip-transparent'\n    }));\n  };\n\n  ColorPicker.prototype.getTooltipInst = function () {\n    return getInstance(this.container, Tooltip);\n  };\n\n  ColorPicker.prototype.setTooltipOffset = function (value) {\n    this.getTooltipInst().offsetY = value;\n  };\n\n  ColorPicker.prototype.toggleDisabled = function (enable) {\n    if (enable) {\n      this.getWrapper().classList.add(DISABLED);\n    } else {\n      this.getWrapper().classList.remove(DISABLED);\n    }\n\n    if (this.showButtons) {\n      [].slice.call(selectAll('.e-btn', this.container)).forEach(function (ele) {\n        if (enable) {\n          attributes(ele, {\n            'disabled': ''\n          });\n        } else {\n          ele.removeAttribute('disabled');\n        }\n      });\n    }\n  };\n\n  ColorPicker.prototype.convertToRgbString = function (rgb) {\n    return rgb.length ? rgb.length === 4 ? 'rgba(' + rgb.join() + ')' : 'rgb(' + rgb.join() + ')' : '';\n  };\n\n  ColorPicker.prototype.convertToHsvString = function (hsv) {\n    return hsv.length === 4 ? 'hsva(' + hsv.join() + ')' : 'hsv(' + hsv.join() + ')';\n  };\n\n  ColorPicker.prototype.updateHsv = function () {\n    this.hsv[1] = this.hsv[1] > 100 ? 100 : this.hsv[1];\n    this.hsv[2] = this.hsv[2] > 100 ? 100 : this.hsv[2];\n    this.setHandlerPosition();\n  };\n\n  ColorPicker.prototype.convertToOtherFormat = function (isKey) {\n    if (isKey === void 0) {\n      isKey = false;\n    }\n\n    var pValue = this.rgbToHex(this.rgb);\n    this.rgb = this.hsvToRgb.apply(this, this.hsv);\n    var cValue = this.rgbToHex(this.rgb);\n    var rgba = this.convertToRgbString(this.rgb);\n    this.updatePreview(rgba);\n    this.updateInput(cValue);\n    this.triggerEvent(cValue, pValue, rgba, isKey);\n  };\n\n  ColorPicker.prototype.updateInput = function (value) {\n    var wrapper = this.getWrapper();\n\n    if (!wrapper.classList.contains(HIDEVALUE)) {\n      if (!wrapper.classList.contains(HIDEHEX)) {\n        Input.setValue(value.substr(0, 7), select('.' + HEX, this.container));\n      }\n\n      if (!wrapper.classList.contains(HIDERGBA)) {\n        if (this.isRgb) {\n          this.updateValue(this.rgb, false);\n        } else {\n          this.updateValue(this.hsv, false);\n        }\n      }\n    }\n  };\n\n  ColorPicker.prototype.updatePreview = function (value) {\n    if (this.enableOpacity) {\n      this.updateOpacitySliderBg();\n    }\n\n    select('.e-tip-transparent', this.tooltipEle).style.backgroundColor = value;\n    select('.' + PREVIEW + ' .' + CURRENT, this.container).style.backgroundColor = value;\n    select('.' + PREVIEW + ' .' + PREVIOUS, this.container).style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));\n  };\n\n  ColorPicker.prototype.getDragHandler = function () {\n    return select('.' + HANDLER, this.container);\n  };\n\n  ColorPicker.prototype.removeTileSelection = function () {\n    var selectedEle = [].slice.call(selectAll('.' + SELECT, this.container.children[0]));\n    selectedEle.forEach(function (ele) {\n      ele.classList.remove(SELECT);\n      ele.setAttribute('aria-selected', 'false');\n    });\n  };\n\n  ColorPicker.prototype.convertRgbToNumberArray = function (value) {\n    return value.slice(value.indexOf('(') + 1, value.indexOf(')')).split(',').map(function (n, i) {\n      return i !== 3 ? parseInt(n, 10) : parseFloat(n);\n    });\n  };\n  /**\n   * To get color value in specified type.\n   *\n   * @param {string} value - Specify the color value.\n   * @param {string} type - Specify the type to which the specified color needs to be converted.\n   * @method getValue\n   * @returns {string} - Color value\n   */\n\n\n  ColorPicker.prototype.getValue = function (value, type) {\n    if (!value) {\n      value = this.value;\n    }\n\n    type = !type ? 'hex' : type.toLowerCase();\n\n    if (value[0] === 'r') {\n      var cValue = this.convertRgbToNumberArray(value);\n\n      if (type === 'hex' || type === 'hexa') {\n        var hex = this.rgbToHex(cValue);\n        return type === 'hex' ? hex.slice(0, 7) : hex;\n      } else {\n        if (type === 'hsv') {\n          return this.convertToHsvString(this.rgbToHsv.apply(this, cValue.slice(0, 3)));\n        } else {\n          if (type === 'hsva') {\n            return this.convertToHsvString(this.rgbToHsv.apply(this, cValue));\n          } else {\n            return 'null';\n          }\n        }\n      }\n    } else {\n      if (value[0] === 'h') {\n        var cValue = this.hsvToRgb.apply(this, this.convertRgbToNumberArray(value));\n\n        if (type === 'rgba') {\n          return this.convertToRgbString(cValue);\n        } else {\n          if (type === 'hex' || type === 'hexa') {\n            var hex = this.rgbToHex(cValue);\n            return type === 'hex' ? hex.slice(0, 7) : hex;\n          } else {\n            if (type === 'rgb') {\n              return this.convertToRgbString(cValue.slice(0, 3));\n            } else {\n              return 'null';\n            }\n          }\n        }\n      } else {\n        value = this.roundValue(value);\n        var rgb = this.hexToRgb(value);\n\n        if (type === 'rgb' || type === 'hsv') {\n          rgb = rgb.slice(0, 3);\n        }\n\n        if (type === 'rgba' || type === 'rgb') {\n          return this.convertToRgbString(rgb);\n        } else {\n          if (type === 'hsva' || type === 'hsv') {\n            return this.convertToHsvString(this.rgbToHsv.apply(this, rgb));\n          } else {\n            if (type === 'hex') {\n              return value.slice(0, 7);\n            } else {\n              if (type === 'a') {\n                return rgb[3].toString();\n              } else {\n                return 'null';\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * To show/hide ColorPicker popup based on current state of the SplitButton.\n   *\n   * @method toggle\n   * @returns {void}\n   */\n\n\n  ColorPicker.prototype.toggle = function () {\n    if (this.container.parentElement.classList.contains('e-popup-close')) {\n      this.splitBtn.toggle();\n    } else {\n      this.closePopup(null);\n    }\n  };\n  /**\n   * Get component name.\n   *\n   * @returns {string} - Module Name\n   * @private\n   */\n\n\n  ColorPicker.prototype.getModuleName = function () {\n    return 'colorpicker';\n  };\n  /**\n   * Gets the properties to be maintained in the persisted state.\n   *\n   * @returns {string} - Persist data\n   */\n\n\n  ColorPicker.prototype.getPersistData = function () {\n    return this.addOnPersist(['value']);\n  };\n\n  ColorPicker.prototype.wireEvents = function () {\n    if (this.isPicker()) {\n      var dragHandler = this.getDragHandler();\n      EventHandler.add(dragHandler, 'keydown', this.pickerKeyDown, this);\n      EventHandler.add(this.getHsvContainer(), 'mousedown touchstart', this.handlerDown, this);\n\n      if (this.modeSwitcher || this.showButtons) {\n        this.addCtrlSwitchEvent();\n      }\n\n      EventHandler.add(select('.' + PREVIOUS, this.container), 'click', this.previewHandler, this);\n    } else {\n      EventHandler.add(this.container, 'click', this.paletteClickHandler, this);\n      EventHandler.add(this.container, 'keydown', this.paletteKeyDown, this);\n    }\n  };\n\n  ColorPicker.prototype.formResetHandler = function () {\n    this.value = this.initialInputValue;\n    attributes(this.element, {\n      'value': this.initialInputValue\n    });\n  };\n\n  ColorPicker.prototype.addCtrlSwitchEvent = function () {\n    var ctrlSwitchBtn = select('.' + CTRLSWITCH, this.container);\n\n    if (ctrlSwitchBtn) {\n      EventHandler.add(ctrlSwitchBtn, 'click', this.btnClickHandler, this);\n    }\n  };\n\n  ColorPicker.prototype.pickerKeyDown = function (e) {\n    switch (e.keyCode) {\n      case 39:\n        this.handlerDragPosition(1, this.enableRtl ? -1 : 1, e);\n        break;\n\n      case 37:\n        this.handlerDragPosition(1, this.enableRtl ? 1 : -1, e);\n        break;\n\n      case 38:\n        this.handlerDragPosition(2, 1, e);\n        break;\n\n      case 40:\n        this.handlerDragPosition(2, -1, e);\n        break;\n\n      case 13:\n        {\n          e.preventDefault();\n          var cValue = this.rgbToHex(this.rgb);\n          this.enterKeyHandler(cValue, e);\n        }\n    }\n  };\n\n  ColorPicker.prototype.enterKeyHandler = function (value, e) {\n    this.triggerChangeEvent(value);\n\n    if (!this.inline) {\n      this.closePopup(e);\n      this.splitBtn.element.focus();\n    }\n  };\n\n  ColorPicker.prototype.closePopup = function (e) {\n    var _this = this;\n\n    var beforeCloseArgs = {\n      element: this.container,\n      event: e,\n      cancel: false\n    };\n    this.trigger('beforeClose', beforeCloseArgs, function (observedcloseArgs) {\n      if (!observedcloseArgs.cancel) {\n        _this.splitBtn.toggle();\n\n        _this.onPopupClose();\n      }\n    });\n  };\n\n  ColorPicker.prototype.triggerChangeEvent = function (value) {\n    var hex = value.slice(0, 7);\n    this.trigger('change', {\n      currentValue: {\n        hex: hex,\n        rgba: this.convertToRgbString(this.rgb)\n      },\n      previousValue: {\n        hex: this.value.slice(0, 7),\n        rgba: this.convertToRgbString(this.hexToRgb(this.value))\n      },\n      value: this.enableOpacity ? value : hex\n    });\n\n    if (this.enableOpacity) {\n      this.setProperties({\n        'value': value\n      }, true);\n    } else {\n      this.setProperties({\n        'value': hex\n      }, true);\n    }\n\n    this.element.value = hex ? hex : '#000000';\n  };\n\n  ColorPicker.prototype.handlerDragPosition = function (prob, value, e) {\n    e.preventDefault();\n    this.hsv[prob] += value * (e.ctrlKey ? 1 : 3);\n\n    if (this.hsv[prob] < 0) {\n      this.hsv[prob] = 0;\n    }\n\n    this.updateHsv();\n    this.convertToOtherFormat(true);\n  };\n\n  ColorPicker.prototype.handlerDown = function (e) {\n    e.preventDefault();\n\n    if (e.type === 'mousedown') {\n      this.clientX = Math.abs(e.pageX - pageXOffset);\n      this.clientY = Math.abs(e.pageY - pageYOffset);\n      this.setTooltipOffset(8);\n    } else {\n      this.clientX = Math.abs(e.changedTouches[0].pageX - pageXOffset);\n      this.clientY = Math.abs(e.changedTouches[0].pageY - pageYOffset);\n      this.setTooltipOffset(-8);\n    }\n\n    this.setHsv(this.clientX, this.clientY);\n    this.getDragHandler().style.transition = 'left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)';\n    this.updateHsv();\n    this.convertToOtherFormat();\n    this.getDragHandler().focus();\n    EventHandler.add(document, 'mousemove touchmove', this.handlerMove, this);\n    EventHandler.add(document, 'mouseup touchend', this.handlerEnd, this);\n  };\n\n  ColorPicker.prototype.handlerMove = function (e) {\n    if (e.type !== 'touchmove') {\n      e.preventDefault();\n    }\n\n    var x;\n    var y;\n\n    if (e.type === 'mousemove') {\n      x = Math.abs(e.pageX - pageXOffset);\n      y = Math.abs(e.pageY - pageYOffset);\n    } else {\n      x = Math.abs(e.changedTouches[0].pageX - pageXOffset);\n      y = Math.abs(e.changedTouches[0].pageY - pageYOffset);\n    }\n\n    this.setHsv(x, y);\n    var dragHandler = this.getDragHandler();\n    this.updateHsv();\n    this.convertToOtherFormat();\n    this.getTooltipInst().refresh(dragHandler);\n\n    if (!this.tooltipEle.style.transform) {\n      if (Math.abs(this.clientX - x) > 8 || Math.abs(this.clientY - y) > 8) {\n        select('.' + HSVAREA, this.container).style.cursor = 'pointer';\n        dragHandler.style.transition = 'none';\n\n        if (!this.inline) {\n          this.tooltipEle.style.zIndex = (parseInt(this.getPopupEle().style.zIndex, 10) + 1).toString();\n        }\n\n        this.tooltipEle.style.transform = 'rotate(45deg)';\n        dragHandler.classList.add('e-hide-handler');\n      }\n    }\n  };\n\n  ColorPicker.prototype.setHsv = function (clientX, clientY) {\n    var ele = select('.' + HSVAREA, this.container);\n    var position = ele.getBoundingClientRect();\n\n    if (this.enableRtl) {\n      clientX = clientX > position.right ? 0 : Math.abs(clientX - position.right);\n    } else {\n      clientX = clientX > position.left ? Math.abs(clientX - position.left) : 0;\n    }\n\n    clientY = clientY > position.top ? Math.abs(clientY - position.top) : 0;\n    this.hsv[2] = Math.round(Number(100 * (ele.offsetHeight - Math.max(0, Math.min(ele.offsetHeight, clientY - ele.offsetTop))) / ele.offsetHeight) * 10) / 10;\n    this.hsv[1] = Math.round(Number(100 * Math.max(0, Math.min(ele.offsetWidth, clientX - ele.offsetLeft)) / ele.offsetWidth) * 10) / 10;\n  };\n\n  ColorPicker.prototype.handlerEnd = function (e) {\n    if (e.type !== 'touchend') {\n      e.preventDefault();\n    }\n\n    EventHandler.remove(document, 'mousemove touchmove', this.handlerMove);\n    EventHandler.remove(document, 'mouseup touchend', this.handlerEnd);\n    var dragHandler = this.getDragHandler();\n    select('.' + HSVAREA, this.container).style.cursor = '';\n\n    if (this.tooltipEle.style.transform) {\n      this.tooltipEle.style.transform = '';\n      dragHandler.classList.remove('e-hide-handler');\n    }\n\n    if (!this.inline && !this.showButtons) {\n      this.closePopup(e);\n    }\n  };\n\n  ColorPicker.prototype.btnClickHandler = function (e) {\n    var target = e.target;\n\n    if (closest(target, '.' + MODESWITCH)) {\n      e.stopPropagation();\n      this.switchToPalette();\n    } else {\n      if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {\n        this.ctrlBtnClick(target, e);\n      }\n    }\n  };\n\n  ColorPicker.prototype.switchToPalette = function () {\n    this.trigger('beforeModeSwitch', {\n      element: this.container,\n      mode: 'Palette'\n    });\n    this.unWireEvents();\n    this.destroyOtherComp();\n    detach(select('.e-slider-preview', this.container));\n\n    if (!this.getWrapper().classList.contains(HIDEVALUE)) {\n      remove(select('.' + INPUTWRAPPER, this.container));\n    }\n\n    detach(this.getHsvContainer());\n    this.createPalette();\n    this.firstPaletteFocus();\n    this.createInput();\n    this.refreshPopupPos();\n    this.wireEvents();\n    this.trigger('onModeSwitch', {\n      element: this.container,\n      mode: 'Palette'\n    });\n  };\n\n  ColorPicker.prototype.refreshPopupPos = function () {\n    if (!this.inline) {\n      var popupEle = this.getPopupEle();\n      popupEle.style.left = formatUnit(0 + pageXOffset);\n      popupEle.style.top = formatUnit(0 + pageYOffset);\n      this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement);\n    }\n  };\n\n  ColorPicker.prototype.formatSwitchHandler = function () {\n    if (this.isRgb) {\n      this.updateValue(this.hsv, true, 3, [360, 100, 100]);\n      this.isRgb = false;\n    } else {\n      this.updateValue(this.rgb, true, 2);\n      this.isRgb = true;\n    }\n  };\n\n  ColorPicker.prototype.updateValue = function (value, format, idx, max) {\n    var clsName = ['e-rh-value', 'e-gs-value', 'e-bv-value'];\n    var inst;\n\n    for (var i = 0, len = clsName.length; i < len; i++) {\n      inst = getInstance(select('.' + clsName[i], this.container), NumericTextBox);\n      inst.value = Math.round(value[i]);\n\n      if (format) {\n        inst.placeholder = clsName[i].substr(idx, 1).toUpperCase();\n        inst.max = max ? max[i] : 255;\n      }\n\n      inst.dataBind();\n    }\n  };\n\n  ColorPicker.prototype.previewHandler = function (e) {\n    var target = e.target;\n    var pValue = this.rgbToHex(this.rgb);\n    this.rgb = this.convertRgbToNumberArray(target.style.backgroundColor);\n\n    if (!this.rgb[3]) {\n      this.rgb[3] = 1;\n    }\n\n    var cValue = this.rgbToHex(this.rgb);\n    var hsv = this.rgbToHsv.apply(this, this.rgb);\n\n    if (hsv[0] !== this.hsv[0]) {\n      this.hueSlider.setProperties({\n        'value': hsv[0]\n      }, true);\n      this.hueSlider.refresh();\n    }\n\n    this.setHsvContainerBg(hsv[0]);\n\n    if (this.enableOpacity && hsv[3] !== this.hsv[3]) {\n      this.opacitySlider.setProperties({\n        'value': hsv[3] * 100\n      }, true);\n      this.opacitySlider.refresh();\n      this.updateOpacitySliderBg();\n    }\n\n    this.hsv = hsv;\n    this.setHandlerPosition();\n    this.updateInput(cValue);\n    select('.' + PREVIEW + ' .' + CURRENT, this.container).style.backgroundColor = this.convertToRgbString(this.rgb);\n    this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb));\n  };\n\n  ColorPicker.prototype.paletteClickHandler = function (e) {\n    e.preventDefault();\n    var target = e.target;\n\n    if (target.classList.contains(TILE)) {\n      this.removeTileSelection();\n      this.addTileSelection(target);\n\n      if (target.classList.contains(NOCOLOR)) {\n        this.noColorTile();\n      } else {\n        var cValue = target.getAttribute('aria-label');\n        var pValue = this.rgbToHex(this.rgb);\n        this.rgb = this.hexToRgb(this.roundValue(cValue));\n        this.hsv = this.rgbToHsv.apply(this, this.rgb);\n\n        if (this.getWrapper().classList.contains(SHOWVALUE)) {\n          this.updateInput(cValue);\n        }\n\n        this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb));\n      }\n\n      if (!this.inline && !this.showButtons) {\n        this.closePopup(e);\n      }\n    } else {\n      if (closest(target, '.' + MODESWITCH)) {\n        this.switchToPicker();\n      } else {\n        if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {\n          this.ctrlBtnClick(target, e);\n        } else {\n          if (this.getWrapper().classList.contains(SHOWVALUE) && closest(target, '.' + FORMATSWITCH)) {\n            this.formatSwitchHandler();\n          }\n        }\n      }\n    }\n  };\n\n  ColorPicker.prototype.noColorTile = function (isKey) {\n    if (isKey === void 0) {\n      isKey = false;\n    }\n\n    var pValue = this.rgbToHex(this.rgb);\n    this.rgb = [];\n    this.hsv = [];\n    this.triggerEvent('', pValue, '', isKey);\n  };\n\n  ColorPicker.prototype.switchToPicker = function () {\n    var wrapper = this.getWrapper();\n    this.trigger('beforeModeSwitch', {\n      element: this.container,\n      mode: 'Picker'\n    });\n    this.unWireEvents();\n    [].slice.call(selectAll('.' + PALETTES, this.container)).forEach(function (ele) {\n      detach(ele);\n    });\n\n    if (wrapper.classList.contains(SHOWVALUE)) {\n      detach(select('.' + INPUTWRAPPER, this.container));\n    }\n\n    this.container.style.width = '';\n    var grpEle = select('.e-custom-palette', this.container);\n\n    if (this.presetColors) {\n      remove(grpEle);\n    }\n\n    this.createPicker();\n    this.getDragHandler().focus();\n    this.createInput();\n    this.refreshPopupPos();\n    this.wireEvents();\n    this.trigger('onModeSwitch', {\n      element: this.container,\n      mode: 'Picker'\n    });\n  };\n\n  ColorPicker.prototype.ctrlBtnClick = function (ele, e) {\n    if (ele.classList.contains(APPLY)) {\n      var cValue = this.rgbToHex(this.rgb);\n      this.triggerChangeEvent(cValue);\n    }\n\n    if (!this.inline) {\n      this.closePopup(e);\n      this.splitBtn.element.focus();\n    }\n  };\n\n  ColorPicker.prototype.paletteKeyDown = function (e) {\n    var target = e.target;\n\n    if (!target.classList.contains(PALETTES)) {\n      return;\n    }\n\n    var selectedEle;\n    var idx;\n    var tiles = [].slice.call(selectAll('.' + TILE, target));\n    var prevSelectedEle = tiles.filter(function (tile) {\n      return tile.classList.contains('e-selected');\n    }).pop();\n\n    switch (!e.altKey && e.keyCode) {\n      case 39:\n        e.preventDefault();\n        selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? -1 : 1)] : tiles[this.enableRtl ? tiles.length - 1 : 0];\n        this.keySelectionChanges(selectedEle);\n        break;\n\n      case 37:\n        e.preventDefault();\n        selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? 1 : -1)] : tiles[this.enableRtl ? 0 : tiles.length - 1];\n        this.keySelectionChanges(selectedEle);\n        break;\n\n      case 38:\n        e.preventDefault();\n        idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, -this.columns) : 0;\n        selectedEle = tiles[idx] ? tiles[idx] : tiles[idx - this.columns];\n        this.keySelectionChanges(selectedEle);\n        break;\n\n      case 40:\n        e.preventDefault();\n        idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, this.columns) : tiles.length - 1;\n\n        if (tiles[idx]) {\n          selectedEle = tiles[idx];\n        } else {\n          idx %= tiles.length;\n          idx += tiles[tiles.length - 1].parentElement.childElementCount;\n          selectedEle = tiles[idx];\n        }\n\n        this.keySelectionChanges(selectedEle);\n        break;\n\n      case 13:\n        e.preventDefault();\n\n        if (prevSelectedEle) {\n          var cValue = prevSelectedEle.getAttribute('aria-label');\n          this.enterKeyHandler(cValue ? cValue : '', e);\n        }\n\n    }\n  };\n\n  ColorPicker.prototype.keySelectionChanges = function (newEle) {\n    this.removeTileSelection();\n    this.addTileSelection(newEle);\n\n    if (newEle.classList.contains(NOCOLOR)) {\n      this.noColorTile(true);\n    } else {\n      var cValue = newEle.getAttribute('aria-label');\n      var pValue = this.rgbToHex(this.rgb);\n      this.rgb = this.hexToRgb(cValue);\n      this.hsv = this.rgbToHsv.apply(this, this.rgb);\n\n      if (this.getWrapper().classList.contains(SHOWVALUE)) {\n        this.updateInput(cValue);\n      }\n\n      this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb), true);\n    }\n  };\n\n  ColorPicker.prototype.tilePosition = function (items, element, cIdx) {\n    items = Array.prototype.slice.call(items);\n    var n = items.length;\n    var emptyCount = this.columns - items[n - 1].parentElement.childElementCount;\n    var idx = items.indexOf(element);\n    idx += cIdx;\n\n    if (idx < 0) {\n      idx += n + emptyCount;\n    } else {\n      idx %= n + emptyCount;\n    }\n\n    return idx;\n  };\n\n  ColorPicker.prototype.inputHandler = function (e) {\n    var target = e.target;\n\n    if (!target.value.length) {\n      return;\n    }\n\n    var hsv;\n    var pValue;\n    var label = select('.e-float-text', target.parentElement).textContent;\n\n    switch (label) {\n      case 'HEX':\n        {\n          var value = '';\n\n          if (target.value[0] === '#' && target.value.length !== 5 || target.value[0] !== '#' && target.value.length !== 4) {\n            value = this.roundValue(target.value);\n          }\n\n          if (value.length === 9) {\n            pValue = this.rgbToHex(this.rgb);\n            this.rgb = this.hexToRgb(value + value.substr(-2));\n            this.inputValueChange(this.rgbToHsv.apply(this, this.rgb), pValue, target.value);\n          } else {\n            return;\n          }\n\n          break;\n        }\n\n      case 'R':\n        if (this.rgb[0] !== Number(target.value)) {\n          pValue = this.rgbToHex(this.rgb);\n          this.rgb[0] = Number(target.value);\n          hsv = this.rgbToHsv.apply(this, this.rgb);\n          this.inputValueChange(hsv, pValue);\n        }\n\n        break;\n\n      case 'G':\n        if (this.rgb[1] !== Number(target.value)) {\n          pValue = this.rgbToHex(this.rgb);\n          this.rgb[1] = Number(target.value);\n          hsv = this.rgbToHsv.apply(this, this.rgb);\n          this.inputValueChange(hsv, pValue);\n        }\n\n        break;\n\n      case 'B':\n        if (this.rgb[2] !== Number(target.value)) {\n          pValue = this.rgbToHex(this.rgb);\n          this.rgb[2] = Number(target.value);\n          hsv = this.rgbToHsv.apply(this, this.rgb);\n          this.inputValueChange(hsv, pValue);\n        }\n\n        break;\n\n      case 'H':\n        this.hueSlider.value = Number(target.value);\n        break;\n\n      case 'S':\n        if (this.hsv[1] !== Number(target.value)) {\n          this.hsv[1] = Number(target.value);\n          this.updateHsv();\n          this.convertToOtherFormat();\n        }\n\n        break;\n\n      case 'V':\n        if (this.hsv[2] !== Number(target.value)) {\n          this.hsv[2] = Number(target.value);\n          this.updateHsv();\n          this.convertToOtherFormat();\n        }\n\n        break;\n\n      case 'A':\n        this.opacitySlider.value = Number(target.value);\n        break;\n    }\n  };\n\n  ColorPicker.prototype.inputValueChange = function (hsv, pValue, value) {\n    if (hsv[0] !== this.hsv[0]) {\n      this.hueSlider.setProperties({\n        'value': hsv[0]\n      }, true);\n      this.hueSlider.refresh();\n      this.setHsvContainerBg(hsv[0]);\n    }\n\n    this.hsv = hsv;\n    var cValue = this.rgbToHex(this.rgb);\n    this.setHandlerPosition();\n    this.updateInput(value ? value : cValue);\n    var rgba = this.convertToRgbString(this.rgb);\n    this.updatePreview(rgba);\n    this.triggerEvent(cValue, pValue, rgba);\n  };\n\n  ColorPicker.prototype.triggerEvent = function (cValue, pValue, rgba, isKey) {\n    if (isKey === void 0) {\n      isKey = false;\n    }\n\n    var hex = cValue.slice(0, 7);\n\n    if (!this.showButtons && !isKey) {\n      this.trigger('change', {\n        currentValue: {\n          hex: hex,\n          rgba: rgba\n        },\n        previousValue: {\n          hex: this.value.slice(0, 7),\n          rgba: this.convertToRgbString(this.hexToRgb(this.value))\n        },\n        value: cValue\n      });\n\n      if (this.enableOpacity) {\n        this.setProperties({\n          'value': cValue\n        }, true);\n      } else {\n        this.setProperties({\n          'value': hex\n        }, true);\n      }\n\n      this.element.value = hex ? hex : '#000000';\n    } else {\n      this.trigger('select', {\n        currentValue: {\n          hex: hex,\n          rgba: rgba\n        },\n        previousValue: {\n          hex: pValue.slice(0, 7),\n          rgba: this.convertToRgbString(this.hexToRgb(pValue))\n        }\n      });\n    }\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers.\n   * Also it maintains the initial input element from the DOM.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n\n\n  ColorPicker.prototype.destroy = function () {\n    var _this = this;\n\n    var wrapper = this.getWrapper();\n\n    _super.prototype.destroy.call(this);\n\n    ['tabindex', 'spellcheck'].forEach(function (attr) {\n      _this.element.removeAttribute(attr);\n    });\n\n    if (this.inline) {\n      this.unWireEvents();\n      this.destroyOtherComp();\n    } else {\n      if (this.isPopupOpen()) {\n        this.unWireEvents();\n        this.destroyOtherComp();\n      }\n\n      this.splitBtn.destroy();\n      this.splitBtn = null;\n    }\n\n    this.tileRipple();\n    this.tileRipple = null;\n    this.ctrlBtnRipple();\n    this.ctrlBtnRipple = null;\n\n    if (this.element.nextElementSibling) {\n      detach(this.element.nextElementSibling);\n    }\n\n    if (wrapper) {\n      wrapper.parentElement.insertBefore(this.element, wrapper);\n      detach(wrapper);\n    }\n\n    this.container = null;\n\n    if (this.formElement) {\n      EventHandler.remove(this.formElement, 'reset', this.formResetHandler);\n    }\n  };\n\n  ColorPicker.prototype.destroyOtherComp = function () {\n    if (this.isPicker()) {\n      this.hueSlider.destroy();\n\n      if (this.enableOpacity) {\n        this.opacitySlider.destroy();\n        this.opacitySlider = null;\n      }\n\n      this.hueSlider = null;\n      var tooltipInst = this.getTooltipInst();\n      tooltipInst.close();\n      tooltipInst.destroy();\n      this.tooltipEle = null;\n    }\n  };\n\n  ColorPicker.prototype.isPopupOpen = function () {\n    return this.getPopupEle().classList.contains('e-popup-open');\n  };\n\n  ColorPicker.prototype.unWireEvents = function () {\n    if (this.isPicker()) {\n      var dragHandler = this.getDragHandler();\n      EventHandler.remove(dragHandler, 'keydown', this.pickerKeyDown);\n      EventHandler.remove(this.getHsvContainer(), 'mousedown touchstart', this.handlerDown);\n\n      if (this.modeSwitcher || this.showButtons) {\n        EventHandler.remove(select('.' + CTRLSWITCH, this.container), 'click', this.btnClickHandler);\n      }\n\n      EventHandler.remove(select('.' + PREVIOUS, this.container), 'click', this.previewHandler);\n    } else {\n      EventHandler.remove(this.container, 'click', this.paletteClickHandler);\n      EventHandler.remove(this.container, 'keydown', this.paletteKeyDown);\n    }\n  };\n\n  ColorPicker.prototype.roundValue = function (value) {\n    if (!value) {\n      return '';\n    }\n\n    if (value[0] !== '#') {\n      value = '#' + value;\n    }\n\n    var len = value.length;\n\n    if (len === 4) {\n      value += 'f';\n      len = 5;\n    }\n\n    if (len === 5) {\n      var tempValue = '';\n\n      for (var i = 1, len_1 = value.length; i < len_1; i++) {\n        tempValue += value.charAt(i) + value.charAt(i);\n      }\n\n      value = '#' + tempValue;\n      len = 9;\n    }\n\n    if (len === 7) {\n      value += 'ff';\n    }\n\n    return value;\n  };\n\n  ColorPicker.prototype.hexToRgb = function (hex) {\n    if (!hex) {\n      return [];\n    }\n\n    hex = hex.trim();\n\n    if (hex.length !== 9) {\n      hex = this.roundValue(hex);\n    }\n\n    var opacity = Number((parseInt(hex.slice(-2), 16) / 255).toFixed(2));\n    hex = hex.slice(1, 7);\n    var bigInt = parseInt(hex, 16);\n    var h = [];\n    h.push(bigInt >> 16 & 255);\n    h.push(bigInt >> 8 & 255);\n    h.push(bigInt & 255);\n    h.push(opacity);\n    return h;\n  };\n\n  ColorPicker.prototype.rgbToHsv = function (r, g, b, opacity) {\n    if (this.rgb && !this.rgb.length) {\n      return [];\n    }\n\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var h;\n    var v = max;\n    var d = max - min;\n    var s = max === 0 ? 0 : d / max;\n\n    if (max === min) {\n      h = 0;\n    } else {\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n\n        case g:\n          h = (b - r) / d + 2;\n          break;\n\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n\n      h /= 6;\n    }\n\n    var hsv = [Math.round(h * 360), Math.round(s * 1000) / 10, Math.round(v * 1000) / 10];\n\n    if (!isNullOrUndefined(opacity)) {\n      hsv.push(opacity);\n    }\n\n    return hsv;\n  };\n\n  ColorPicker.prototype.hsvToRgb = function (h, s, v, opacity) {\n    var r;\n    var g;\n    var b;\n    s /= 100;\n    v /= 100;\n\n    if (s === 0) {\n      r = g = b = v;\n      return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255), opacity];\n    }\n\n    h /= 60;\n    var i = Math.floor(h);\n    var f = h - i;\n    var p = v * (1 - s);\n    var q = v * (1 - s * f);\n    var t = v * (1 - s * (1 - f));\n\n    switch (i) {\n      case 0:\n        r = v;\n        g = t;\n        b = p;\n        break;\n\n      case 1:\n        r = q;\n        g = v;\n        b = p;\n        break;\n\n      case 2:\n        r = p;\n        g = v;\n        b = t;\n        break;\n\n      case 3:\n        r = p;\n        g = q;\n        b = v;\n        break;\n\n      case 4:\n        r = t;\n        g = p;\n        b = v;\n        break;\n\n      default:\n        r = v;\n        g = p;\n        b = q;\n    }\n\n    var rgb = [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n\n    if (!isNullOrUndefined(opacity)) {\n      rgb.push(opacity);\n    }\n\n    return rgb;\n  };\n\n  ColorPicker.prototype.rgbToHex = function (rgb) {\n    return rgb.length ? '#' + this.hex(rgb[0]) + this.hex(rgb[1]) + this.hex(rgb[2]) + (!isNullOrUndefined(rgb[3]) ? rgb[3] !== 0 ? (Math.round(rgb[3] * 255) + 0x10000).toString(16).substr(-2) : '00' : '') : '';\n  };\n\n  ColorPicker.prototype.hex = function (x) {\n    return ('0' + x.toString(16)).slice(-2);\n  };\n\n  ColorPicker.prototype.changeModeSwitcherProp = function (prop) {\n    var ctrlSwitchWrapper = select('.' + CTRLSWITCH, this.container);\n\n    if (prop) {\n      if (ctrlSwitchWrapper) {\n        this.appendModeSwitchBtn();\n      } else {\n        this.createCtrlBtn();\n\n        if (this.isPicker() && !this.disabled) {\n          this.addCtrlSwitchEvent();\n        }\n      }\n    } else {\n      if (ctrlSwitchWrapper) {\n        if (this.showButtons) {\n          detach(select('.' + MODESWITCH, ctrlSwitchWrapper));\n        } else {\n          remove(ctrlSwitchWrapper);\n        }\n      }\n    }\n  };\n\n  ColorPicker.prototype.changeShowBtnProps = function (prop) {\n    var ctrlBtnWrapper = select('.' + CTRLSWITCH, this.container);\n\n    if (prop) {\n      if (ctrlBtnWrapper) {\n        remove(ctrlBtnWrapper);\n      }\n\n      this.createCtrlBtn();\n\n      if (this.isPicker() && !this.disabled) {\n        this.addCtrlSwitchEvent();\n      }\n    } else {\n      if (this.modeSwitcher) {\n        detach(select('.' + CTRLBTN, ctrlBtnWrapper));\n      } else {\n        remove(ctrlBtnWrapper);\n      }\n    }\n  };\n\n  ColorPicker.prototype.changeValueProp = function (newProp) {\n    if (this.isPicker()) {\n      this.rgb = this.hexToRgb(newProp);\n      this.hsv = this.rgbToHsv.apply(this, this.rgb);\n      this.setHandlerPosition();\n      detach(closest(this.hueSlider.element, '.e-slider-preview'));\n      this.createSlider();\n      this.setHsvContainerBg();\n      this.updateInput(newProp);\n\n      if (this.rgb.length === 4) {\n        this.updateOpacityInput(this.rgb[3] * 100);\n      }\n    } else {\n      this.removeTileSelection();\n      var ele = this.container.querySelector('span[aria-label=\"' + this.roundValue(newProp) + '\"]');\n\n      if (ele) {\n        this.addTileSelection(ele);\n      }\n    }\n  };\n\n  ColorPicker.prototype.setInputEleProps = function () {\n    remove(select('.' + INPUTWRAPPER, this.container));\n    this.createInput();\n  };\n\n  ColorPicker.prototype.changeDisabledProp = function (newProp) {\n    if (this.isPicker()) {\n      this.hueSlider.enabled = !newProp;\n      this.opacitySlider.enabled = !newProp;\n      this.setInputEleProps();\n    }\n\n    if (newProp) {\n      this.toggleDisabled(true);\n      this.unWireEvents();\n    } else {\n      this.toggleDisabled(false);\n      this.wireEvents();\n    }\n  };\n\n  ColorPicker.prototype.changeCssClassProps = function (newProp, oldProp) {\n    var wrapper = this.getWrapper();\n    var popupWrapper = this.getPopupEle();\n\n    if (oldProp) {\n      removeClass([wrapper, popupWrapper], oldProp.split(' '));\n    }\n\n    if (newProp) {\n      addClass([wrapper, popupWrapper], newProp.split(' '));\n    }\n  };\n\n  ColorPicker.prototype.changeRtlProps = function (newProp) {\n    if (newProp) {\n      addClass([this.getWrapper()], 'e-rtl');\n    } else {\n      removeClass([this.getWrapper()], 'e-rtl');\n    }\n  };\n\n  ColorPicker.prototype.changePaletteProps = function () {\n    detach(this.container.children[0]);\n    this.container.style.width = '';\n    this.createPalette();\n  };\n\n  ColorPicker.prototype.changeOpacityProps = function (newProp) {\n    var wrapper = this.getWrapper();\n\n    if (newProp) {\n      removeClass([this.container.parentElement], HIDEOPACITY);\n      this.createOpacitySlider(select('.e-colorpicker-slider', this.container).appendChild(this.createElement('div', {\n        className: 'e-opacity-slider'\n      })));\n\n      if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {\n        this.appendOpacityValue(select('.e-input-container', this.container));\n      }\n    } else {\n      addClass([this.container.parentElement], HIDEOPACITY);\n      this.opacitySlider.destroy();\n      remove(this.opacitySlider.element);\n      this.opacitySlider = null;\n\n      if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {\n        remove(select('.' + OPACITY, this.container).parentElement);\n      }\n    }\n  };\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param  {ColorPickerModel} newProp - Specifies new properties\n   * @param  {ColorPickerModel} oldProp - Specifies old properties\n   * @returns {void}\n   * @private\n   */\n\n\n  ColorPicker.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var _this = this;\n\n    if (!isNullOrUndefined(newProp.value)) {\n      var value = this.roundValue(newProp.value);\n\n      if (value.length === 9) {\n        this.element.value = this.roundValue(value).slice(0, 7);\n        var preview = this.splitBtn && select('.' + SPLITPREVIEW, this.splitBtn.element);\n\n        if (preview) {\n          preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(newProp.value));\n        }\n      } else {\n        this.value = oldProp.value;\n      }\n    }\n\n    if (!this.inline && isNullOrUndefined(newProp.inline)) {\n      var otherCompModel = ['disabled', 'enableRtl'];\n      this.splitBtn.setProperties(getModel(newProp, otherCompModel));\n\n      if (!this.isPopupOpen()) {\n        this.changeCssClassProps(newProp.cssClass, oldProp.cssClass);\n        this.changeRtlProps(newProp.enableRtl);\n        return;\n      }\n    }\n\n    var _loop_1 = function (prop) {\n      switch (prop) {\n        case 'inline':\n          if (newProp.inline) {\n            this_1.getWrapper().appendChild(this_1.container);\n            this_1.splitBtn.destroy();\n            detach(this_1.element.nextElementSibling);\n\n            if (!this_1.container.children.length) {\n              this_1.createWidget();\n            }\n          } else {\n            this_1.destroyOtherComp();\n            this_1.unWireEvents();\n            this_1.container.innerHTML = '';\n            this_1.createSplitBtn();\n          }\n\n          break;\n\n        case 'cssClass':\n          {\n            this_1.changeCssClassProps(newProp.cssClass, oldProp.cssClass);\n            var props = newProp.cssClass.split(' ').concat(oldProp.cssClass.split(' '));\n            props = props.reduce(function (a, b) {\n              if (a.indexOf(b) < 0) {\n                a.push(b);\n              }\n\n              return a;\n            }, []);\n            var count_1 = 0;\n            props.forEach(function (cls) {\n              if (count_1 === 0 && (cls === HIDEVALUE || cls === HIDEVALUESWITCH || cls === SHOWVALUE || cls === HIDEHEX || cls === HIDERGBA)) {\n                var inputWrap = select('.' + INPUTWRAPPER, _this.container);\n\n                if (inputWrap) {\n                  remove(select('.' + INPUTWRAPPER, _this.container));\n                }\n\n                _this.createInput();\n\n                count_1++;\n              }\n            });\n            break;\n          }\n\n        case 'enableRtl':\n          if (this_1.isPicker()) {\n            this_1.hueSlider.enableRtl = newProp.enableRtl;\n\n            if (this_1.enableOpacity) {\n              this_1.opacitySlider.enableRtl = newProp.enableRtl;\n            }\n\n            this_1.setInputEleProps();\n          }\n\n          this_1.changeRtlProps(newProp.enableRtl);\n          break;\n\n        case 'disabled':\n          this_1.changeDisabledProp(newProp.disabled);\n          break;\n\n        case 'value':\n          if (this_1.value !== oldProp.value) {\n            this_1.changeValueProp(newProp.value);\n          }\n\n          break;\n\n        case 'showButtons':\n          this_1.changeShowBtnProps(newProp.showButtons);\n          break;\n\n        case 'mode':\n          if (newProp.mode === 'Picker') {\n            this_1.switchToPicker();\n          } else {\n            this_1.switchToPalette();\n          }\n\n          break;\n\n        case 'modeSwitcher':\n          this_1.changeModeSwitcherProp(newProp.modeSwitcher);\n          break;\n\n        case 'columns':\n        case 'presetColors':\n          if (!this_1.isPicker()) {\n            this_1.changePaletteProps();\n          }\n\n          break;\n\n        case 'noColor':\n          if (newProp.noColor) {\n            if (this_1.mode === 'Palette' && !this_1.modeSwitcher) {\n              this_1.setNoColor();\n            }\n          } else {\n            this_1.changePaletteProps();\n          }\n\n          break;\n\n        case 'enableOpacity':\n          this_1.changeOpacityProps(newProp.enableOpacity);\n          break;\n      }\n    };\n\n    var this_1 = this;\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      _loop_1(prop);\n    }\n  };\n  /**\n   * Sets the focus to Colorpicker\n   * its native method\n   *\n   * @public\n   * @returns {void}\n   */\n\n\n  ColorPicker.prototype.focusIn = function () {\n    this.element.parentElement.focus();\n  };\n\n  __decorate([Property('#008000ff')], ColorPicker.prototype, \"value\", void 0);\n\n  __decorate([Property('')], ColorPicker.prototype, \"cssClass\", void 0);\n\n  __decorate([Property(false)], ColorPicker.prototype, \"disabled\", void 0);\n\n  __decorate([Property('Picker')], ColorPicker.prototype, \"mode\", void 0);\n\n  __decorate([Property(true)], ColorPicker.prototype, \"modeSwitcher\", void 0);\n\n  __decorate([Property(null)], ColorPicker.prototype, \"presetColors\", void 0);\n\n  __decorate([Property(true)], ColorPicker.prototype, \"showButtons\", void 0);\n\n  __decorate([Property(10)], ColorPicker.prototype, \"columns\", void 0);\n\n  __decorate([Property(false)], ColorPicker.prototype, \"inline\", void 0);\n\n  __decorate([Property(false)], ColorPicker.prototype, \"noColor\", void 0);\n\n  __decorate([Property(false)], ColorPicker.prototype, \"enablePersistence\", void 0);\n\n  __decorate([Property(true)], ColorPicker.prototype, \"enableOpacity\", void 0);\n\n  __decorate([Property(false)], ColorPicker.prototype, \"createPopupOnClick\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"select\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"change\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"beforeTileRender\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"beforeOpen\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"open\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"beforeClose\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"beforeModeSwitch\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"onModeSwitch\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"created\", void 0);\n\n  ColorPicker = __decorate([NotifyPropertyChanges], ColorPicker);\n  return ColorPicker;\n}(Component);\n\nexport { ColorPicker };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Component","Event","NotifyPropertyChanges","Property","Browser","closest","detach","EventHandler","getInstance","select","selectAll","formatUnit","addClass","attributes","classList","isNullOrUndefined","L10n","remove","removeClass","rippleEffect","SplitButton","getModel","Deferred","Tooltip","getZindexPartial","Popup","Input","NumericTextBox","Slider","APPLY","CANCEL","CURRENT","CONTAINER","CTRLBTN","CTRLSWITCH","DISABLED","FORMATSWITCH","HANDLER","HEX","HIDEHEX","HIDEOPACITY","HIDERGBA","HIDEVALUE","HIDEVALUESWITCH","HSVAREA","HSVCONTAINER","INPUTWRAPPER","MODESWITCH","NOCOLOR","OPACITY","PALETTES","PALETTECONTENT","PICKERCONTENT","PREVIEW","PREVIOUS","RTL","SHOWVALUE","SELECT","SPLITPREVIEW","TILE","presets","default","ColorPicker","_super","options","element","call","preRender","ele","formElement","add","formResetHandler","localeText","Apply","Cancel","ModeSwitcher","l10n","locale","getAttribute","setAttribute","id","render","initWrapper","inline","createWidget","createSplitBtn","enableOpacity","container","parentElement","renderComplete","wrapper","createElement","className","getModuleName","parentNode","insertBefore","appendChild","getWrapper","value","roundValue","toLowerCase","noColor","mode","slicedValue","slice","initialInputValue","setProperties","enableRtl","cssClass","split","tileRipple","selector","ctrlBtnRipple","createPalette","firstPaletteFocus","createPicker","getDragHandler","focus","isRgb","createInput","createCtrlBtn","disabled","wireEvents","toggleDisabled","isDevice","refreshPopupPos","_this","splitButton","splitBtn","iconCss","createPopupOnClick","open","onOpen","bind","click","trigger","currentValue","hex","rgba","convertToRgbString","hexToRgb","previousValue","appendTo","preview","style","backgroundColor","popupEle","getPopupEle","popupInst","getPopupInst","relateTo","document","body","position","X","Y","targetType","collision","offsetY","zIndex","toString","bindCallBackEvent","beforeOpen","args","callBackPromise","observeOpenArgs","cancel","top","pageYOffset","left","pageXOffset","display","modal","Number","resolve","beforeClose","event","beforeCloseArgs","observedCloseArgs","onPopupClose","unWireEvents","destroyOtherComp","width","innerHTML","outerHTML","presetColors","paletteGroup","appendElement","keys","appendPalette","len","modeSwitcher","setNoColor","parseInt","getComputedStyle","borderBottomWidth","children","offsetWidth","rgb","hsv","rgbToHsv","apply","colors","refEle","palette","attrs","row","tile","roundedColor","columns","presetName","addTileSelection","noColorEle","querySelector","forEach","attr","removeAttribute","insertPos","hsvContainer","dragHandler","setHsvContainerBg","setHandlerPosition","createSlider","createDragTooltip","h","getHsvContainer","hsvToRgb","hsvArea","Math","abs","offsetHeight","sliderPreviewWrapper","createPreview","sliderWrapper","slider","hueSlider","min","max","enabled","change","hueChange","createOpacitySlider","opacitySlider","opacityChange","opacityBgTrack","updateOpacitySliderBg","direction","opacityEle","background","convertToOtherFormat","pValue","rgbToHex","cValue","updateOpacityInput","updatePreview","triggerEvent","contains","opacityTextBoxInst","dataBind","parentEle","previewContainer","colorValue","isPicker","createNumericInput","label","numericInput","placeholder","format","showSpinButton","floatLabelType","readonly","inputHandler","inputWrap","appendValueSwitchBtn","hexInput","properties","setValue","addEventListener","clsName","appendOpacityValue","targetEle","valueSwitchBtn","formatSwitchHandler","showButtons","setLocale","btnWrapper","controlBtnWrapper","getConstant","appendModeSwitchBtn","title","tooltip","opensOn","showTipPointer","tooltipEle","animation","effect","close","getTooltipInst","setTooltipOffset","enable","join","convertToHsvString","updateHsv","isKey","updateInput","substr","updateValue","removeTileSelection","selectedEle","convertRgbToNumberArray","indexOf","map","n","parseFloat","getValue","type","toggle","closePopup","getPersistData","addOnPersist","pickerKeyDown","handlerDown","addCtrlSwitchEvent","previewHandler","paletteClickHandler","paletteKeyDown","ctrlSwitchBtn","btnClickHandler","e","keyCode","handlerDragPosition","preventDefault","enterKeyHandler","triggerChangeEvent","observedcloseArgs","prob","ctrlKey","clientX","pageX","clientY","pageY","changedTouches","setHsv","transition","handlerMove","handlerEnd","x","y","refresh","transform","cursor","getBoundingClientRect","right","round","offsetTop","offsetLeft","stopPropagation","switchToPalette","ctrlBtnClick","refreshPosition","idx","inst","toUpperCase","noColorTile","switchToPicker","grpEle","tiles","prevSelectedEle","filter","pop","altKey","tilePosition","keySelectionChanges","childElementCount","newEle","items","cIdx","emptyCount","textContent","inputValueChange","destroy","isPopupOpen","nextElementSibling","tooltipInst","tempValue","len_1","charAt","trim","opacity","toFixed","bigInt","push","g","v","s","floor","f","q","t","changeModeSwitcherProp","prop","ctrlSwitchWrapper","changeShowBtnProps","ctrlBtnWrapper","changeValueProp","newProp","setInputEleProps","changeDisabledProp","changeCssClassProps","oldProp","popupWrapper","changeRtlProps","changePaletteProps","changeOpacityProps","onPropertyChanged","otherCompModel","_loop_1","this_1","props","concat","reduce","a","count_1","cls","_i","_a","focusIn"],"sources":["C:/Users/leezh/Documents/Coding/Orbital Test/Orbital-Duty-Planner/node_modules/@syncfusion/ej2-inputs/src/color-picker/color-picker.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable prefer-spread */\nimport { Component, Event, NotifyPropertyChanges, Property } from '@syncfusion/ej2-base';\nimport { Browser, closest, detach, EventHandler, getInstance, select, selectAll, formatUnit } from '@syncfusion/ej2-base';\nimport { addClass, attributes, classList, isNullOrUndefined, L10n } from '@syncfusion/ej2-base';\nimport { remove, removeClass, rippleEffect } from '@syncfusion/ej2-base';\nimport { SplitButton, getModel } from '@syncfusion/ej2-splitbuttons';\nimport { Deferred } from '@syncfusion/ej2-splitbuttons';\nimport { Tooltip, getZindexPartial, Popup } from '@syncfusion/ej2-popups';\nimport { Input } from './../input/index';\nimport { NumericTextBox } from './../numerictextbox/index';\nimport { Slider } from './../slider/slider';\nvar APPLY = 'e-apply';\nvar CANCEL = 'e-cancel';\nvar CURRENT = 'e-current';\nvar CONTAINER = 'e-container';\nvar CTRLBTN = 'e-ctrl-btn';\nvar CTRLSWITCH = 'e-switch-ctrl-btn';\nvar DISABLED = 'e-disabled';\nvar FORMATSWITCH = 'e-value-switch-btn';\nvar HANDLER = 'e-handler';\nvar HEX = 'e-hex';\nvar HIDEHEX = 'e-hide-hex-value';\nvar HIDEOPACITY = 'e-hide-opacity';\nvar HIDERGBA = 'e-hide-switchable-value';\nvar HIDEVALUE = 'e-hide-value';\nvar HIDEVALUESWITCH = 'e-hide-valueswitcher';\nvar HSVAREA = 'e-hsv-color';\nvar HSVCONTAINER = 'e-hsv-container';\nvar INPUTWRAPPER = 'e-selected-value';\nvar MODESWITCH = 'e-mode-switch-btn';\nvar NOCOLOR = 'e-nocolor-item';\nvar OPACITY = 'e-opacity-value';\nvar PALETTES = 'e-palette';\nvar PALETTECONTENT = 'e-color-palette';\nvar PICKERCONTENT = 'e-color-picker';\nvar PREVIEW = 'e-preview-container';\nvar PREVIOUS = 'e-previous';\nvar RTL = 'e-rtl';\nvar SHOWVALUE = 'e-show-value';\nvar SELECT = 'e-selected';\nvar SPLITPREVIEW = 'e-split-preview';\nvar TILE = 'e-tile';\nvar presets = {\n    default: ['#000000', '#f44336', '#e91e63', '#9c27b0', '#673ab7', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#ffeb3b',\n        '#ffffff', '#ffebee', '#fce4ec', '#f3e5f5', '#ede7f6', '#e3f2fd', '#e1f5fe', '#e0f7fa', '#e0f2f1', '#fffde7',\n        '#f2f2f2', '#ffcdd2', '#f8bbd0', '#e1bee7', '#d1c4e9', '#bbdefb', '#b3e5fc', '#b2ebf2', '#b2dfdb', '#fff9c4',\n        '#e6e6e6', '#ef9a9a', '#f48fb1', '#ce93d8', '#b39ddb', '#90caf9', '#81d4fa', '#80deea', '#80cbc4', '#fff59d',\n        '#cccccc', '#e57373', '#f06292', '#ba68c8', '#9575cd', '#64b5f6', '#4fc3f7', '#4dd0e1', '#4db6ac', '#fff176',\n        '#b3b3b3', '#ef5350', '#ec407a', '#ab47bc', '#7e57c2', '#42a5f5', '#29b6f6', '#26c6da', '#26a69a', '#ffee58',\n        '#999999', '#e53935', '#d81b60', '#8e24aa', '#5e35b1', '#1e88e5', '#039be5', '#00acc1', '#00897b', '#fdd835',\n        '#808080', '#d32f2f', '#c2185b', '#7b1fa2', '#512da8', '#1976d2', '#0288d1', '#0097a7', '#00796b', '#fbc02d',\n        '#666666', '#c62828', '#ad1457', '#6a1b9a', '#4527a0', '#1565c0', '#0277bd', '#00838f', '#00695c', '#f9a825',\n        '#4d4d4d', '#b71c1c', '#880e4f', '#4a148c', '#311b92', '#0d47a1', '#01579b', '#006064', '#004d40', '#f57f17']\n};\n/**\n * ColorPicker component is a user interface to select and adjust color values. It provides supports for various\n * color specification like Red Green Blue, Hue Saturation Value and Hex codes.\n * ```html\n * <input type=\"color\" id=\"color-picker\">\n * ```\n * ```typescript\n * <script>\n *   let colorPickerObj: ColorPicker = new ColorPicker(null , \"#color-picker\");\n * </script>\n * ```\n */\nvar ColorPicker = /** @class */ (function (_super) {\n    __extends(ColorPicker, _super);\n    function ColorPicker(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    ColorPicker.prototype.preRender = function () {\n        var ele = this.element;\n        this.formElement = closest(this.element, 'form');\n        if (this.formElement) {\n            EventHandler.add(this.formElement, 'reset', this.formResetHandler, this);\n        }\n        var localeText = { Apply: 'Apply', Cancel: 'Cancel', ModeSwitcher: 'Switch Mode' };\n        this.l10n = new L10n('colorpicker', localeText, this.locale);\n        if (ele.getAttribute('ejs-for') && !ele.getAttribute('name')) {\n            ele.setAttribute('name', ele.id);\n        }\n    };\n    /**\n     * To Initialize the component rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    ColorPicker.prototype.render = function () {\n        this.initWrapper();\n        if (this.inline) {\n            this.createWidget();\n        }\n        else {\n            this.createSplitBtn();\n        }\n        if (!this.enableOpacity) {\n            addClass([this.container.parentElement], HIDEOPACITY);\n        }\n        this.renderComplete();\n    };\n    ColorPicker.prototype.initWrapper = function () {\n        var wrapper = this.createElement('div', { className: 'e-' + this.getModuleName() + '-wrapper' });\n        this.element.parentNode.insertBefore(wrapper, this.element);\n        wrapper.appendChild(this.element);\n        attributes(this.element, { 'tabindex': '-1', 'spellcheck': 'false' });\n        this.container = this.createElement('div', { className: CONTAINER });\n        this.getWrapper().appendChild(this.container);\n        var value = this.value ? this.roundValue(this.value).toLowerCase() : '#008000ff';\n        if (this.noColor && this.mode === 'Palette' && this.value === '') {\n            value = '';\n        }\n        var slicedValue = value.slice(0, 7);\n        if (isNullOrUndefined(this.initialInputValue)) {\n            this.initialInputValue = slicedValue;\n        }\n        this.element.value = slicedValue;\n        if (this.enableOpacity) {\n            this.setProperties({ 'value': value }, true);\n        }\n        else {\n            this.setProperties({ 'value': slicedValue }, true);\n        }\n        if (this.enableRtl) {\n            wrapper.classList.add(RTL);\n        }\n        if (this.cssClass) {\n            addClass([wrapper], this.cssClass.split(' '));\n        }\n        this.tileRipple = rippleEffect(this.container, { selector: '.' + TILE });\n        this.ctrlBtnRipple = rippleEffect(this.container, { selector: '.e-btn' });\n    };\n    ColorPicker.prototype.getWrapper = function () {\n        return this.element.parentElement;\n    };\n    ColorPicker.prototype.createWidget = function () {\n        if (this.mode === 'Palette') {\n            this.createPalette();\n            if (!this.inline) {\n                this.firstPaletteFocus();\n            }\n        }\n        else {\n            this.createPicker();\n            if (!this.inline) {\n                this.getDragHandler().focus();\n            }\n        }\n        this.isRgb = true;\n        this.createInput();\n        this.createCtrlBtn();\n        if (!this.disabled) {\n            this.wireEvents();\n        }\n        if (this.inline && this.disabled) {\n            this.toggleDisabled(true);\n        }\n        if (Browser.isDevice) {\n            this.refreshPopupPos();\n        }\n    };\n    ColorPicker.prototype.createSplitBtn = function () {\n        var _this = this;\n        var splitButton = this.createElement('button', { className: 'e-split-colorpicker' });\n        this.getWrapper().appendChild(splitButton);\n        this.splitBtn = new SplitButton({\n            iconCss: 'e-selected-color',\n            target: this.container,\n            disabled: this.disabled,\n            enableRtl: this.enableRtl,\n            createPopupOnClick: this.createPopupOnClick,\n            open: this.onOpen.bind(this),\n            click: function () {\n                _this.trigger('change', {\n                    currentValue: { hex: _this.value.slice(0, 7), rgba: _this.convertToRgbString(_this.hexToRgb(_this.value)) },\n                    previousValue: { hex: null, rgba: null }, value: _this.value\n                });\n            }\n        });\n        this.splitBtn.createElement = this.createElement;\n        this.splitBtn.appendTo(splitButton);\n        var preview = this.createElement('span', { className: SPLITPREVIEW });\n        select('.e-selected-color', splitButton).appendChild(preview);\n        preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));\n        var popupEle = this.getPopupEle();\n        addClass([popupEle], 'e-colorpicker-popup');\n        if (this.cssClass) {\n            addClass([popupEle], this.cssClass.split(' '));\n        }\n        if (Browser.isDevice) {\n            var popupInst = this.getPopupInst();\n            popupInst.relateTo = document.body;\n            popupInst.position = { X: 'center', Y: 'center' };\n            popupInst.targetType = 'container';\n            popupInst.collision = { X: 'fit', Y: 'fit' };\n            popupInst.offsetY = 4;\n            popupEle.style.zIndex = getZindexPartial(this.splitBtn.element).toString();\n        }\n        this.bindCallBackEvent();\n    };\n    ColorPicker.prototype.onOpen = function () {\n        this.trigger('open', { element: this.container });\n    };\n    ColorPicker.prototype.getPopupInst = function () {\n        return getInstance(this.getPopupEle(), Popup);\n    };\n    ColorPicker.prototype.bindCallBackEvent = function () {\n        var _this = this;\n        this.splitBtn.beforeOpen = function (args) {\n            var callBackPromise = new Deferred();\n            _this.trigger('beforeOpen', args, function (observeOpenArgs) {\n                if (!observeOpenArgs.cancel) {\n                    var popupEle = _this.getPopupEle();\n                    popupEle.style.top = formatUnit(0 + pageYOffset);\n                    popupEle.style.left = formatUnit(0 + pageXOffset);\n                    popupEle.style.display = 'block';\n                    _this.createWidget();\n                    popupEle.style.display = '';\n                    if (Browser.isDevice) {\n                        _this.modal = _this.createElement('div');\n                        _this.modal.className = 'e-' + _this.getModuleName() + ' e-modal';\n                        _this.modal.style.display = 'none';\n                        document.body.insertBefore(_this.modal, popupEle);\n                        document.body.className += ' e-colorpicker-overflow';\n                        _this.modal.style.display = 'block';\n                        _this.modal.style.zIndex = (Number(popupEle.style.zIndex) - 1).toString();\n                    }\n                }\n                args.cancel = observeOpenArgs.cancel;\n                callBackPromise.resolve(observeOpenArgs);\n            });\n            return callBackPromise;\n        };\n        this.splitBtn.beforeClose = function (args) {\n            var callBackPromise = new Deferred();\n            if (!isNullOrUndefined(args.event)) {\n                var beforeCloseArgs = { element: _this.container, event: args.event, cancel: false };\n                _this.trigger('beforeClose', beforeCloseArgs, function (observedCloseArgs) {\n                    if (Browser.isDevice && args.event.target === _this.modal) {\n                        observedCloseArgs.cancel = true;\n                    }\n                    if (!observedCloseArgs.cancel) {\n                        _this.onPopupClose();\n                    }\n                    args.cancel = observedCloseArgs.cancel;\n                    callBackPromise.resolve(observedCloseArgs);\n                });\n            }\n            else {\n                callBackPromise.resolve(args);\n            }\n            return callBackPromise;\n        };\n    };\n    ColorPicker.prototype.onPopupClose = function () {\n        this.unWireEvents();\n        this.destroyOtherComp();\n        this.container.style.width = '';\n        select('.' + SPLITPREVIEW, this.splitBtn.element).style.backgroundColor\n            = this.convertToRgbString(this.hexToRgb(this.value));\n        this.container.innerHTML = '';\n        removeClass([this.container], [PICKERCONTENT, PALETTECONTENT]);\n        if (Browser.isDevice && this.modal) {\n            removeClass([document.body], 'e-colorpicker-overflow');\n            this.modal.style.display = 'none';\n            this.modal.outerHTML = '';\n            this.modal = null;\n        }\n    };\n    ColorPicker.prototype.createPalette = function () {\n        classList(this.container, [PALETTECONTENT], [PICKERCONTENT]);\n        if (this.presetColors) {\n            var paletteGroup = this.createElement('div', { className: 'e-custom-palette' });\n            this.appendElement(paletteGroup);\n            var keys = Object.keys(this.presetColors);\n            if (keys.length === 1) {\n                this.appendPalette(this.presetColors[keys[0]], keys[0], paletteGroup);\n            }\n            else {\n                for (var i = 0, len = keys.length; i < len; i++) {\n                    this.appendPalette(this.presetColors[keys[i]], keys[i], paletteGroup);\n                }\n            }\n            if (selectAll('.e-row', paletteGroup).length > 10) {\n                addClass([paletteGroup], 'e-palette-group');\n            }\n        }\n        else {\n            this.appendPalette(presets.default, 'default');\n        }\n        if (this.mode === 'Palette' && !this.modeSwitcher && this.noColor) {\n            this.setNoColor();\n        }\n        var width = parseInt(getComputedStyle(this.container).borderBottomWidth, 10);\n        this.container.style.width = formatUnit(this.container.children[0].offsetWidth + width + width);\n        this.rgb = this.hexToRgb(this.roundValue(this.value));\n        this.hsv = this.rgbToHsv.apply(this, this.rgb);\n    };\n    ColorPicker.prototype.firstPaletteFocus = function () {\n        if (!select('.' + SELECT, this.container.children[0])) {\n            selectAll('.' + PALETTES, this.container)[0].focus();\n        }\n    };\n    ColorPicker.prototype.appendPalette = function (colors, key, refEle) {\n        var palette = this.createElement('div', { className: PALETTES, attrs: { 'tabindex': '0' } });\n        if (refEle) {\n            refEle.appendChild(palette);\n        }\n        else {\n            this.appendElement(palette);\n        }\n        var row;\n        var tile;\n        var roundedColor;\n        for (var i = 0, len = colors.length; i < len; i++) {\n            if (i === 0 || i % this.columns === 0) {\n                row = this.createElement('div', {\n                    className: 'e-row', attrs: { 'role': 'presentation' }\n                });\n                palette.appendChild(row);\n            }\n            roundedColor = this.roundValue(colors[i]).toLowerCase();\n            tile = this.createElement('span', {\n                className: TILE, attrs: { 'role': 'gridcell', 'aria-label': roundedColor, 'aria-selected': 'false', 'tabindex': '0' }\n            });\n            this.trigger('beforeTileRender', { element: tile, presetName: key, value: colors[i] });\n            row.appendChild(tile);\n            if (this.value === roundedColor) {\n                this.addTileSelection(tile);\n                palette.focus();\n            }\n            tile.style.backgroundColor = this.convertToRgbString(this.hexToRgb(roundedColor));\n        }\n    };\n    ColorPicker.prototype.setNoColor = function () {\n        var noColorEle = this.container.querySelector('.e-row').children[0];\n        noColorEle.classList.add(NOCOLOR);\n        if (!this.value) {\n            noColorEle.classList.add(SELECT);\n            closest(noColorEle, '.' + PALETTES).focus();\n        }\n        ['aria-selected', 'aria-label'].forEach(function (attr) { noColorEle.removeAttribute(attr); });\n        noColorEle.style.backgroundColor = '';\n    };\n    ColorPicker.prototype.appendElement = function (ele, insertPos) {\n        if (insertPos === void 0) { insertPos = 0; }\n        var refEle = this.container.children[insertPos];\n        if (refEle) {\n            this.container.insertBefore(ele, refEle);\n        }\n        else {\n            this.container.appendChild(ele);\n        }\n    };\n    ColorPicker.prototype.addTileSelection = function (ele) {\n        ele.classList.add(SELECT);\n        ele.setAttribute('aria-selected', 'true');\n    };\n    ColorPicker.prototype.createPicker = function () {\n        classList(this.container, [PICKERCONTENT], [PALETTECONTENT]);\n        var hsvContainer = this.createElement('div', { className: HSVCONTAINER });\n        this.appendElement(hsvContainer);\n        hsvContainer.appendChild(this.createElement('div', { className: HSVAREA }));\n        var dragHandler = this.createElement('span', { className: HANDLER, attrs: { 'tabindex': '0' } });\n        hsvContainer.appendChild(dragHandler);\n        if (this.value === null) {\n            this.value = '#008000ff';\n        }\n        this.rgb = this.hexToRgb(this.value);\n        this.hsv = this.rgbToHsv.apply(this, this.rgb);\n        this.setHsvContainerBg();\n        this.setHandlerPosition();\n        this.createSlider();\n        this.createDragTooltip();\n    };\n    ColorPicker.prototype.setHsvContainerBg = function (h) {\n        if (h === void 0) { h = this.hsv[0]; }\n        this.getHsvContainer().style.backgroundColor = this.convertToRgbString(this.hsvToRgb(h, 100, 100, 1));\n    };\n    ColorPicker.prototype.getHsvContainer = function () {\n        return select('.' + HSVCONTAINER, this.container);\n    };\n    ColorPicker.prototype.setHandlerPosition = function () {\n        var dragHandler = this.getDragHandler();\n        var hsvArea = select('.' + HSVAREA, this.container);\n        if (this.enableRtl) {\n            dragHandler.style.left = formatUnit(hsvArea.offsetWidth * Math.abs(100 - this.hsv[1]) / 100);\n        }\n        else {\n            dragHandler.style.left = formatUnit(hsvArea.offsetWidth * this.hsv[1] / 100);\n        }\n        dragHandler.style.top = formatUnit(hsvArea.offsetHeight * (100 - this.hsv[2]) / 100);\n    };\n    ColorPicker.prototype.createSlider = function () {\n        var sliderPreviewWrapper = this.createElement('div', { className: 'e-slider-preview' });\n        this.appendElement(sliderPreviewWrapper, 1);\n        this.createPreview(sliderPreviewWrapper);\n        var sliderWrapper = this.createElement('div', { className: 'e-colorpicker-slider' });\n        sliderPreviewWrapper.insertBefore(sliderWrapper, sliderPreviewWrapper.children[0]);\n        var slider = this.createElement('div', { className: 'e-hue-slider' });\n        sliderWrapper.appendChild(slider);\n        this.hueSlider = new Slider({\n            value: this.hsv[0],\n            min: 0,\n            max: 359,\n            enableRtl: this.enableRtl,\n            enabled: !this.disabled,\n            change: this.hueChange.bind(this)\n        });\n        this.hueSlider.createElement = this.createElement;\n        this.hueSlider.appendTo(slider);\n        if (this.enableOpacity) {\n            slider = this.createElement('div', { className: 'e-opacity-slider' });\n            sliderWrapper.appendChild(slider);\n            this.createOpacitySlider(slider);\n        }\n    };\n    ColorPicker.prototype.createOpacitySlider = function (slider) {\n        this.opacitySlider = new Slider({\n            value: this.rgb[3] * 100,\n            min: 0,\n            max: 100,\n            enableRtl: this.enableRtl,\n            enabled: !this.disabled,\n            change: this.opacityChange.bind(this)\n        });\n        this.opacitySlider.createElement = this.createElement;\n        this.opacitySlider.appendTo(slider);\n        var opacityBgTrack = this.createElement('div', { className: 'e-opacity-empty-track' });\n        slider.appendChild(opacityBgTrack);\n        this.updateOpacitySliderBg();\n    };\n    ColorPicker.prototype.updateOpacitySliderBg = function () {\n        var direction = this.enableRtl ? 'to left' : 'to right';\n        var opacityEle = select('.e-opacity-empty-track', this.opacitySlider.element);\n        if (opacityEle) {\n            opacityEle.style.background =\n                'linear-gradient(' + direction + ', rgba(' + this.rgb.slice(0, 3) + ', 0) 0%, ' +\n                    this.convertToRgbString(this.rgb.slice(0, 3)) + ' 100%)';\n        }\n    };\n    ColorPicker.prototype.hueChange = function (args) {\n        this.hsv[0] = args.value;\n        this.setHsvContainerBg();\n        this.convertToOtherFormat();\n    };\n    ColorPicker.prototype.opacityChange = function (args) {\n        var value = args.value;\n        var pValue = this.rgbToHex(this.rgb);\n        this.hsv[3] = value / 100;\n        this.rgb[3] = value / 100;\n        var cValue = this.rgbToHex(this.rgb);\n        this.updateOpacityInput(value);\n        var rgb = this.convertToRgbString(this.rgb);\n        this.updatePreview(rgb);\n        this.triggerEvent(cValue, pValue, rgb);\n    };\n    ColorPicker.prototype.updateOpacityInput = function (value) {\n        if (this.enableOpacity && !this.getWrapper().classList.contains(HIDEVALUE)) {\n            var opacityTextBoxInst = getInstance(select('.' + OPACITY, this.container), NumericTextBox);\n            opacityTextBoxInst.value = value;\n            opacityTextBoxInst.dataBind();\n        }\n    };\n    ColorPicker.prototype.createPreview = function (parentEle) {\n        var previewContainer = this.createElement('div', { className: PREVIEW });\n        parentEle.appendChild(previewContainer);\n        var preview = this.createElement('span', { className: 'e-preview ' + CURRENT });\n        previewContainer.appendChild(preview);\n        var colorValue = this.convertToRgbString(this.rgb);\n        preview.style.backgroundColor = colorValue;\n        preview = this.createElement('span', { className: 'e-preview ' + PREVIOUS });\n        previewContainer.appendChild(preview);\n        preview.style.backgroundColor = colorValue;\n    };\n    ColorPicker.prototype.isPicker = function () {\n        return !this.container.classList.contains(PALETTECONTENT);\n    };\n    ColorPicker.prototype.getPopupEle = function () {\n        return this.container.parentElement;\n    };\n    ColorPicker.prototype.createNumericInput = function (element, value, label, max) {\n        var _this = this;\n        var numericInput = new NumericTextBox({\n            value: value,\n            placeholder: label,\n            min: 0,\n            max: max,\n            format: '###.##',\n            showSpinButton: false,\n            floatLabelType: 'Always',\n            enableRtl: this.enableRtl,\n            enabled: !this.disabled,\n            readonly: this.isPicker() ? false : true,\n            change: function (args) {\n                if (args.event) {\n                    _this.inputHandler(args.event);\n                }\n            }\n        });\n        numericInput.createElement = this.createElement;\n        numericInput.appendTo(element);\n    };\n    ColorPicker.prototype.createInput = function () {\n        var isPicker = this.isPicker();\n        var wrapper = this.getWrapper();\n        if ((isPicker && !wrapper.classList.contains(HIDEVALUE)) || (!isPicker && wrapper.classList.contains(SHOWVALUE))) {\n            var inputWrap = this.createElement('div', { className: INPUTWRAPPER });\n            if (isPicker) {\n                this.appendElement(inputWrap, 2);\n            }\n            else {\n                this.appendElement(inputWrap, 1);\n            }\n            var container = this.createElement('div', { className: 'e-input-container' });\n            inputWrap.appendChild(container);\n            if (!wrapper.classList.contains(HIDEVALUESWITCH)) {\n                this.appendValueSwitchBtn(inputWrap);\n            }\n            if (!wrapper.classList.contains(HIDEHEX)) {\n                var hexInput = this.createElement('input', {\n                    className: HEX,\n                    attrs: { 'maxlength': '7', 'spellcheck': 'false' }\n                });\n                container.appendChild(hexInput);\n                Input.createInput({\n                    element: hexInput,\n                    floatLabelType: 'Always',\n                    properties: {\n                        placeholder: 'HEX',\n                        enableRtl: this.enableRtl,\n                        enabled: !this.disabled,\n                        readonly: this.isPicker() ? false : true\n                    }\n                }, this.createElement);\n                Input.setValue(this.value.slice(0, 7), hexInput);\n                hexInput.addEventListener('input', this.inputHandler.bind(this));\n            }\n            if (!wrapper.classList.contains(HIDERGBA)) {\n                var label = void 0;\n                var value = void 0;\n                if (this.isRgb) {\n                    label = 'RGB';\n                    value = this.rgb;\n                }\n                else {\n                    label = 'HSV';\n                    value = this.hsv;\n                }\n                var clsName = ['rh', 'gs', 'bv'];\n                for (var i = 0; i < 3; i++) {\n                    this.createNumericInput(container.appendChild(this.createElement('input', { className: 'e-' + clsName[i] + '-value' })), value[i], label[i], 255);\n                }\n                if (this.enableOpacity) {\n                    this.appendOpacityValue(container);\n                }\n            }\n        }\n    };\n    ColorPicker.prototype.appendOpacityValue = function (container) {\n        this.createNumericInput(container.appendChild(this.createElement('input', { className: OPACITY })), this.rgb[3] * 100, 'A', 100);\n    };\n    ColorPicker.prototype.appendValueSwitchBtn = function (targetEle) {\n        var valueSwitchBtn = this.createElement('button', {\n            className: 'e-icons e-css e-btn e-flat e-icon-btn ' + FORMATSWITCH\n        });\n        targetEle.appendChild(valueSwitchBtn);\n        if (this.isPicker() && !this.getWrapper().classList.contains(HIDERGBA)) {\n            valueSwitchBtn.addEventListener('click', this.formatSwitchHandler.bind(this));\n        }\n    };\n    ColorPicker.prototype.createCtrlBtn = function () {\n        if (this.modeSwitcher || this.showButtons) {\n            this.l10n.setLocale(this.locale);\n            var btnWrapper = this.createElement('div', { className: CTRLSWITCH });\n            this.container.appendChild(btnWrapper);\n            if (this.showButtons) {\n                var controlBtnWrapper = this.createElement('div', { className: CTRLBTN });\n                btnWrapper.appendChild(controlBtnWrapper);\n                var apply = this.l10n.getConstant('Apply');\n                controlBtnWrapper.appendChild(this.createElement('button', {\n                    innerHTML: apply,\n                    className: 'e-btn e-css e-flat e-primary e-small ' + APPLY,\n                    attrs: { 'title': apply }\n                }));\n                var cancel = this.l10n.getConstant('Cancel');\n                controlBtnWrapper.appendChild(this.createElement('button', {\n                    innerHTML: cancel,\n                    className: 'e-btn e-css e-flat e-small ' + CANCEL,\n                    attrs: { 'title': cancel }\n                }));\n            }\n            if (this.modeSwitcher) {\n                this.appendModeSwitchBtn();\n            }\n        }\n    };\n    ColorPicker.prototype.appendModeSwitchBtn = function () {\n        var modeSwitcher = this.createElement('button', {\n            className: 'e-icons e-btn e-flat e-icon-btn ' + MODESWITCH, attrs: { title: this.l10n.getConstant('ModeSwitcher') }\n        });\n        select('.' + CTRLSWITCH, this.container).insertBefore(modeSwitcher, select('.' + CTRLBTN, this.container));\n    };\n    ColorPicker.prototype.createDragTooltip = function () {\n        var _this = this;\n        var tooltip = new Tooltip({\n            opensOn: 'Custom',\n            showTipPointer: false,\n            cssClass: 'e-color-picker-tooltip',\n            beforeOpen: function (args) {\n                _this.tooltipEle = args.element;\n            },\n            animation: { open: { effect: 'None' }, close: { effect: 'None' } }\n        });\n        tooltip.createElement = this.createElement;\n        tooltip.appendTo(this.container);\n        tooltip.open(this.container);\n        this.tooltipEle.style.zIndex = getZindexPartial(this.tooltipEle).toString();\n        select('.e-tip-content', this.tooltipEle).appendChild(this.createElement('div', { className: 'e-tip-transparent' }));\n    };\n    ColorPicker.prototype.getTooltipInst = function () {\n        return getInstance(this.container, Tooltip);\n    };\n    ColorPicker.prototype.setTooltipOffset = function (value) {\n        this.getTooltipInst().offsetY = value;\n    };\n    ColorPicker.prototype.toggleDisabled = function (enable) {\n        if (enable) {\n            this.getWrapper().classList.add(DISABLED);\n        }\n        else {\n            this.getWrapper().classList.remove(DISABLED);\n        }\n        if (this.showButtons) {\n            ([].slice.call(selectAll('.e-btn', this.container))).forEach(function (ele) {\n                if (enable) {\n                    attributes(ele, { 'disabled': '' });\n                }\n                else {\n                    ele.removeAttribute('disabled');\n                }\n            });\n        }\n    };\n    ColorPicker.prototype.convertToRgbString = function (rgb) {\n        return rgb.length ? rgb.length === 4 ? 'rgba(' + rgb.join() + ')' : 'rgb(' + rgb.join() + ')' : '';\n    };\n    ColorPicker.prototype.convertToHsvString = function (hsv) {\n        return hsv.length === 4 ? 'hsva(' + hsv.join() + ')' : 'hsv(' + hsv.join() + ')';\n    };\n    ColorPicker.prototype.updateHsv = function () {\n        this.hsv[1] = this.hsv[1] > 100 ? 100 : this.hsv[1];\n        this.hsv[2] = this.hsv[2] > 100 ? 100 : this.hsv[2];\n        this.setHandlerPosition();\n    };\n    ColorPicker.prototype.convertToOtherFormat = function (isKey) {\n        if (isKey === void 0) { isKey = false; }\n        var pValue = this.rgbToHex(this.rgb);\n        this.rgb = this.hsvToRgb.apply(this, this.hsv);\n        var cValue = this.rgbToHex(this.rgb);\n        var rgba = this.convertToRgbString(this.rgb);\n        this.updatePreview(rgba);\n        this.updateInput(cValue);\n        this.triggerEvent(cValue, pValue, rgba, isKey);\n    };\n    ColorPicker.prototype.updateInput = function (value) {\n        var wrapper = this.getWrapper();\n        if (!wrapper.classList.contains(HIDEVALUE)) {\n            if (!wrapper.classList.contains(HIDEHEX)) {\n                Input.setValue(value.substr(0, 7), select('.' + HEX, this.container));\n            }\n            if (!wrapper.classList.contains(HIDERGBA)) {\n                if (this.isRgb) {\n                    this.updateValue(this.rgb, false);\n                }\n                else {\n                    this.updateValue(this.hsv, false);\n                }\n            }\n        }\n    };\n    ColorPicker.prototype.updatePreview = function (value) {\n        if (this.enableOpacity) {\n            this.updateOpacitySliderBg();\n        }\n        select('.e-tip-transparent', this.tooltipEle).style.backgroundColor = value;\n        select('.' + PREVIEW + ' .' + CURRENT, this.container).style.backgroundColor = value;\n        select('.' + PREVIEW + ' .' + PREVIOUS, this.container).style.backgroundColor\n            = this.convertToRgbString(this.hexToRgb(this.value));\n    };\n    ColorPicker.prototype.getDragHandler = function () {\n        return select('.' + HANDLER, this.container);\n    };\n    ColorPicker.prototype.removeTileSelection = function () {\n        var selectedEle = [].slice.call(selectAll('.' + SELECT, this.container.children[0]));\n        selectedEle.forEach(function (ele) {\n            ele.classList.remove(SELECT);\n            ele.setAttribute('aria-selected', 'false');\n        });\n    };\n    ColorPicker.prototype.convertRgbToNumberArray = function (value) {\n        return (value.slice(value.indexOf('(') + 1, value.indexOf(')'))).split(',').map(function (n, i) {\n            return (i !== 3) ? parseInt(n, 10) : parseFloat(n);\n        });\n    };\n    /**\n     * To get color value in specified type.\n     *\n     * @param {string} value - Specify the color value.\n     * @param {string} type - Specify the type to which the specified color needs to be converted.\n     * @method getValue\n     * @returns {string} - Color value\n     */\n    ColorPicker.prototype.getValue = function (value, type) {\n        if (!value) {\n            value = this.value;\n        }\n        type = !type ? 'hex' : type.toLowerCase();\n        if (value[0] === 'r') {\n            var cValue = this.convertRgbToNumberArray(value);\n            if (type === 'hex' || type === 'hexa') {\n                var hex = this.rgbToHex(cValue);\n                return type === 'hex' ? hex.slice(0, 7) : hex;\n            }\n            else {\n                if (type === 'hsv') {\n                    return this.convertToHsvString(this.rgbToHsv.apply(this, cValue.slice(0, 3)));\n                }\n                else {\n                    if (type === 'hsva') {\n                        return this.convertToHsvString(this.rgbToHsv.apply(this, cValue));\n                    }\n                    else {\n                        return 'null';\n                    }\n                }\n            }\n        }\n        else {\n            if (value[0] === 'h') {\n                var cValue = this.hsvToRgb.apply(this, this.convertRgbToNumberArray(value));\n                if (type === 'rgba') {\n                    return this.convertToRgbString(cValue);\n                }\n                else {\n                    if (type === 'hex' || type === 'hexa') {\n                        var hex = this.rgbToHex(cValue);\n                        return type === 'hex' ? hex.slice(0, 7) : hex;\n                    }\n                    else {\n                        if (type === 'rgb') {\n                            return this.convertToRgbString(cValue.slice(0, 3));\n                        }\n                        else {\n                            return 'null';\n                        }\n                    }\n                }\n            }\n            else {\n                value = this.roundValue(value);\n                var rgb = this.hexToRgb(value);\n                if (type === 'rgb' || type === 'hsv') {\n                    rgb = rgb.slice(0, 3);\n                }\n                if (type === 'rgba' || type === 'rgb') {\n                    return this.convertToRgbString(rgb);\n                }\n                else {\n                    if (type === 'hsva' || type === 'hsv') {\n                        return this.convertToHsvString(this.rgbToHsv.apply(this, rgb));\n                    }\n                    else {\n                        if (type === 'hex') {\n                            return value.slice(0, 7);\n                        }\n                        else {\n                            if (type === 'a') {\n                                return rgb[3].toString();\n                            }\n                            else {\n                                return 'null';\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * To show/hide ColorPicker popup based on current state of the SplitButton.\n     *\n     * @method toggle\n     * @returns {void}\n     */\n    ColorPicker.prototype.toggle = function () {\n        if (this.container.parentElement.classList.contains('e-popup-close')) {\n            this.splitBtn.toggle();\n        }\n        else {\n            this.closePopup(null);\n        }\n    };\n    /**\n     * Get component name.\n     *\n     * @returns {string} - Module Name\n     * @private\n     */\n    ColorPicker.prototype.getModuleName = function () {\n        return 'colorpicker';\n    };\n    /**\n     * Gets the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Persist data\n     */\n    ColorPicker.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    ColorPicker.prototype.wireEvents = function () {\n        if (this.isPicker()) {\n            var dragHandler = this.getDragHandler();\n            EventHandler.add(dragHandler, 'keydown', this.pickerKeyDown, this);\n            EventHandler.add(this.getHsvContainer(), 'mousedown touchstart', this.handlerDown, this);\n            if (this.modeSwitcher || this.showButtons) {\n                this.addCtrlSwitchEvent();\n            }\n            EventHandler.add(select('.' + PREVIOUS, this.container), 'click', this.previewHandler, this);\n        }\n        else {\n            EventHandler.add(this.container, 'click', this.paletteClickHandler, this);\n            EventHandler.add(this.container, 'keydown', this.paletteKeyDown, this);\n        }\n    };\n    ColorPicker.prototype.formResetHandler = function () {\n        this.value = this.initialInputValue;\n        attributes(this.element, { 'value': this.initialInputValue });\n    };\n    ColorPicker.prototype.addCtrlSwitchEvent = function () {\n        var ctrlSwitchBtn = select('.' + CTRLSWITCH, this.container);\n        if (ctrlSwitchBtn) {\n            EventHandler.add(ctrlSwitchBtn, 'click', this.btnClickHandler, this);\n        }\n    };\n    ColorPicker.prototype.pickerKeyDown = function (e) {\n        switch (e.keyCode) {\n            case 39:\n                this.handlerDragPosition(1, this.enableRtl ? -1 : 1, e);\n                break;\n            case 37:\n                this.handlerDragPosition(1, this.enableRtl ? 1 : -1, e);\n                break;\n            case 38:\n                this.handlerDragPosition(2, 1, e);\n                break;\n            case 40:\n                this.handlerDragPosition(2, -1, e);\n                break;\n            case 13: {\n                e.preventDefault();\n                var cValue = this.rgbToHex(this.rgb);\n                this.enterKeyHandler(cValue, e);\n            }\n        }\n    };\n    ColorPicker.prototype.enterKeyHandler = function (value, e) {\n        this.triggerChangeEvent(value);\n        if (!this.inline) {\n            this.closePopup(e);\n            this.splitBtn.element.focus();\n        }\n    };\n    ColorPicker.prototype.closePopup = function (e) {\n        var _this = this;\n        var beforeCloseArgs = { element: this.container, event: e, cancel: false };\n        this.trigger('beforeClose', beforeCloseArgs, function (observedcloseArgs) {\n            if (!observedcloseArgs.cancel) {\n                _this.splitBtn.toggle();\n                _this.onPopupClose();\n            }\n        });\n    };\n    ColorPicker.prototype.triggerChangeEvent = function (value) {\n        var hex = value.slice(0, 7);\n        this.trigger('change', {\n            currentValue: { hex: hex, rgba: this.convertToRgbString(this.rgb) },\n            previousValue: { hex: this.value.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(this.value)) },\n            value: this.enableOpacity ? value : hex\n        });\n        if (this.enableOpacity) {\n            this.setProperties({ 'value': value }, true);\n        }\n        else {\n            this.setProperties({ 'value': hex }, true);\n        }\n        this.element.value = hex ? hex : '#000000';\n    };\n    ColorPicker.prototype.handlerDragPosition = function (prob, value, e) {\n        e.preventDefault();\n        this.hsv[prob] += value * (e.ctrlKey ? 1 : 3);\n        if (this.hsv[prob] < 0) {\n            this.hsv[prob] = 0;\n        }\n        this.updateHsv();\n        this.convertToOtherFormat(true);\n    };\n    ColorPicker.prototype.handlerDown = function (e) {\n        e.preventDefault();\n        if (e.type === 'mousedown') {\n            this.clientX = Math.abs(e.pageX - pageXOffset);\n            this.clientY = Math.abs(e.pageY - pageYOffset);\n            this.setTooltipOffset(8);\n        }\n        else {\n            this.clientX = Math.abs(e.changedTouches[0].pageX - pageXOffset);\n            this.clientY = Math.abs(e.changedTouches[0].pageY - pageYOffset);\n            this.setTooltipOffset(-8);\n        }\n        this.setHsv(this.clientX, this.clientY);\n        this.getDragHandler().style.transition = 'left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)';\n        this.updateHsv();\n        this.convertToOtherFormat();\n        this.getDragHandler().focus();\n        EventHandler.add(document, 'mousemove touchmove', this.handlerMove, this);\n        EventHandler.add(document, 'mouseup touchend', this.handlerEnd, this);\n    };\n    ColorPicker.prototype.handlerMove = function (e) {\n        if (e.type !== 'touchmove') {\n            e.preventDefault();\n        }\n        var x;\n        var y;\n        if (e.type === 'mousemove') {\n            x = Math.abs(e.pageX - pageXOffset);\n            y = Math.abs(e.pageY - pageYOffset);\n        }\n        else {\n            x = Math.abs(e.changedTouches[0].pageX - pageXOffset);\n            y = Math.abs(e.changedTouches[0].pageY - pageYOffset);\n        }\n        this.setHsv(x, y);\n        var dragHandler = this.getDragHandler();\n        this.updateHsv();\n        this.convertToOtherFormat();\n        this.getTooltipInst().refresh(dragHandler);\n        if (!this.tooltipEle.style.transform) {\n            if (Math.abs(this.clientX - x) > 8 || Math.abs(this.clientY - y) > 8) {\n                select('.' + HSVAREA, this.container).style.cursor = 'pointer';\n                dragHandler.style.transition = 'none';\n                if (!this.inline) {\n                    this.tooltipEle.style.zIndex = (parseInt(this.getPopupEle().style.zIndex, 10) + 1).toString();\n                }\n                this.tooltipEle.style.transform = 'rotate(45deg)';\n                dragHandler.classList.add('e-hide-handler');\n            }\n        }\n    };\n    ColorPicker.prototype.setHsv = function (clientX, clientY) {\n        var ele = select('.' + HSVAREA, this.container);\n        var position = ele.getBoundingClientRect();\n        if (this.enableRtl) {\n            clientX = clientX > position.right ? 0 : Math.abs(clientX - position.right);\n        }\n        else {\n            clientX = clientX > position.left ? Math.abs(clientX - position.left) : 0;\n        }\n        clientY = clientY > position.top ? Math.abs(clientY - position.top) : 0;\n        this.hsv[2] = Math.round(Number(100 * (ele.offsetHeight -\n            Math.max(0, Math.min(ele.offsetHeight, (clientY - ele.offsetTop)))) / ele.offsetHeight) * 10) / 10;\n        this.hsv[1] =\n            Math.round(Number(100 * (Math.max(0, Math.min(ele.offsetWidth, (clientX - ele.offsetLeft)))) / ele.offsetWidth) * 10) / 10;\n    };\n    ColorPicker.prototype.handlerEnd = function (e) {\n        if (e.type !== 'touchend') {\n            e.preventDefault();\n        }\n        EventHandler.remove(document, 'mousemove touchmove', this.handlerMove);\n        EventHandler.remove(document, 'mouseup touchend', this.handlerEnd);\n        var dragHandler = this.getDragHandler();\n        select('.' + HSVAREA, this.container).style.cursor = '';\n        if (this.tooltipEle.style.transform) {\n            this.tooltipEle.style.transform = '';\n            dragHandler.classList.remove('e-hide-handler');\n        }\n        if (!this.inline && !this.showButtons) {\n            this.closePopup(e);\n        }\n    };\n    ColorPicker.prototype.btnClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.' + MODESWITCH)) {\n            e.stopPropagation();\n            this.switchToPalette();\n        }\n        else {\n            if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {\n                this.ctrlBtnClick(target, e);\n            }\n        }\n    };\n    ColorPicker.prototype.switchToPalette = function () {\n        this.trigger('beforeModeSwitch', { element: this.container, mode: 'Palette' });\n        this.unWireEvents();\n        this.destroyOtherComp();\n        detach(select('.e-slider-preview', this.container));\n        if (!this.getWrapper().classList.contains(HIDEVALUE)) {\n            remove(select('.' + INPUTWRAPPER, this.container));\n        }\n        detach(this.getHsvContainer());\n        this.createPalette();\n        this.firstPaletteFocus();\n        this.createInput();\n        this.refreshPopupPos();\n        this.wireEvents();\n        this.trigger('onModeSwitch', { element: this.container, mode: 'Palette' });\n    };\n    ColorPicker.prototype.refreshPopupPos = function () {\n        if (!this.inline) {\n            var popupEle = this.getPopupEle();\n            popupEle.style.left = formatUnit(0 + pageXOffset);\n            popupEle.style.top = formatUnit(0 + pageYOffset);\n            this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement);\n        }\n    };\n    ColorPicker.prototype.formatSwitchHandler = function () {\n        if (this.isRgb) {\n            this.updateValue(this.hsv, true, 3, [360, 100, 100]);\n            this.isRgb = false;\n        }\n        else {\n            this.updateValue(this.rgb, true, 2);\n            this.isRgb = true;\n        }\n    };\n    ColorPicker.prototype.updateValue = function (value, format, idx, max) {\n        var clsName = ['e-rh-value', 'e-gs-value', 'e-bv-value'];\n        var inst;\n        for (var i = 0, len = clsName.length; i < len; i++) {\n            inst = getInstance(select('.' + clsName[i], this.container), NumericTextBox);\n            inst.value = Math.round(value[i]);\n            if (format) {\n                inst.placeholder = clsName[i].substr(idx, 1).toUpperCase();\n                inst.max = max ? max[i] : 255;\n            }\n            inst.dataBind();\n        }\n    };\n    ColorPicker.prototype.previewHandler = function (e) {\n        var target = e.target;\n        var pValue = this.rgbToHex(this.rgb);\n        this.rgb = this.convertRgbToNumberArray(target.style.backgroundColor);\n        if (!this.rgb[3]) {\n            this.rgb[3] = 1;\n        }\n        var cValue = this.rgbToHex(this.rgb);\n        var hsv = this.rgbToHsv.apply(this, this.rgb);\n        if (hsv[0] !== this.hsv[0]) {\n            this.hueSlider.setProperties({ 'value': hsv[0] }, true);\n            this.hueSlider.refresh();\n        }\n        this.setHsvContainerBg(hsv[0]);\n        if (this.enableOpacity && hsv[3] !== this.hsv[3]) {\n            this.opacitySlider.setProperties({ 'value': hsv[3] * 100 }, true);\n            this.opacitySlider.refresh();\n            this.updateOpacitySliderBg();\n        }\n        this.hsv = hsv;\n        this.setHandlerPosition();\n        this.updateInput(cValue);\n        select('.' + PREVIEW + ' .' + CURRENT, this.container).style.backgroundColor = this.convertToRgbString(this.rgb);\n        this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb));\n    };\n    ColorPicker.prototype.paletteClickHandler = function (e) {\n        e.preventDefault();\n        var target = e.target;\n        if (target.classList.contains(TILE)) {\n            this.removeTileSelection();\n            this.addTileSelection(target);\n            if (target.classList.contains(NOCOLOR)) {\n                this.noColorTile();\n            }\n            else {\n                var cValue = target.getAttribute('aria-label');\n                var pValue = this.rgbToHex(this.rgb);\n                this.rgb = this.hexToRgb(this.roundValue(cValue));\n                this.hsv = this.rgbToHsv.apply(this, this.rgb);\n                if (this.getWrapper().classList.contains(SHOWVALUE)) {\n                    this.updateInput(cValue);\n                }\n                this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb));\n            }\n            if (!this.inline && !this.showButtons) {\n                this.closePopup(e);\n            }\n        }\n        else {\n            if (closest(target, '.' + MODESWITCH)) {\n                this.switchToPicker();\n            }\n            else {\n                if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {\n                    this.ctrlBtnClick(target, e);\n                }\n                else {\n                    if (this.getWrapper().classList.contains(SHOWVALUE) && closest(target, '.' + FORMATSWITCH)) {\n                        this.formatSwitchHandler();\n                    }\n                }\n            }\n        }\n    };\n    ColorPicker.prototype.noColorTile = function (isKey) {\n        if (isKey === void 0) { isKey = false; }\n        var pValue = this.rgbToHex(this.rgb);\n        this.rgb = [];\n        this.hsv = [];\n        this.triggerEvent('', pValue, '', isKey);\n    };\n    ColorPicker.prototype.switchToPicker = function () {\n        var wrapper = this.getWrapper();\n        this.trigger('beforeModeSwitch', { element: this.container, mode: 'Picker' });\n        this.unWireEvents();\n        ([].slice.call(selectAll('.' + PALETTES, this.container))).forEach(function (ele) {\n            detach(ele);\n        });\n        if (wrapper.classList.contains(SHOWVALUE)) {\n            detach(select('.' + INPUTWRAPPER, this.container));\n        }\n        this.container.style.width = '';\n        var grpEle = select('.e-custom-palette', this.container);\n        if (this.presetColors) {\n            remove(grpEle);\n        }\n        this.createPicker();\n        this.getDragHandler().focus();\n        this.createInput();\n        this.refreshPopupPos();\n        this.wireEvents();\n        this.trigger('onModeSwitch', { element: this.container, mode: 'Picker' });\n    };\n    ColorPicker.prototype.ctrlBtnClick = function (ele, e) {\n        if (ele.classList.contains(APPLY)) {\n            var cValue = this.rgbToHex(this.rgb);\n            this.triggerChangeEvent(cValue);\n        }\n        if (!this.inline) {\n            this.closePopup(e);\n            this.splitBtn.element.focus();\n        }\n    };\n    ColorPicker.prototype.paletteKeyDown = function (e) {\n        var target = e.target;\n        if (!target.classList.contains(PALETTES)) {\n            return;\n        }\n        var selectedEle;\n        var idx;\n        var tiles = [].slice.call(selectAll('.' + TILE, target));\n        var prevSelectedEle = (tiles.filter(function (tile) { return tile.classList.contains('e-selected'); })).pop();\n        switch (!e.altKey && e.keyCode) {\n            case 39:\n                e.preventDefault();\n                selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? -1 : 1)]\n                    : tiles[this.enableRtl ? tiles.length - 1 : 0];\n                this.keySelectionChanges(selectedEle);\n                break;\n            case 37:\n                e.preventDefault();\n                selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? 1 : -1)]\n                    : tiles[this.enableRtl ? 0 : tiles.length - 1];\n                this.keySelectionChanges(selectedEle);\n                break;\n            case 38:\n                e.preventDefault();\n                idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, -this.columns) : 0;\n                selectedEle = tiles[idx] ? tiles[idx] : tiles[idx - this.columns];\n                this.keySelectionChanges(selectedEle);\n                break;\n            case 40:\n                e.preventDefault();\n                idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, this.columns) : tiles.length - 1;\n                if (tiles[idx]) {\n                    selectedEle = tiles[idx];\n                }\n                else {\n                    idx %= tiles.length;\n                    idx += tiles[tiles.length - 1].parentElement.childElementCount;\n                    selectedEle = tiles[idx];\n                }\n                this.keySelectionChanges(selectedEle);\n                break;\n            case 13:\n                e.preventDefault();\n                if (prevSelectedEle) {\n                    var cValue = prevSelectedEle.getAttribute('aria-label');\n                    this.enterKeyHandler(cValue ? cValue : '', e);\n                }\n        }\n    };\n    ColorPicker.prototype.keySelectionChanges = function (newEle) {\n        this.removeTileSelection();\n        this.addTileSelection(newEle);\n        if (newEle.classList.contains(NOCOLOR)) {\n            this.noColorTile(true);\n        }\n        else {\n            var cValue = newEle.getAttribute('aria-label');\n            var pValue = this.rgbToHex(this.rgb);\n            this.rgb = this.hexToRgb(cValue);\n            this.hsv = this.rgbToHsv.apply(this, this.rgb);\n            if (this.getWrapper().classList.contains(SHOWVALUE)) {\n                this.updateInput(cValue);\n            }\n            this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb), true);\n        }\n    };\n    ColorPicker.prototype.tilePosition = function (items, element, cIdx) {\n        items = Array.prototype.slice.call(items);\n        var n = items.length;\n        var emptyCount = this.columns - items[n - 1].parentElement.childElementCount;\n        var idx = items.indexOf(element);\n        idx += cIdx;\n        if (idx < 0) {\n            idx += n + emptyCount;\n        }\n        else {\n            idx %= n + emptyCount;\n        }\n        return idx;\n    };\n    ColorPicker.prototype.inputHandler = function (e) {\n        var target = e.target;\n        if (!target.value.length) {\n            return;\n        }\n        var hsv;\n        var pValue;\n        var label = select('.e-float-text', target.parentElement).textContent;\n        switch (label) {\n            case 'HEX': {\n                var value = '';\n                if ((target.value[0] === '#' && target.value.length !== 5) || (target.value[0] !== '#' && target.value.length !== 4)) {\n                    value = this.roundValue(target.value);\n                }\n                if (value.length === 9) {\n                    pValue = this.rgbToHex(this.rgb);\n                    this.rgb = this.hexToRgb(value + value.substr(-2));\n                    this.inputValueChange(this.rgbToHsv.apply(this, this.rgb), pValue, target.value);\n                }\n                else {\n                    return;\n                }\n                break;\n            }\n            case 'R':\n                if (this.rgb[0] !== Number(target.value)) {\n                    pValue = this.rgbToHex(this.rgb);\n                    this.rgb[0] = Number(target.value);\n                    hsv = this.rgbToHsv.apply(this, this.rgb);\n                    this.inputValueChange(hsv, pValue);\n                }\n                break;\n            case 'G':\n                if (this.rgb[1] !== Number(target.value)) {\n                    pValue = this.rgbToHex(this.rgb);\n                    this.rgb[1] = Number(target.value);\n                    hsv = this.rgbToHsv.apply(this, this.rgb);\n                    this.inputValueChange(hsv, pValue);\n                }\n                break;\n            case 'B':\n                if (this.rgb[2] !== Number(target.value)) {\n                    pValue = this.rgbToHex(this.rgb);\n                    this.rgb[2] = Number(target.value);\n                    hsv = this.rgbToHsv.apply(this, this.rgb);\n                    this.inputValueChange(hsv, pValue);\n                }\n                break;\n            case 'H':\n                this.hueSlider.value = Number(target.value);\n                break;\n            case 'S':\n                if (this.hsv[1] !== Number(target.value)) {\n                    this.hsv[1] = Number(target.value);\n                    this.updateHsv();\n                    this.convertToOtherFormat();\n                }\n                break;\n            case 'V':\n                if (this.hsv[2] !== Number(target.value)) {\n                    this.hsv[2] = Number(target.value);\n                    this.updateHsv();\n                    this.convertToOtherFormat();\n                }\n                break;\n            case 'A':\n                this.opacitySlider.value = Number(target.value);\n                break;\n        }\n    };\n    ColorPicker.prototype.inputValueChange = function (hsv, pValue, value) {\n        if (hsv[0] !== this.hsv[0]) {\n            this.hueSlider.setProperties({ 'value': hsv[0] }, true);\n            this.hueSlider.refresh();\n            this.setHsvContainerBg(hsv[0]);\n        }\n        this.hsv = hsv;\n        var cValue = this.rgbToHex(this.rgb);\n        this.setHandlerPosition();\n        this.updateInput(value ? value : cValue);\n        var rgba = this.convertToRgbString(this.rgb);\n        this.updatePreview(rgba);\n        this.triggerEvent(cValue, pValue, rgba);\n    };\n    ColorPicker.prototype.triggerEvent = function (cValue, pValue, rgba, isKey) {\n        if (isKey === void 0) { isKey = false; }\n        var hex = cValue.slice(0, 7);\n        if (!this.showButtons && !isKey) {\n            this.trigger('change', { currentValue: { hex: hex, rgba: rgba },\n                previousValue: { hex: this.value.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(this.value)) }, value: cValue });\n            if (this.enableOpacity) {\n                this.setProperties({ 'value': cValue }, true);\n            }\n            else {\n                this.setProperties({ 'value': hex }, true);\n            }\n            this.element.value = hex ? hex : '#000000';\n        }\n        else {\n            this.trigger('select', {\n                currentValue: { hex: hex, rgba: rgba },\n                previousValue: { hex: pValue.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(pValue)) }\n            });\n        }\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers.\n     * Also it maintains the initial input element from the DOM.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    ColorPicker.prototype.destroy = function () {\n        var _this = this;\n        var wrapper = this.getWrapper();\n        _super.prototype.destroy.call(this);\n        ['tabindex', 'spellcheck'].forEach(function (attr) { _this.element.removeAttribute(attr); });\n        if (this.inline) {\n            this.unWireEvents();\n            this.destroyOtherComp();\n        }\n        else {\n            if (this.isPopupOpen()) {\n                this.unWireEvents();\n                this.destroyOtherComp();\n            }\n            this.splitBtn.destroy();\n            this.splitBtn = null;\n        }\n        this.tileRipple();\n        this.tileRipple = null;\n        this.ctrlBtnRipple();\n        this.ctrlBtnRipple = null;\n        if (this.element.nextElementSibling) {\n            detach(this.element.nextElementSibling);\n        }\n        if (wrapper) {\n            wrapper.parentElement.insertBefore(this.element, wrapper);\n            detach(wrapper);\n        }\n        this.container = null;\n        if (this.formElement) {\n            EventHandler.remove(this.formElement, 'reset', this.formResetHandler);\n        }\n    };\n    ColorPicker.prototype.destroyOtherComp = function () {\n        if (this.isPicker()) {\n            this.hueSlider.destroy();\n            if (this.enableOpacity) {\n                this.opacitySlider.destroy();\n                this.opacitySlider = null;\n            }\n            this.hueSlider = null;\n            var tooltipInst = this.getTooltipInst();\n            tooltipInst.close();\n            tooltipInst.destroy();\n            this.tooltipEle = null;\n        }\n    };\n    ColorPicker.prototype.isPopupOpen = function () {\n        return this.getPopupEle().classList.contains('e-popup-open');\n    };\n    ColorPicker.prototype.unWireEvents = function () {\n        if (this.isPicker()) {\n            var dragHandler = this.getDragHandler();\n            EventHandler.remove(dragHandler, 'keydown', this.pickerKeyDown);\n            EventHandler.remove(this.getHsvContainer(), 'mousedown touchstart', this.handlerDown);\n            if (this.modeSwitcher || this.showButtons) {\n                EventHandler.remove(select('.' + CTRLSWITCH, this.container), 'click', this.btnClickHandler);\n            }\n            EventHandler.remove(select('.' + PREVIOUS, this.container), 'click', this.previewHandler);\n        }\n        else {\n            EventHandler.remove(this.container, 'click', this.paletteClickHandler);\n            EventHandler.remove(this.container, 'keydown', this.paletteKeyDown);\n        }\n    };\n    ColorPicker.prototype.roundValue = function (value) {\n        if (!value) {\n            return '';\n        }\n        if (value[0] !== '#') {\n            value = '#' + value;\n        }\n        var len = value.length;\n        if (len === 4) {\n            value += 'f';\n            len = 5;\n        }\n        if (len === 5) {\n            var tempValue = '';\n            for (var i = 1, len_1 = value.length; i < len_1; i++) {\n                tempValue += (value.charAt(i) + value.charAt(i));\n            }\n            value = '#' + tempValue;\n            len = 9;\n        }\n        if (len === 7) {\n            value += 'ff';\n        }\n        return value;\n    };\n    ColorPicker.prototype.hexToRgb = function (hex) {\n        if (!hex) {\n            return [];\n        }\n        hex = hex.trim();\n        if (hex.length !== 9) {\n            hex = this.roundValue(hex);\n        }\n        var opacity = Number((parseInt(hex.slice(-2), 16) / 255).toFixed(2));\n        hex = hex.slice(1, 7);\n        var bigInt = parseInt(hex, 16);\n        var h = [];\n        h.push((bigInt >> 16) & 255);\n        h.push((bigInt >> 8) & 255);\n        h.push(bigInt & 255);\n        h.push(opacity);\n        return h;\n    };\n    ColorPicker.prototype.rgbToHsv = function (r, g, b, opacity) {\n        if (this.rgb && !this.rgb.length) {\n            return [];\n        }\n        r /= 255;\n        g /= 255;\n        b /= 255;\n        var max = Math.max(r, g, b);\n        var min = Math.min(r, g, b);\n        var h;\n        var v = max;\n        var d = max - min;\n        var s = max === 0 ? 0 : d / max;\n        if (max === min) {\n            h = 0;\n        }\n        else {\n            switch (max) {\n                case r:\n                    h = (g - b) / d + (g < b ? 6 : 0);\n                    break;\n                case g:\n                    h = (b - r) / d + 2;\n                    break;\n                case b:\n                    h = (r - g) / d + 4;\n                    break;\n            }\n            h /= 6;\n        }\n        var hsv = [Math.round(h * 360), Math.round(s * 1000) / 10, Math.round(v * 1000) / 10];\n        if (!isNullOrUndefined(opacity)) {\n            hsv.push(opacity);\n        }\n        return hsv;\n    };\n    ColorPicker.prototype.hsvToRgb = function (h, s, v, opacity) {\n        var r;\n        var g;\n        var b;\n        s /= 100;\n        v /= 100;\n        if (s === 0) {\n            r = g = b = v;\n            return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255), opacity];\n        }\n        h /= 60;\n        var i = Math.floor(h);\n        var f = h - i;\n        var p = v * (1 - s);\n        var q = v * (1 - s * f);\n        var t = v * (1 - s * (1 - f));\n        switch (i) {\n            case 0:\n                r = v;\n                g = t;\n                b = p;\n                break;\n            case 1:\n                r = q;\n                g = v;\n                b = p;\n                break;\n            case 2:\n                r = p;\n                g = v;\n                b = t;\n                break;\n            case 3:\n                r = p;\n                g = q;\n                b = v;\n                break;\n            case 4:\n                r = t;\n                g = p;\n                b = v;\n                break;\n            default:\n                r = v;\n                g = p;\n                b = q;\n        }\n        var rgb = [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n        if (!isNullOrUndefined(opacity)) {\n            rgb.push(opacity);\n        }\n        return rgb;\n    };\n    ColorPicker.prototype.rgbToHex = function (rgb) {\n        return rgb.length ? ('#' + this.hex(rgb[0]) + this.hex(rgb[1]) + this.hex(rgb[2]) +\n            (!isNullOrUndefined(rgb[3]) ? (rgb[3] !== 0 ? (Math.round(rgb[3] * 255) + 0x10000).toString(16).substr(-2) : '00') : '')) : '';\n    };\n    ColorPicker.prototype.hex = function (x) {\n        return ('0' + x.toString(16)).slice(-2);\n    };\n    ColorPicker.prototype.changeModeSwitcherProp = function (prop) {\n        var ctrlSwitchWrapper = select('.' + CTRLSWITCH, this.container);\n        if (prop) {\n            if (ctrlSwitchWrapper) {\n                this.appendModeSwitchBtn();\n            }\n            else {\n                this.createCtrlBtn();\n                if (this.isPicker() && !this.disabled) {\n                    this.addCtrlSwitchEvent();\n                }\n            }\n        }\n        else {\n            if (ctrlSwitchWrapper) {\n                if (this.showButtons) {\n                    detach(select('.' + MODESWITCH, ctrlSwitchWrapper));\n                }\n                else {\n                    remove(ctrlSwitchWrapper);\n                }\n            }\n        }\n    };\n    ColorPicker.prototype.changeShowBtnProps = function (prop) {\n        var ctrlBtnWrapper = select('.' + CTRLSWITCH, this.container);\n        if (prop) {\n            if (ctrlBtnWrapper) {\n                remove(ctrlBtnWrapper);\n            }\n            this.createCtrlBtn();\n            if (this.isPicker() && !this.disabled) {\n                this.addCtrlSwitchEvent();\n            }\n        }\n        else {\n            if (this.modeSwitcher) {\n                detach(select('.' + CTRLBTN, ctrlBtnWrapper));\n            }\n            else {\n                remove(ctrlBtnWrapper);\n            }\n        }\n    };\n    ColorPicker.prototype.changeValueProp = function (newProp) {\n        if (this.isPicker()) {\n            this.rgb = this.hexToRgb(newProp);\n            this.hsv = this.rgbToHsv.apply(this, this.rgb);\n            this.setHandlerPosition();\n            detach(closest(this.hueSlider.element, '.e-slider-preview'));\n            this.createSlider();\n            this.setHsvContainerBg();\n            this.updateInput(newProp);\n            if (this.rgb.length === 4) {\n                this.updateOpacityInput(this.rgb[3] * 100);\n            }\n        }\n        else {\n            this.removeTileSelection();\n            var ele = this.container.querySelector('span[aria-label=\"' + this.roundValue(newProp) + '\"]');\n            if (ele) {\n                this.addTileSelection(ele);\n            }\n        }\n    };\n    ColorPicker.prototype.setInputEleProps = function () {\n        remove(select('.' + INPUTWRAPPER, this.container));\n        this.createInput();\n    };\n    ColorPicker.prototype.changeDisabledProp = function (newProp) {\n        if (this.isPicker()) {\n            this.hueSlider.enabled = !newProp;\n            this.opacitySlider.enabled = !newProp;\n            this.setInputEleProps();\n        }\n        if (newProp) {\n            this.toggleDisabled(true);\n            this.unWireEvents();\n        }\n        else {\n            this.toggleDisabled(false);\n            this.wireEvents();\n        }\n    };\n    ColorPicker.prototype.changeCssClassProps = function (newProp, oldProp) {\n        var wrapper = this.getWrapper();\n        var popupWrapper = this.getPopupEle();\n        if (oldProp) {\n            removeClass([wrapper, popupWrapper], oldProp.split(' '));\n        }\n        if (newProp) {\n            addClass([wrapper, popupWrapper], newProp.split(' '));\n        }\n    };\n    ColorPicker.prototype.changeRtlProps = function (newProp) {\n        if (newProp) {\n            addClass([this.getWrapper()], 'e-rtl');\n        }\n        else {\n            removeClass([this.getWrapper()], 'e-rtl');\n        }\n    };\n    ColorPicker.prototype.changePaletteProps = function () {\n        detach(this.container.children[0]);\n        this.container.style.width = '';\n        this.createPalette();\n    };\n    ColorPicker.prototype.changeOpacityProps = function (newProp) {\n        var wrapper = this.getWrapper();\n        if (newProp) {\n            removeClass([this.container.parentElement], HIDEOPACITY);\n            this.createOpacitySlider(select('.e-colorpicker-slider', this.container).appendChild(this.createElement('div', { className: 'e-opacity-slider' })));\n            if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {\n                this.appendOpacityValue(select('.e-input-container', this.container));\n            }\n        }\n        else {\n            addClass([this.container.parentElement], HIDEOPACITY);\n            this.opacitySlider.destroy();\n            remove(this.opacitySlider.element);\n            this.opacitySlider = null;\n            if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {\n                remove(select('.' + OPACITY, this.container).parentElement);\n            }\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param  {ColorPickerModel} newProp - Specifies new properties\n     * @param  {ColorPickerModel} oldProp - Specifies old properties\n     * @returns {void}\n     * @private\n     */\n    ColorPicker.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var _this = this;\n        if (!isNullOrUndefined(newProp.value)) {\n            var value = this.roundValue(newProp.value);\n            if (value.length === 9) {\n                this.element.value = this.roundValue(value).slice(0, 7);\n                var preview = this.splitBtn && select('.' + SPLITPREVIEW, this.splitBtn.element);\n                if (preview) {\n                    preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(newProp.value));\n                }\n            }\n            else {\n                this.value = oldProp.value;\n            }\n        }\n        if (!this.inline && isNullOrUndefined(newProp.inline)) {\n            var otherCompModel = ['disabled', 'enableRtl'];\n            this.splitBtn.setProperties(getModel(newProp, otherCompModel));\n            if (!this.isPopupOpen()) {\n                this.changeCssClassProps(newProp.cssClass, oldProp.cssClass);\n                this.changeRtlProps(newProp.enableRtl);\n                return;\n            }\n        }\n        var _loop_1 = function (prop) {\n            switch (prop) {\n                case 'inline':\n                    if (newProp.inline) {\n                        this_1.getWrapper().appendChild(this_1.container);\n                        this_1.splitBtn.destroy();\n                        detach(this_1.element.nextElementSibling);\n                        if (!this_1.container.children.length) {\n                            this_1.createWidget();\n                        }\n                    }\n                    else {\n                        this_1.destroyOtherComp();\n                        this_1.unWireEvents();\n                        this_1.container.innerHTML = '';\n                        this_1.createSplitBtn();\n                    }\n                    break;\n                case 'cssClass': {\n                    this_1.changeCssClassProps(newProp.cssClass, oldProp.cssClass);\n                    var props = newProp.cssClass.split(' ').concat(oldProp.cssClass.split(' '));\n                    props = props.reduce(function (a, b) { if (a.indexOf(b) < 0) {\n                        a.push(b);\n                    } return a; }, []);\n                    var count_1 = 0;\n                    props.forEach(function (cls) {\n                        if (count_1 === 0 &&\n                            (cls === HIDEVALUE || cls === HIDEVALUESWITCH || cls === SHOWVALUE || cls === HIDEHEX || cls === HIDERGBA)) {\n                            var inputWrap = select('.' + INPUTWRAPPER, _this.container);\n                            if (inputWrap) {\n                                remove(select('.' + INPUTWRAPPER, _this.container));\n                            }\n                            _this.createInput();\n                            count_1++;\n                        }\n                    });\n                    break;\n                }\n                case 'enableRtl':\n                    if (this_1.isPicker()) {\n                        this_1.hueSlider.enableRtl = newProp.enableRtl;\n                        if (this_1.enableOpacity) {\n                            this_1.opacitySlider.enableRtl = newProp.enableRtl;\n                        }\n                        this_1.setInputEleProps();\n                    }\n                    this_1.changeRtlProps(newProp.enableRtl);\n                    break;\n                case 'disabled':\n                    this_1.changeDisabledProp(newProp.disabled);\n                    break;\n                case 'value':\n                    if (this_1.value !== oldProp.value) {\n                        this_1.changeValueProp(newProp.value);\n                    }\n                    break;\n                case 'showButtons':\n                    this_1.changeShowBtnProps(newProp.showButtons);\n                    break;\n                case 'mode':\n                    if (newProp.mode === 'Picker') {\n                        this_1.switchToPicker();\n                    }\n                    else {\n                        this_1.switchToPalette();\n                    }\n                    break;\n                case 'modeSwitcher':\n                    this_1.changeModeSwitcherProp(newProp.modeSwitcher);\n                    break;\n                case 'columns':\n                case 'presetColors':\n                    if (!this_1.isPicker()) {\n                        this_1.changePaletteProps();\n                    }\n                    break;\n                case 'noColor':\n                    if (newProp.noColor) {\n                        if (this_1.mode === 'Palette' && !this_1.modeSwitcher) {\n                            this_1.setNoColor();\n                        }\n                    }\n                    else {\n                        this_1.changePaletteProps();\n                    }\n                    break;\n                case 'enableOpacity':\n                    this_1.changeOpacityProps(newProp.enableOpacity);\n                    break;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            _loop_1(prop);\n        }\n    };\n    /**\n     * Sets the focus to Colorpicker\n     * its native method\n     *\n     * @public\n     * @returns {void}\n     */\n    ColorPicker.prototype.focusIn = function () {\n        this.element.parentElement.focus();\n    };\n    __decorate([\n        Property('#008000ff')\n    ], ColorPicker.prototype, \"value\", void 0);\n    __decorate([\n        Property('')\n    ], ColorPicker.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"disabled\", void 0);\n    __decorate([\n        Property('Picker')\n    ], ColorPicker.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], ColorPicker.prototype, \"modeSwitcher\", void 0);\n    __decorate([\n        Property(null)\n    ], ColorPicker.prototype, \"presetColors\", void 0);\n    __decorate([\n        Property(true)\n    ], ColorPicker.prototype, \"showButtons\", void 0);\n    __decorate([\n        Property(10)\n    ], ColorPicker.prototype, \"columns\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"inline\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"noColor\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property(true)\n    ], ColorPicker.prototype, \"enableOpacity\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"createPopupOnClick\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"select\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"change\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"beforeTileRender\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"beforeOpen\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"open\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"beforeClose\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"beforeModeSwitch\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"onModeSwitch\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"created\", void 0);\n    ColorPicker = __decorate([\n        NotifyPropertyChanges\n    ], ColorPicker);\n    return ColorPicker;\n}(Component));\nexport { ColorPicker };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}