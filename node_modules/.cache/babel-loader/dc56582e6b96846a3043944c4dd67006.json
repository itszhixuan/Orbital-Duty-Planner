{"ast":null,"code":"/* eslint-disable valid-jsdoc, jsdoc/require-jsdoc, jsdoc/require-returns, jsdoc/require-param */\n\n/**\n * MaskedTextBox base module\n */\nimport { EventHandler, isNullOrUndefined, merge, attributes, addClass, removeClass, Browser, extend } from '@syncfusion/ej2-base';\nimport { Input } from '../../input/input';\nvar ERROR = 'e-error';\nvar INPUTGROUP = 'e-input-group';\nvar FLOATINPUT = 'e-float-input';\nvar UTILMASK = 'e-utility-mask';\nvar TOPLABEL = 'e-label-top';\nvar BOTTOMLABEL = 'e-label-bottom';\n/**\n * @hidden\n * Built-in masking elements collection.\n */\n\nexport var regularExpressions = {\n  '0': '[0-9]',\n  '9': '[0-9 ]',\n  '#': '[0-9 +-]',\n  'L': '[A-Za-z]',\n  '?': '[A-Za-z ]',\n  '&': '[^\\x7f ]+',\n  'C': '[^\\x7f]+',\n  'A': '[A-Za-z0-9]',\n  'a': '[A-Za-z0-9 ]'\n};\n/**\n * Generate required masking elements to the MaskedTextBox from user mask input.\n *\n * @hidden\n */\n\nexport function createMask() {\n  attributes(this.element, {\n    'role': 'textbox',\n    'autocomplete': 'off',\n    'autocorrect': 'off',\n    'autocapitalize': 'off',\n    'spellcheck': 'false',\n    'aria-live': 'assertive',\n    'aria-valuenow': ''\n  });\n\n  if (this.mask) {\n    var splitMask = this.mask.split(']');\n\n    for (var i = 0; i < splitMask.length; i++) {\n      if (splitMask[i][splitMask[i].length - 1] === '\\\\') {\n        splitMask[i] = splitMask[i] + ']';\n        var splitInnerMask = splitMask[i].split('[');\n\n        for (var j = 0; j < splitInnerMask.length; j++) {\n          if (splitInnerMask[j][splitInnerMask[j].length - 1] === '\\\\') {\n            splitInnerMask[j] = splitInnerMask[j] + '[';\n          }\n\n          pushIntoRegExpCollec.call(this, splitInnerMask[j]);\n        }\n      } else {\n        var splitInnerMask = splitMask[i].split('[');\n\n        if (splitInnerMask.length > 1) {\n          var chkSpace = false;\n\n          for (var j = 0; j < splitInnerMask.length; j++) {\n            if (splitInnerMask[j] === '\\\\') {\n              this.customRegExpCollec.push('[');\n              this.hiddenMask += splitInnerMask[j] + '[';\n            } else if (splitInnerMask[j] === '') {\n              chkSpace = true;\n            } else if (splitInnerMask[j] !== '' && chkSpace || j === splitInnerMask.length - 1) {\n              this.customRegExpCollec.push('[' + splitInnerMask[j] + ']');\n              this.hiddenMask += this.promptChar;\n              chkSpace = false;\n            } else {\n              pushIntoRegExpCollec.call(this, splitInnerMask[j]);\n            }\n          }\n        } else {\n          pushIntoRegExpCollec.call(this, splitInnerMask[0]);\n        }\n      }\n    }\n\n    this.escapeMaskValue = this.hiddenMask;\n    this.promptMask = this.hiddenMask.replace(/[09?LCAa#&]/g, this.promptChar);\n\n    if (!isNullOrUndefined(this.customCharacters)) {\n      for (var i = 0; i < this.promptMask.length; i++) {\n        if (!isNullOrUndefined(this.customCharacters[this.promptMask[i]])) {\n          this.promptMask = this.promptMask.replace(new RegExp(this.promptMask[i], 'g'), this.promptChar);\n        }\n      }\n    }\n\n    var escapeNumber = 0;\n\n    if (this.hiddenMask.match(new RegExp(/\\\\/))) {\n      for (var i = 0; i < this.hiddenMask.length; i++) {\n        var j = 0;\n\n        if (i >= 1) {\n          j = i;\n        }\n\n        escapeNumber = this.hiddenMask.length - this.promptMask.length;\n        j = j - escapeNumber;\n\n        if (i > 0 && this.hiddenMask[i - 1] !== '\\\\' && (this.hiddenMask[i] === '>' || this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|')) {\n          this.promptMask = this.promptMask.substring(0, j) + this.promptMask.substring(i + 1 - escapeNumber, this.promptMask.length);\n          this.escapeMaskValue = this.escapeMaskValue.substring(0, j) + this.escapeMaskValue.substring(i + 1 - escapeNumber, this.escapeMaskValue.length);\n        }\n\n        if (this.hiddenMask[i] === '\\\\') {\n          this.promptMask = this.promptMask.substring(0, j) + this.hiddenMask[i + 1] + this.promptMask.substring(i + 2 - escapeNumber, this.promptMask.length);\n          this.escapeMaskValue = this.escapeMaskValue.substring(0, j) + this.escapeMaskValue[i + 1] + this.escapeMaskValue.substring(i + 2 - escapeNumber, this.escapeMaskValue.length);\n        }\n      }\n    } else {\n      this.promptMask = this.promptMask.replace(/[>|<]/g, '');\n      this.escapeMaskValue = this.hiddenMask.replace(/[>|<]/g, '');\n    }\n\n    attributes(this.element, {\n      'aria-invalid': 'false'\n    });\n  }\n}\n/**\n * Apply mask ability with masking elements to the MaskedTextBox.\n *\n * @hidden\n */\n\nexport function applyMask() {\n  setElementValue.call(this, this.promptMask);\n  setMaskValue.call(this, this.value);\n}\n/**\n * To wire required events to the MaskedTextBox.\n *\n * @hidden\n */\n\nexport function wireEvents() {\n  EventHandler.add(this.element, 'keydown', maskInputKeyDownHandler, this);\n  EventHandler.add(this.element, 'keypress', maskInputKeyPressHandler, this);\n  EventHandler.add(this.element, 'keyup', maskInputKeyUpHandler, this);\n  EventHandler.add(this.element, 'input', maskInputHandler, this);\n  EventHandler.add(this.element, 'focus', maskInputFocusHandler, this);\n  EventHandler.add(this.element, 'blur', maskInputBlurHandler, this);\n  EventHandler.add(this.element, 'paste', maskInputPasteHandler, this);\n  EventHandler.add(this.element, 'cut', maskInputCutHandler, this);\n  EventHandler.add(this.element, 'drop', maskInputDropHandler, this);\n  EventHandler.add(this.element, 'mousedown', maskInputMouseDownHandler, this);\n  EventHandler.add(this.element, 'mouseup', maskInputMouseUpHandler, this);\n\n  if (this.enabled) {\n    bindClearEvent.call(this);\n\n    if (this.formElement) {\n      EventHandler.add(this.formElement, 'reset', resetFormHandler, this);\n    }\n  }\n}\n/**\n * To unwire events attached to the MaskedTextBox.\n *\n * @hidden\n */\n\nexport function unwireEvents() {\n  EventHandler.remove(this.element, 'keydown', maskInputKeyDownHandler);\n  EventHandler.remove(this.element, 'keypress', maskInputKeyPressHandler);\n  EventHandler.remove(this.element, 'keyup', maskInputKeyUpHandler);\n  EventHandler.remove(this.element, 'input', maskInputHandler);\n  EventHandler.remove(this.element, 'focus', maskInputFocusHandler);\n  EventHandler.remove(this.element, 'blur', maskInputBlurHandler);\n  EventHandler.remove(this.element, 'paste', maskInputPasteHandler);\n  EventHandler.remove(this.element, 'cut', maskInputCutHandler);\n  EventHandler.remove(this.element, 'mousedown', maskInputMouseDownHandler);\n  EventHandler.remove(this.element, 'mouseup', maskInputMouseUpHandler);\n\n  if (this.formElement) {\n    EventHandler.remove(this.formElement, 'reset', resetFormHandler);\n  }\n}\n/**\n * To bind required events to the MaskedTextBox clearButton.\n *\n * @hidden\n */\n\nexport function bindClearEvent() {\n  if (this.showClearButton) {\n    EventHandler.add(this.inputObj.clearButton, 'mousedown touchstart', resetHandler, this);\n  }\n}\n\nfunction resetHandler(e) {\n  e.preventDefault();\n\n  if (!this.inputObj.clearButton.classList.contains('e-clear-icon-hide') || this.inputObj.container.classList.contains('e-static-clear')) {\n    clear.call(this, e);\n    this.value = '';\n  }\n}\n\nfunction clear(event) {\n  var value = this.element.value;\n  setElementValue.call(this, this.promptMask);\n  this.redoCollec.unshift({\n    value: this.promptMask,\n    startIndex: this.element.selectionStart,\n    endIndex: this.element.selectionEnd\n  });\n  triggerMaskChangeEvent.call(this, event, value);\n  this.element.setSelectionRange(0, 0);\n}\n\nfunction resetFormHandler() {\n  if (this.element.tagName === 'EJS-MASKEDTEXTBOX') {\n    setElementValue.call(this, this.promptMask);\n  } else {\n    this.value = this.initInputValue;\n  }\n}\n/**\n * To get masked value from the MaskedTextBox.\n *\n * @hidden\n */\n\n\nexport function unstrippedValue(element) {\n  return element.value;\n}\n/**\n * To extract raw value from the MaskedTextBox.\n *\n * @hidden\n */\n\nexport function strippedValue(element, maskValues) {\n  var value = '';\n  var k = 0;\n  var checkMask = false;\n  var maskValue = !isNullOrUndefined(maskValues) ? maskValues : !isNullOrUndefined(element) && !isNullOrUndefined(this) ? element.value : maskValues;\n\n  if (maskValue !== this.promptMask) {\n    for (var i = 0; i < this.customRegExpCollec.length; i++) {\n      if (checkMask) {\n        checkMask = false;\n      }\n\n      if (this.customRegExpCollec[k] === '>' || this.customRegExpCollec[k] === '<' || this.customRegExpCollec[k] === '|' || this.customRegExpCollec[k] === '\\\\') {\n        --i;\n        checkMask = true;\n      }\n\n      if (!checkMask) {\n        if (maskValue[i] !== this.promptChar && !isNullOrUndefined(this.customRegExpCollec[k]) && (this._callPasteHandler || !isNullOrUndefined(this.regExpCollec[this.customRegExpCollec[k]]) || this.customRegExpCollec[k].length > 2 && this.customRegExpCollec[k][0] === '[' && this.customRegExpCollec[k][this.customRegExpCollec[k].length - 1] === ']' || !isNullOrUndefined(this.customCharacters) && !isNullOrUndefined(this.customCharacters[this.customRegExpCollec[k]])) && maskValue !== '') {\n          value += maskValue[i];\n        }\n      }\n\n      ++k;\n    }\n  }\n\n  if (this.mask === null || this.mask === '' && this.value !== undefined) {\n    value = maskValue;\n  }\n\n  return value;\n}\n\nfunction pushIntoRegExpCollec(value) {\n  for (var k = 0; k < value.length; k++) {\n    this.hiddenMask += value[k];\n\n    if (value[k] !== '\\\\') {\n      this.customRegExpCollec.push(value[k]);\n    }\n  }\n}\n\nexport function maskInputMouseDownHandler() {\n  this.isClicked = true;\n}\nexport function maskInputMouseUpHandler() {\n  this.isClicked = false;\n}\nexport function maskInputFocusHandler(event) {\n  var _this = this;\n\n  var inputElement = this.element;\n  var startIndex = 0;\n  var modelValue = strippedValue.call(this, inputElement);\n  var toAllowForward = false;\n  var toAllowBackward = false;\n  var eventArgs = {\n    selectionStart: inputElement.selectionStart,\n    event: event,\n    value: this.value,\n    maskedValue: inputElement.value,\n    container: this.inputObj.container,\n    selectionEnd: inputElement.selectionEnd\n  };\n\n  if (!this.isClicked) {\n    triggerFocus.call(this, eventArgs, inputElement);\n  }\n\n  if (this.mask) {\n    if (!(!(modelValue === null || modelValue === '') || this.floatLabelType === 'Always' || this.placeholder === null || this.placeholder === '')) {\n      inputElement.value = this.promptMask;\n    }\n\n    setTimeout(function () {\n      if (inputElement.selectionStart === _this.promptMask.length || inputElement.value[inputElement.selectionStart] === _this.promptChar) {\n        toAllowForward = true;\n      } else {\n        for (var i = inputElement.selectionStart; i < _this.promptMask.length; i++) {\n          if (inputElement.value[i] !== _this.promptChar) {\n            if (inputElement.value[i] !== _this.promptMask[i]) {\n              toAllowForward = false;\n              break;\n            }\n          } else {\n            toAllowForward = true;\n            break;\n          }\n        }\n      }\n    });\n    setTimeout(function () {\n      var backSelectionStart = inputElement.selectionStart - 1;\n\n      if (backSelectionStart === _this.promptMask.length - 1 || inputElement.value[backSelectionStart] === _this.promptChar) {\n        toAllowBackward = true;\n      } else {\n        for (var i = backSelectionStart; i >= 0; i--) {\n          if (inputElement.value[i] !== _this.promptChar) {\n            if (inputElement.value[i] !== _this.promptMask[i]) {\n              toAllowBackward = false;\n              break;\n            }\n          } else {\n            toAllowBackward = true;\n            break;\n          }\n        }\n      }\n    });\n\n    if (this.isClicked || this.floatLabelType !== 'Always' && (modelValue === null || modelValue === '') && this.placeholder !== null && this.placeholder !== '') {\n      for (startIndex = 0; startIndex < this.promptMask.length; startIndex++) {\n        if (inputElement.value[startIndex] === this.promptChar) {\n          setTimeout(function () {\n            if (toAllowForward || toAllowBackward) {\n              inputElement.selectionEnd = startIndex;\n              inputElement.selectionStart = startIndex;\n            }\n\n            eventArgs = {\n              selectionStart: inputElement.selectionStart,\n              event: event,\n              value: _this.value,\n              maskedValue: inputElement.value,\n              container: _this.inputObj.container,\n              selectionEnd: inputElement.selectionEnd\n            };\n            triggerFocus.call(_this, eventArgs, inputElement);\n          });\n          break;\n        }\n      }\n\n      if (isNullOrUndefined(inputElement.value.match(this.promptChar))) {\n        eventArgs = {\n          selectionStart: inputElement.selectionStart,\n          event: event,\n          value: this.value,\n          maskedValue: inputElement.value,\n          container: this.inputObj.container,\n          selectionEnd: inputElement.selectionEnd\n        };\n        triggerFocus.call(this, eventArgs, inputElement);\n      }\n\n      this.isClicked = false;\n    }\n  }\n}\nexport function triggerFocus(eventArgs, inputElement) {\n  this.trigger('focus', eventArgs, function (eventArgs) {\n    inputElement.selectionStart = eventArgs.selectionStart;\n    inputElement.selectionEnd = eventArgs.selectionEnd;\n  });\n}\nexport function maskInputBlurHandler(event) {\n  this.blurEventArgs = {\n    event: event,\n    value: this.value,\n    maskedValue: this.element.value,\n    container: this.inputObj.container\n  };\n  this.trigger('blur', this.blurEventArgs);\n\n  if (this.mask) {\n    this.isFocus = false;\n\n    if (this.placeholder && this.element.value === this.promptMask && this.floatLabelType !== 'Always') {\n      setElementValue.call(this, '');\n      var labelElement = this.element.parentNode.querySelector('.e-float-text');\n\n      if (this.floatLabelType === 'Auto' && !isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL)) {\n        removeClass([labelElement], TOPLABEL);\n      }\n    }\n  }\n}\n\nfunction maskInputPasteHandler(event) {\n  var _this = this;\n\n  if (this.mask && !this.readonly) {\n    var sIndex_1 = this.element.selectionStart;\n    var eIndex_1 = this.element.selectionEnd;\n    var oldValue_1 = this.element.value;\n    setElementValue.call(this, '');\n    this._callPasteHandler = true;\n    setTimeout(function () {\n      var value = _this.element.value.replace(/ /g, '');\n\n      if (_this.redoCollec.length > 0 && _this.redoCollec[0].value === _this.element.value) {\n        value = strippedValue.call(_this, _this.element);\n      }\n\n      setElementValue.call(_this, oldValue_1);\n      _this.element.selectionStart = sIndex_1;\n      _this.element.selectionEnd = eIndex_1;\n      var i = 0;\n      _this.maskKeyPress = true;\n\n      do {\n        validateValue.call(_this, value[i], false, null);\n        ++i;\n      } while (i < value.length);\n\n      _this.maskKeyPress = false;\n      _this._callPasteHandler = false;\n\n      if (_this.element.value === oldValue_1) {\n        var i_1 = 0;\n        _this.maskKeyPress = true;\n\n        do {\n          validateValue.call(_this, value[i_1], false, null);\n          ++i_1;\n        } while (i_1 < value.length);\n\n        _this.maskKeyPress = false;\n      } else {\n        triggerMaskChangeEvent.call(_this, event, oldValue_1);\n      }\n    }, 1);\n  }\n}\n\nfunction maskInputCutHandler(event) {\n  var _this = this;\n\n  if (this.mask && !this.readonly) {\n    var preValue_1 = this.element.value;\n    var sIndex_2 = this.element.selectionStart;\n    var eIndex = this.element.selectionEnd;\n    this.undoCollec.push({\n      value: this.element.value,\n      startIndex: this.element.selectionStart,\n      endIndex: this.element.selectionEnd\n    });\n    var value_1 = this.element.value.substring(0, sIndex_2) + this.promptMask.substring(sIndex_2, eIndex) + this.element.value.substring(eIndex);\n    setTimeout(function () {\n      setElementValue.call(_this, value_1);\n      _this.element.selectionStart = _this.element.selectionEnd = sIndex_2;\n\n      if (_this.element.value !== preValue_1) {\n        triggerMaskChangeEvent.call(_this, event, null);\n      }\n    }, 0);\n  }\n}\n\nexport function maskInputDropHandler(event) {\n  event.preventDefault();\n}\n\nfunction maskInputHandler(event) {\n  if (Browser.isIE === true && this.element.value === '' && this.floatLabelType === 'Never') {\n    return;\n  }\n\n  var eventArgs = {\n    ctrlKey: false,\n    keyCode: 229\n  };\n  extend(event, eventArgs);\n\n  if (this.mask) {\n    if (this.element.value === '') {\n      this.redoCollec.unshift({\n        value: this.promptMask,\n        startIndex: this.element.selectionStart,\n        endIndex: this.element.selectionEnd\n      });\n    }\n\n    if (this.element.value.length === 1) {\n      this.element.value = this.element.value + this.promptMask;\n      this.element.setSelectionRange(1, 1);\n    }\n\n    if (!this._callPasteHandler) {\n      removeMaskInputValues.call(this, event);\n    }\n\n    if (this.element.value.length > this.promptMask.length) {\n      var startIndex = this.element.selectionStart;\n      var addedValues = this.element.value.length - this.promptMask.length;\n      var value = this.element.value.substring(startIndex - addedValues, startIndex);\n      this.maskKeyPress = false;\n      var i = 0;\n\n      do {\n        validateValue.call(this, value[i], event.ctrlKey, event);\n        ++i;\n      } while (i < value.length);\n\n      if (this.element.value !== this.preEleVal) {\n        triggerMaskChangeEvent.call(this, event, null);\n      }\n    }\n\n    var val = strippedValue.call(this, this.element);\n    this.prevValue = val;\n    this.value = val;\n\n    if (val === '') {\n      setElementValue.call(this, this.promptMask);\n      this.element.setSelectionRange(0, 0);\n    }\n  }\n}\n\nfunction maskInputKeyDownHandler(event) {\n  if (this.mask && !this.readonly) {\n    if (event.keyCode !== 229) {\n      if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\n        event.preventDefault();\n      }\n\n      removeMaskInputValues.call(this, event);\n    }\n\n    var startValue = this.element.value;\n\n    if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\n      var collec = void 0;\n\n      if (event.keyCode === 90 && this.undoCollec.length > 0 && startValue !== this.undoCollec[this.undoCollec.length - 1].value) {\n        collec = this.undoCollec[this.undoCollec.length - 1];\n        this.redoCollec.unshift({\n          value: this.element.value,\n          startIndex: this.element.selectionStart,\n          endIndex: this.element.selectionEnd\n        });\n        setElementValue.call(this, collec.value);\n        this.element.selectionStart = collec.startIndex;\n        this.element.selectionEnd = collec.endIndex;\n        this.undoCollec.splice(this.undoCollec.length - 1, 1);\n      } else if (event.keyCode === 89 && this.redoCollec.length > 0 && startValue !== this.redoCollec[0].value) {\n        collec = this.redoCollec[0];\n        this.undoCollec.push({\n          value: this.element.value,\n          startIndex: this.element.selectionStart,\n          endIndex: this.element.selectionEnd\n        });\n        setElementValue.call(this, collec.value);\n        this.element.selectionStart = collec.startIndex;\n        this.element.selectionEnd = collec.endIndex;\n        this.redoCollec.splice(0, 1);\n      }\n    }\n  }\n}\n\nexport function mobileRemoveFunction() {\n  var collec;\n  var sIndex = this.element.selectionStart;\n  var eIndex = this.element.selectionEnd;\n\n  if (this.redoCollec.length > 0) {\n    collec = this.redoCollec[0];\n    setElementValue.call(this, collec.value);\n\n    if (collec.startIndex - sIndex === 1) {\n      this.element.selectionStart = collec.startIndex;\n      this.element.selectionEnd = collec.endIndex;\n    } else {\n      this.element.selectionStart = sIndex + 1;\n      this.element.selectionEnd = eIndex + 1;\n    }\n  } else {\n    setElementValue.call(this, this.promptMask);\n    this.element.selectionStart = this.element.selectionEnd = sIndex;\n  }\n}\n\nfunction autoFillMaskInputValues(isRemove, oldEventVal, event) {\n  if (event.type === 'input') {\n    isRemove = false;\n    oldEventVal = this.element.value;\n    setElementValue.call(this, this.promptMask);\n    setMaskValue.call(this, oldEventVal);\n  }\n\n  return isRemove;\n}\n\nfunction removeMaskInputValues(event) {\n  var isRemove = false;\n  var oldEventVal;\n  var isDeleted = false;\n\n  if (this.element.value.length < this.promptMask.length) {\n    isRemove = true;\n    oldEventVal = this.element.value;\n    isRemove = autoFillMaskInputValues.call(this, isRemove, oldEventVal, event);\n    mobileRemoveFunction.call(this);\n  }\n\n  if (this.element.value.length >= this.promptMask.length && event.type === 'input') {\n    isRemove = autoFillMaskInputValues.call(this, isRemove, oldEventVal, event);\n  }\n\n  var initStartIndex = this.element.selectionStart;\n  var initEndIndex = this.element.selectionEnd;\n  var startIndex = this.element.selectionStart;\n  var endIndex = this.element.selectionEnd;\n  var maskValue = this.hiddenMask.replace(/[>|\\\\<]/g, '');\n  var curMask = maskValue[startIndex - 1];\n  var deleteEndIndex = this.element.selectionEnd;\n\n  if (isRemove || event.keyCode === 8 || event.keyCode === 46) {\n    this.undoCollec.push({\n      value: this.element.value,\n      startIndex: this.element.selectionStart,\n      endIndex: endIndex\n    });\n    var multipleDel = false;\n    var preValue = this.element.value;\n\n    if (startIndex > 0 || (event.keyCode === 8 || event.keyCode === 46) && startIndex < this.element.value.length && this.element.selectionEnd - startIndex !== this.element.value.length) {\n      var index = startIndex;\n\n      if (startIndex !== endIndex) {\n        startIndex = endIndex;\n\n        if (event.keyCode === 46) {\n          multipleDel = true;\n        }\n      } else if (event.keyCode === 46) {\n        ++index;\n      } else {\n        --index;\n      }\n\n      for (var k = startIndex; event.keyCode === 8 || isRemove || multipleDel ? k > index : k < index; event.keyCode === 8 || isRemove || multipleDel ? k-- : k++) {\n        for (var i = startIndex; event.keyCode === 8 || isRemove || multipleDel ? i > 0 : i < this.element.value.length; event.keyCode === 8 || isRemove || multipleDel ? i-- : i++) {\n          var sIndex = void 0;\n\n          if ((event.keyCode === 8 || multipleDel) && (initStartIndex !== initEndIndex && initStartIndex !== startIndex || initStartIndex === initEndIndex) || isRemove) {\n            curMask = maskValue[i - 1];\n            sIndex = startIndex - 1;\n          } else {\n            curMask = maskValue[i];\n            sIndex = startIndex;\n            ++startIndex;\n          }\n\n          var oldValue = this.element.value[sIndex];\n\n          if (isNullOrUndefined(this.regExpCollec[curMask]) && !isNullOrUndefined(this.customCharacters) && isNullOrUndefined(this.customCharacters[curMask]) && this.hiddenMask[sIndex] !== this.promptChar && this.customRegExpCollec[sIndex][0] !== '[' && this.customRegExpCollec[sIndex][this.customRegExpCollec[sIndex].length - 1] !== ']' || this.promptMask[sIndex] !== this.promptChar && isNullOrUndefined(this.customCharacters)) {\n            this.element.selectionStart = this.element.selectionEnd = sIndex;\n            event.preventDefault();\n\n            if (event.keyCode === 46 && !multipleDel) {\n              ++this.element.selectionStart;\n            }\n          } else {\n            var value = this.element.value;\n            var prompt_1 = this.promptChar;\n            var elementValue = value.substring(0, sIndex) + prompt_1 + value.substring(startIndex, value.length);\n            setElementValue.call(this, elementValue);\n            event.preventDefault();\n\n            if (event.keyCode === 46 && !multipleDel) {\n              sIndex++;\n            }\n\n            this.element.selectionStart = this.element.selectionEnd = sIndex;\n            isDeleted = true;\n          }\n\n          startIndex = this.element.selectionStart;\n\n          if (!isDeleted && event.keyCode === 8 || multipleDel || !isDeleted && !(event.keyCode === 46)) {\n            sIndex = startIndex - 1;\n          } else {\n            sIndex = startIndex;\n            isDeleted = false;\n          }\n\n          oldValue = this.element.value[sIndex];\n\n          if (initStartIndex !== initEndIndex && this.element.selectionStart === initStartIndex || this.promptMask[sIndex] === this.promptChar || oldValue !== this.promptMask[sIndex] && this.promptMask[sIndex] !== this.promptChar && !isNullOrUndefined(this.customCharacters)) {\n            break;\n          }\n        }\n      }\n    }\n\n    if (event.keyCode === 46 && multipleDel && isDeleted) {\n      this.element.selectionStart = this.element.selectionEnd = deleteEndIndex;\n    }\n\n    if (this.element.selectionStart === 0 && this.element.selectionEnd === this.element.value.length) {\n      setElementValue.call(this, this.promptMask);\n      event.preventDefault();\n      this.element.selectionStart = this.element.selectionEnd = startIndex;\n    }\n\n    this.redoCollec.unshift({\n      value: this.element.value,\n      startIndex: this.element.selectionStart,\n      endIndex: this.element.selectionEnd\n    });\n\n    if (this.element.value !== preValue) {\n      triggerMaskChangeEvent.call(this, event, oldEventVal);\n    }\n  }\n}\n\nfunction maskInputKeyPressHandler(event) {\n  if (this.mask && !this.readonly) {\n    var oldValue = this.element.value;\n\n    if (!event.ctrlKey || event.ctrlKey && event.code !== 'KeyA' && event.code !== 'KeyY' && event.code !== 'KeyZ' && event.code !== 'KeyX' && event.code !== 'KeyC' && event.code !== 'KeyV') {\n      this.maskKeyPress = true;\n      var key = event.key;\n\n      if (key === 'Spacebar') {\n        key = String.fromCharCode(event.keyCode);\n      }\n\n      if (!key) {\n        this.isIosInvalid = true;\n        validateValue.call(this, String.fromCharCode(event.keyCode), event.ctrlKey, event);\n        event.preventDefault();\n        this.isIosInvalid = false;\n      } else if (key && key.length === 1) {\n        validateValue.call(this, key, event.ctrlKey, event);\n        event.preventDefault();\n      }\n\n      if (event.keyCode === 32 && key === ' ' && this.promptChar === ' ') {\n        this.element.selectionStart = this.element.selectionEnd = this.element.selectionStart - key.length;\n      }\n    }\n\n    if (this.element.value !== oldValue) {\n      triggerMaskChangeEvent.call(this, event, oldValue);\n    }\n  }\n} // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\nfunction triggerMaskChangeEvent(event, oldValue) {\n  var prevOnChange = this.isProtectedOnChange;\n\n  if (!isNullOrUndefined(this.changeEventArgs) && !this.isInitial) {\n    var eventArgs = {};\n    this.changeEventArgs = {\n      value: this.element.value,\n      maskedValue: this.element.value,\n      isInteraction: false,\n      isInteracted: false\n    };\n\n    if (this.mask) {\n      this.changeEventArgs.value = strippedValue.call(this, this.element);\n    }\n\n    if (!isNullOrUndefined(event)) {\n      this.changeEventArgs.isInteracted = true;\n      this.changeEventArgs.isInteraction = true;\n      this.changeEventArgs.event = event;\n    }\n\n    this.isProtectedOnChange = true;\n    this.value = this.changeEventArgs.value;\n    this.isProtectedOnChange = prevOnChange;\n    merge(eventArgs, this.changeEventArgs);\n    /* istanbul ignore next */\n\n    if (this.isAngular && this.preventChange) {\n      this.preventChange = false;\n    } else {\n      this.trigger('change', eventArgs);\n    }\n  }\n\n  this.preEleVal = this.element.value;\n  this.prevValue = strippedValue.call(this, this.element);\n  attributes(this.element, {\n    'aria-valuenow': this.element.value\n  });\n}\n\nfunction maskInputKeyUpHandler(event) {\n  if (this.mask && !this.readonly) {\n    var collec = void 0;\n\n    if (!this.maskKeyPress && event.keyCode === 229) {\n      var oldEventVal = void 0;\n\n      if (this.element.value.length === 1) {\n        this.element.value = this.element.value + this.promptMask;\n        this.element.setSelectionRange(1, 1);\n      }\n\n      if (this.element.value.length > this.promptMask.length) {\n        var startIndex = this.element.selectionStart;\n        var addedValues = this.element.value.length - this.promptMask.length;\n        var val_1 = this.element.value.substring(startIndex - addedValues, startIndex);\n\n        if (this.undoCollec.length > 0) {\n          collec = this.undoCollec[this.undoCollec.length - 1];\n          var startIndex_1 = this.element.selectionStart;\n          oldEventVal = collec.value;\n          var oldVal = collec.value.substring(startIndex_1 - addedValues, startIndex_1);\n          collec = this.redoCollec[0];\n          val_1 = val_1.trim();\n          var isSpace = Browser.isAndroid && val_1 === '';\n\n          if (!isSpace && oldVal !== val_1 && collec.value.substring(startIndex_1 - addedValues, startIndex_1) !== val_1) {\n            validateValue.call(this, val_1, event.ctrlKey, event);\n          } else if (isSpace) {\n            preventUnsupportedValues.call(this, event, startIndex_1 - 1, this.element.selectionEnd - 1, val_1, event.ctrlKey, false);\n          }\n        } else {\n          oldEventVal = this.promptMask;\n          validateValue.call(this, val_1, event.ctrlKey, event);\n        }\n\n        this.maskKeyPress = false;\n        triggerMaskChangeEvent.call(this, event, oldEventVal);\n      }\n    } else {\n      removeMaskError.call(this);\n    }\n\n    var val = strippedValue.call(this, this.element);\n\n    if (!(this.element.selectionStart === 0 && this.promptMask === this.element.value && val === '') || val === '' && this.value !== val) {\n      this.prevValue = val;\n      this.value = val;\n    }\n  } else {\n    triggerMaskChangeEvent.call(this, event);\n  }\n\n  if (this.element.selectionStart === 0 && this.element.selectionEnd === 0) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var temp_1 = this.element;\n    setTimeout(function () {\n      temp_1.setSelectionRange(0, 0);\n    }, 0);\n  }\n}\n\nfunction mobileSwipeCheck(key) {\n  if (key.length > 1 && this.promptMask.length + key.length < this.element.value.length) {\n    var elementValue = this.redoCollec[0].value.substring(0, this.redoCollec[0].startIndex) + key + this.redoCollec[0].value.substring(this.redoCollec[0].startIndex, this.redoCollec[0].value.length);\n    setElementValue.call(this, elementValue);\n    this.element.selectionStart = this.element.selectionEnd = this.redoCollec[0].startIndex + key.length;\n  }\n\n  this.element.selectionStart = this.element.selectionStart - key.length;\n  this.element.selectionEnd = this.element.selectionEnd - key.length;\n}\n\nfunction mobileValidation(key) {\n  if (!this.maskKeyPress) {\n    mobileSwipeCheck.call(this, key);\n  }\n}\n\nfunction validateValue(key, isCtrlKey, event) {\n  mobileValidation.call(this, key);\n\n  if (isNullOrUndefined(this) || isNullOrUndefined(key)) {\n    return;\n  }\n\n  var startIndex = this.element.selectionStart;\n  var initStartIndex = startIndex;\n  var curMask;\n  var allowText = false;\n  var value = this.element.value;\n  var eventOldVal;\n  var prevSupport = false;\n  var isEqualVal = false;\n\n  for (var k = 0; k < key.length; k++) {\n    var keyValue = key[k];\n    startIndex = this.element.selectionStart;\n\n    if (!this.maskKeyPress && initStartIndex === startIndex) {\n      startIndex = startIndex + k;\n    }\n\n    if (!this.maskKeyPress || startIndex < this.promptMask.length) {\n      for (var i = startIndex; i < this.promptMask.length; i++) {\n        var maskValue = this.escapeMaskValue;\n        curMask = maskValue[startIndex];\n\n        if (this.hiddenMask[startIndex] === '\\\\' && this.hiddenMask[startIndex + 1] === key) {\n          isEqualVal = true;\n        }\n\n        if (isNullOrUndefined(this.regExpCollec[curMask]) && (isNullOrUndefined(this.customCharacters) || !isNullOrUndefined(this.customCharacters) && isNullOrUndefined(this.customCharacters[curMask])) && this.hiddenMask[startIndex] !== this.promptChar && this.customRegExpCollec[startIndex][0] !== '[' && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] !== ']' || this.promptMask[startIndex] !== this.promptChar && isNullOrUndefined(this.customCharacters) || this.promptChar === curMask && this.escapeMaskValue === this.mask) {\n          this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\n          startIndex = this.element.selectionStart;\n          curMask = this.hiddenMask[startIndex];\n        }\n      }\n\n      if (!isNullOrUndefined(this.customCharacters) && !isNullOrUndefined(this.customCharacters[curMask])) {\n        var customValStr = this.customCharacters[curMask];\n        var customValArr = customValStr.split(',');\n\n        for (var i = 0; i < customValArr.length; i++) {\n          if (keyValue.match(new RegExp('[' + customValArr[i] + ']'))) {\n            allowText = true;\n            break;\n          }\n        }\n      } else if (!isNullOrUndefined(this.regExpCollec[curMask]) && keyValue.match(new RegExp(this.regExpCollec[curMask])) && this.promptMask[startIndex] === this.promptChar) {\n        allowText = true;\n      } else if (this.promptMask[startIndex] === this.promptChar && this.customRegExpCollec[startIndex][0] === '[' && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] === ']' && keyValue.match(new RegExp(this.customRegExpCollec[startIndex]))) {\n        allowText = true;\n      }\n\n      if ((!this.maskKeyPress || startIndex < this.hiddenMask.length) && allowText) {\n        if (k === 0) {\n          if (this.maskKeyPress) {\n            this.undoCollec.push({\n              value: value,\n              startIndex: startIndex,\n              endIndex: startIndex\n            });\n          } else {\n            var sIndex = this.element.selectionStart;\n            var eIndex = this.element.selectionEnd;\n\n            if (this.redoCollec.length > 0) {\n              eventOldVal = this.redoCollec[0].value;\n              setElementValue.call(this, eventOldVal);\n              this.undoCollec.push(this.redoCollec[0]);\n            } else {\n              this.undoCollec.push({\n                value: this.promptMask,\n                startIndex: startIndex,\n                endIndex: startIndex\n              });\n              eventOldVal = this.promptMask;\n              setElementValue.call(this, eventOldVal);\n            }\n\n            this.element.selectionStart = sIndex;\n            this.element.selectionEnd = eIndex;\n          }\n        }\n\n        startIndex = this.element.selectionStart;\n        applySupportedValues.call(this, event, startIndex, keyValue, eventOldVal, isEqualVal);\n        prevSupport = true;\n\n        if (k === key.length - 1) {\n          this.redoCollec.unshift({\n            value: this.element.value,\n            startIndex: this.element.selectionStart,\n            endIndex: this.element.selectionEnd\n          });\n        }\n\n        allowText = false;\n      } else {\n        startIndex = this.element.selectionStart;\n        preventUnsupportedValues.call(this, event, startIndex, initStartIndex, key, isCtrlKey, prevSupport);\n      }\n\n      if (k === key.length - 1 && !allowText) {\n        if (!Browser.isAndroid || Browser.isAndroid && startIndex < this.promptMask.length) {\n          this.redoCollec.unshift({\n            value: this.element.value,\n            startIndex: this.element.selectionStart,\n            endIndex: this.element.selectionEnd\n          });\n        }\n      }\n    } else {\n      if (key.length === 1 && !isCtrlKey && !isNullOrUndefined(event)) {\n        addMaskErrorClass.call(this);\n      }\n    }\n  }\n}\n\nfunction applySupportedValues(event, startIndex, keyValue, eventOldVal, isEqualVal) {\n  if (this.hiddenMask.length > this.promptMask.length) {\n    keyValue = changeToLowerUpperCase.call(this, keyValue, this.element.value);\n  }\n\n  if (!isEqualVal) {\n    var value = this.element.value;\n    var elementValue = value.substring(0, startIndex) + keyValue + value.substring(startIndex + 1, value.length);\n    setElementValue.call(this, elementValue);\n    this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\n  }\n}\n\nfunction preventUnsupportedValues(event, sIdx, idx, key, ctrl, chkSupport) {\n  if (!this.maskKeyPress) {\n    var value = this.element.value;\n\n    if (sIdx >= this.promptMask.length) {\n      setElementValue.call(this, value.substring(0, sIdx));\n    } else {\n      if (idx === sIdx) {\n        setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx + 1, value.length));\n      } else {\n        if (this.promptMask.length === this.element.value.length) {\n          setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx, value.length));\n        } else {\n          setElementValue.call(this, value.substring(0, idx) + value.substring(idx + 1, value.length));\n        }\n      }\n\n      this.element.selectionStart = this.element.selectionEnd = chkSupport || this.element.value[idx] !== this.promptChar ? sIdx : idx;\n    }\n\n    addMaskErrorClass.call(this);\n  }\n\n  if (key.length === 1 && !ctrl && !isNullOrUndefined(event)) {\n    addMaskErrorClass.call(this);\n  }\n}\n\nfunction addMaskErrorClass() {\n  var _this = this;\n\n  var parentElement = this.element.parentNode;\n  var timer = 200;\n\n  if (parentElement.classList.contains(INPUTGROUP) || parentElement.classList.contains(FLOATINPUT)) {\n    addClass([parentElement], ERROR);\n  } else {\n    addClass([this.element], ERROR);\n  }\n\n  if (this.isIosInvalid === true) {\n    timer = 400;\n  }\n\n  attributes(this.element, {\n    'aria-invalid': 'true'\n  });\n  setTimeout(function () {\n    if (!_this.maskKeyPress) {\n      removeMaskError.call(_this);\n    }\n  }, timer);\n}\n\nfunction removeMaskError() {\n  var parentElement = this.element.parentNode;\n\n  if (!isNullOrUndefined(parentElement)) {\n    removeClass([parentElement], ERROR);\n  }\n\n  removeClass([this.element], ERROR);\n  attributes(this.element, {\n    'aria-invalid': 'false'\n  });\n}\n/**\n * Validates user input using masking elements '<' , '>' and '|'.\n *\n * @hidden\n */\n\n\nfunction changeToLowerUpperCase(key, value) {\n  var promptMask;\n  var i;\n  var curVal = value;\n  var caseCount = 0;\n\n  for (i = 0; i < this.hiddenMask.length; i++) {\n    if (this.hiddenMask[i] === '\\\\') {\n      promptMask = curVal.substring(0, i) + '\\\\' + curVal.substring(i, curVal.length);\n    }\n\n    if (this.hiddenMask[i] === '>' || this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|') {\n      if (this.hiddenMask[i] !== curVal[i]) {\n        promptMask = curVal.substring(0, i) + this.hiddenMask[i] + curVal.substring(i, curVal.length);\n      }\n\n      ++caseCount;\n    }\n\n    if (promptMask) {\n      if (promptMask[i] === this.promptChar && i > this.element.selectionStart || this.element.value.indexOf(this.promptChar) < 0 && this.element.selectionStart + caseCount === i) {\n        caseCount = 0;\n        break;\n      }\n\n      curVal = promptMask;\n    }\n  }\n\n  while (i >= 0 && promptMask) {\n    if (i === 0 || promptMask[i - 1] !== '\\\\') {\n      if (promptMask[i] === '>') {\n        key = key.toUpperCase();\n        break;\n      } else if (promptMask[i] === '<') {\n        key = key.toLowerCase();\n        break;\n      } else if (promptMask[i] === '|') {\n        break;\n      }\n    }\n\n    --i;\n  }\n\n  return key;\n}\n/**\n * To set updated values in the MaskedTextBox.\n *\n * @hidden\n */\n\n\nexport function setMaskValue(val) {\n  if (this.mask && val !== undefined && (this.prevValue === undefined || this.prevValue !== val)) {\n    this.maskKeyPress = true;\n    setElementValue.call(this, this.promptMask);\n\n    if (val !== '' && !(val === null && this.floatLabelType === 'Never' && this.placeholder)) {\n      this.element.selectionStart = 0;\n      this.element.selectionEnd = 0;\n    }\n\n    if (val !== null) {\n      for (var i = 0; i < val.length; i++) {\n        validateValue.call(this, val[i], false, null);\n      }\n    }\n\n    var newVal = strippedValue.call(this, this.element);\n    this.prevValue = newVal;\n    this.value = newVal;\n    triggerMaskChangeEvent.call(this, null, null);\n    this.maskKeyPress = false;\n    var labelElement = this.element.parentNode.querySelector('.e-float-text');\n\n    if (this.element.value === this.promptMask && this.floatLabelType === 'Auto' && this.placeholder && !isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL) && !this.isFocus) {\n      removeClass([labelElement], TOPLABEL);\n      addClass([labelElement], BOTTOMLABEL);\n      setElementValue.call(this, '');\n    }\n  }\n\n  if (this.mask === null || this.mask === '' && this.value !== undefined) {\n    setElementValue.call(this, this.value);\n  }\n}\n/**\n * To set updated values in the input element.\n *\n * @hidden\n */\n\nexport function setElementValue(val, element) {\n  if (!this.isFocus && this.floatLabelType === 'Auto' && this.placeholder && isNullOrUndefined(this.value)) {\n    val = '';\n  }\n\n  var value = strippedValue.call(this, element ? element : this.element, val);\n\n  if (value === null || value === '') {\n    Input.setValue(val, element ? element : this.element, this.floatLabelType, false);\n\n    if (this.showClearButton) {\n      this.inputObj.clearButton.classList.add('e-clear-icon-hide');\n    }\n  } else {\n    Input.setValue(val, element ? element : this.element, this.floatLabelType, this.showClearButton);\n  }\n}\n/**\n * Provide mask support to input textbox through utility method.\n *\n * @hidden\n */\n\nexport function maskInput(args) {\n  var inputEle = getMaskInput(args);\n  applyMask.call(inputEle);\n  var val = strippedValue.call(this, this.element);\n  this.prevValue = val;\n  this.value = val;\n\n  if (args.mask) {\n    unwireEvents.call(inputEle);\n    wireEvents.call(inputEle);\n  }\n}\n\nfunction getMaskInput(args) {\n  addClass([args.element], UTILMASK);\n  var inputEle = {\n    element: args.element,\n    mask: args.mask,\n    promptMask: '',\n    hiddenMask: '',\n    escapeMaskValue: '',\n    promptChar: args.promptChar ? args.promptChar.length > 1 ? args.promptChar = args.promptChar[0] : args.promptChar : '_',\n    value: args.value ? args.value : null,\n    regExpCollec: regularExpressions,\n    customRegExpCollec: [],\n    customCharacters: args.customCharacters,\n    undoCollec: [],\n    redoCollec: [],\n    maskKeyPress: false,\n    prevValue: ''\n  };\n  createMask.call(inputEle);\n  return inputEle;\n}\n/**\n * Gets raw value of the textbox which has been masked through utility method.\n *\n * @hidden\n */\n\n\nexport function getVal(args) {\n  return strippedValue.call(getUtilMaskEle(args), args.element);\n}\n/**\n * Gets masked value of the textbox which has been masked through utility method.\n *\n * @hidden\n */\n\nexport function getMaskedVal(args) {\n  return unstrippedValue.call(getUtilMaskEle(args), args.element);\n}\n\nfunction getUtilMaskEle(args) {\n  var inputEle;\n\n  if (!isNullOrUndefined(args) && args.element.classList.contains(UTILMASK)) {\n    inputEle = getMaskInput(args);\n  }\n\n  return inputEle;\n}\n/**\n * Arguments to perform undo and redo functionalities.\n *\n * @hidden\n */\n\n\nvar MaskUndo =\n/** @class */\nfunction () {\n  function MaskUndo() {}\n\n  return MaskUndo;\n}();\n\nexport { MaskUndo }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\nvar maskUndo = new MaskUndo();\n/* eslint-enable valid-jsdoc, jsdoc/require-jsdoc, jsdoc/require-returns, jsdoc/require-param */","map":{"version":3,"names":["EventHandler","isNullOrUndefined","merge","attributes","addClass","removeClass","Browser","extend","Input","ERROR","INPUTGROUP","FLOATINPUT","UTILMASK","TOPLABEL","BOTTOMLABEL","regularExpressions","createMask","element","mask","splitMask","split","i","length","splitInnerMask","j","pushIntoRegExpCollec","call","chkSpace","customRegExpCollec","push","hiddenMask","promptChar","escapeMaskValue","promptMask","replace","customCharacters","RegExp","escapeNumber","match","substring","applyMask","setElementValue","setMaskValue","value","wireEvents","add","maskInputKeyDownHandler","maskInputKeyPressHandler","maskInputKeyUpHandler","maskInputHandler","maskInputFocusHandler","maskInputBlurHandler","maskInputPasteHandler","maskInputCutHandler","maskInputDropHandler","maskInputMouseDownHandler","maskInputMouseUpHandler","enabled","bindClearEvent","formElement","resetFormHandler","unwireEvents","remove","showClearButton","inputObj","clearButton","resetHandler","e","preventDefault","classList","contains","container","clear","event","redoCollec","unshift","startIndex","selectionStart","endIndex","selectionEnd","triggerMaskChangeEvent","setSelectionRange","tagName","initInputValue","unstrippedValue","strippedValue","maskValues","k","checkMask","maskValue","_callPasteHandler","regExpCollec","undefined","isClicked","_this","inputElement","modelValue","toAllowForward","toAllowBackward","eventArgs","maskedValue","triggerFocus","floatLabelType","placeholder","setTimeout","backSelectionStart","trigger","blurEventArgs","isFocus","labelElement","parentNode","querySelector","readonly","sIndex_1","eIndex_1","oldValue_1","maskKeyPress","validateValue","i_1","preValue_1","sIndex_2","eIndex","undoCollec","value_1","isIE","ctrlKey","keyCode","removeMaskInputValues","addedValues","preEleVal","val","prevValue","startValue","collec","splice","mobileRemoveFunction","sIndex","autoFillMaskInputValues","isRemove","oldEventVal","type","isDeleted","initStartIndex","initEndIndex","curMask","deleteEndIndex","multipleDel","preValue","index","oldValue","prompt_1","elementValue","code","key","String","fromCharCode","isIosInvalid","prevOnChange","isProtectedOnChange","changeEventArgs","isInitial","isInteraction","isInteracted","isAngular","preventChange","val_1","startIndex_1","oldVal","trim","isSpace","isAndroid","preventUnsupportedValues","removeMaskError","temp_1","mobileSwipeCheck","mobileValidation","isCtrlKey","allowText","eventOldVal","prevSupport","isEqualVal","keyValue","customValStr","customValArr","applySupportedValues","addMaskErrorClass","changeToLowerUpperCase","sIdx","idx","ctrl","chkSupport","parentElement","timer","curVal","caseCount","indexOf","toUpperCase","toLowerCase","newVal","setValue","maskInput","args","inputEle","getMaskInput","getVal","getUtilMaskEle","getMaskedVal","MaskUndo","maskUndo"],"sources":["C:/Users/leezh/Documents/Coding/Orbital Test/Orbital-Duty-Planner/node_modules/@syncfusion/ej2-inputs/src/maskedtextbox/base/mask-base.js"],"sourcesContent":["/* eslint-disable valid-jsdoc, jsdoc/require-jsdoc, jsdoc/require-returns, jsdoc/require-param */\n/**\n * MaskedTextBox base module\n */\nimport { EventHandler, isNullOrUndefined, merge, attributes, addClass, removeClass, Browser, extend } from '@syncfusion/ej2-base';\nimport { Input } from '../../input/input';\nvar ERROR = 'e-error';\nvar INPUTGROUP = 'e-input-group';\nvar FLOATINPUT = 'e-float-input';\nvar UTILMASK = 'e-utility-mask';\nvar TOPLABEL = 'e-label-top';\nvar BOTTOMLABEL = 'e-label-bottom';\n/**\n * @hidden\n * Built-in masking elements collection.\n */\nexport var regularExpressions = {\n    '0': '[0-9]',\n    '9': '[0-9 ]',\n    '#': '[0-9 +-]',\n    'L': '[A-Za-z]',\n    '?': '[A-Za-z ]',\n    '&': '[^\\x7f ]+',\n    'C': '[^\\x7f]+',\n    'A': '[A-Za-z0-9]',\n    'a': '[A-Za-z0-9 ]'\n};\n/**\n * Generate required masking elements to the MaskedTextBox from user mask input.\n *\n * @hidden\n */\nexport function createMask() {\n    attributes(this.element, {\n        'role': 'textbox', 'autocomplete': 'off', 'autocorrect': 'off', 'autocapitalize': 'off',\n        'spellcheck': 'false', 'aria-live': 'assertive', 'aria-valuenow': ''\n    });\n    if (this.mask) {\n        var splitMask = this.mask.split(']');\n        for (var i = 0; i < splitMask.length; i++) {\n            if (splitMask[i][splitMask[i].length - 1] === '\\\\') {\n                splitMask[i] = splitMask[i] + ']';\n                var splitInnerMask = splitMask[i].split('[');\n                for (var j = 0; j < splitInnerMask.length; j++) {\n                    if (splitInnerMask[j][splitInnerMask[j].length - 1] === '\\\\') {\n                        splitInnerMask[j] = splitInnerMask[j] + '[';\n                    }\n                    pushIntoRegExpCollec.call(this, splitInnerMask[j]);\n                }\n            }\n            else {\n                var splitInnerMask = splitMask[i].split('[');\n                if (splitInnerMask.length > 1) {\n                    var chkSpace = false;\n                    for (var j = 0; j < splitInnerMask.length; j++) {\n                        if (splitInnerMask[j] === '\\\\') {\n                            this.customRegExpCollec.push('[');\n                            this.hiddenMask += splitInnerMask[j] + '[';\n                        }\n                        else if (splitInnerMask[j] === '') {\n                            chkSpace = true;\n                        }\n                        else if ((splitInnerMask[j] !== '' && chkSpace) || j === splitInnerMask.length - 1) {\n                            this.customRegExpCollec.push('[' + splitInnerMask[j] + ']');\n                            this.hiddenMask += this.promptChar;\n                            chkSpace = false;\n                        }\n                        else {\n                            pushIntoRegExpCollec.call(this, splitInnerMask[j]);\n                        }\n                    }\n                }\n                else {\n                    pushIntoRegExpCollec.call(this, splitInnerMask[0]);\n                }\n            }\n        }\n        this.escapeMaskValue = this.hiddenMask;\n        this.promptMask = this.hiddenMask.replace(/[09?LCAa#&]/g, this.promptChar);\n        if (!isNullOrUndefined(this.customCharacters)) {\n            for (var i = 0; i < this.promptMask.length; i++) {\n                if (!isNullOrUndefined(this.customCharacters[this.promptMask[i]])) {\n                    this.promptMask = this.promptMask.replace(new RegExp(this.promptMask[i], 'g'), this.promptChar);\n                }\n            }\n        }\n        var escapeNumber = 0;\n        if (this.hiddenMask.match(new RegExp(/\\\\/))) {\n            for (var i = 0; i < this.hiddenMask.length; i++) {\n                var j = 0;\n                if (i >= 1) {\n                    j = i;\n                }\n                escapeNumber = this.hiddenMask.length - this.promptMask.length;\n                j = j - escapeNumber;\n                if ((i > 0 && this.hiddenMask[i - 1] !== '\\\\') && (this.hiddenMask[i] === '>' ||\n                    this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|')) {\n                    this.promptMask = this.promptMask.substring(0, j) +\n                        this.promptMask.substring((i + 1) - escapeNumber, this.promptMask.length);\n                    this.escapeMaskValue = this.escapeMaskValue.substring(0, j) +\n                        this.escapeMaskValue.substring((i + 1) - escapeNumber, this.escapeMaskValue.length);\n                }\n                if (this.hiddenMask[i] === '\\\\') {\n                    this.promptMask = this.promptMask.substring(0, j) + this.hiddenMask[i + 1] +\n                        this.promptMask.substring((i + 2) - escapeNumber, this.promptMask.length);\n                    this.escapeMaskValue = this.escapeMaskValue.substring(0, j) + this.escapeMaskValue[i + 1] +\n                        this.escapeMaskValue.substring((i + 2) - escapeNumber, this.escapeMaskValue.length);\n                }\n            }\n        }\n        else {\n            this.promptMask = this.promptMask.replace(/[>|<]/g, '');\n            this.escapeMaskValue = this.hiddenMask.replace(/[>|<]/g, '');\n        }\n        attributes(this.element, { 'aria-invalid': 'false' });\n    }\n}\n/**\n * Apply mask ability with masking elements to the MaskedTextBox.\n *\n * @hidden\n */\nexport function applyMask() {\n    setElementValue.call(this, this.promptMask);\n    setMaskValue.call(this, this.value);\n}\n/**\n * To wire required events to the MaskedTextBox.\n *\n * @hidden\n */\nexport function wireEvents() {\n    EventHandler.add(this.element, 'keydown', maskInputKeyDownHandler, this);\n    EventHandler.add(this.element, 'keypress', maskInputKeyPressHandler, this);\n    EventHandler.add(this.element, 'keyup', maskInputKeyUpHandler, this);\n    EventHandler.add(this.element, 'input', maskInputHandler, this);\n    EventHandler.add(this.element, 'focus', maskInputFocusHandler, this);\n    EventHandler.add(this.element, 'blur', maskInputBlurHandler, this);\n    EventHandler.add(this.element, 'paste', maskInputPasteHandler, this);\n    EventHandler.add(this.element, 'cut', maskInputCutHandler, this);\n    EventHandler.add(this.element, 'drop', maskInputDropHandler, this);\n    EventHandler.add(this.element, 'mousedown', maskInputMouseDownHandler, this);\n    EventHandler.add(this.element, 'mouseup', maskInputMouseUpHandler, this);\n    if (this.enabled) {\n        bindClearEvent.call(this);\n        if (this.formElement) {\n            EventHandler.add(this.formElement, 'reset', resetFormHandler, this);\n        }\n    }\n}\n/**\n * To unwire events attached to the MaskedTextBox.\n *\n * @hidden\n */\nexport function unwireEvents() {\n    EventHandler.remove(this.element, 'keydown', maskInputKeyDownHandler);\n    EventHandler.remove(this.element, 'keypress', maskInputKeyPressHandler);\n    EventHandler.remove(this.element, 'keyup', maskInputKeyUpHandler);\n    EventHandler.remove(this.element, 'input', maskInputHandler);\n    EventHandler.remove(this.element, 'focus', maskInputFocusHandler);\n    EventHandler.remove(this.element, 'blur', maskInputBlurHandler);\n    EventHandler.remove(this.element, 'paste', maskInputPasteHandler);\n    EventHandler.remove(this.element, 'cut', maskInputCutHandler);\n    EventHandler.remove(this.element, 'mousedown', maskInputMouseDownHandler);\n    EventHandler.remove(this.element, 'mouseup', maskInputMouseUpHandler);\n    if (this.formElement) {\n        EventHandler.remove(this.formElement, 'reset', resetFormHandler);\n    }\n}\n/**\n * To bind required events to the MaskedTextBox clearButton.\n *\n * @hidden\n */\nexport function bindClearEvent() {\n    if (this.showClearButton) {\n        EventHandler.add(this.inputObj.clearButton, 'mousedown touchstart', resetHandler, this);\n    }\n}\nfunction resetHandler(e) {\n    e.preventDefault();\n    if (!this.inputObj.clearButton.classList.contains('e-clear-icon-hide') || (this.inputObj.container.classList.contains('e-static-clear'))) {\n        clear.call(this, e);\n        this.value = '';\n    }\n}\nfunction clear(event) {\n    var value = this.element.value;\n    setElementValue.call(this, this.promptMask);\n    this.redoCollec.unshift({\n        value: this.promptMask, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd\n    });\n    triggerMaskChangeEvent.call(this, event, value);\n    this.element.setSelectionRange(0, 0);\n}\nfunction resetFormHandler() {\n    if (this.element.tagName === 'EJS-MASKEDTEXTBOX') {\n        setElementValue.call(this, this.promptMask);\n    }\n    else {\n        this.value = this.initInputValue;\n    }\n}\n/**\n * To get masked value from the MaskedTextBox.\n *\n * @hidden\n */\nexport function unstrippedValue(element) {\n    return element.value;\n}\n/**\n * To extract raw value from the MaskedTextBox.\n *\n * @hidden\n */\nexport function strippedValue(element, maskValues) {\n    var value = '';\n    var k = 0;\n    var checkMask = false;\n    var maskValue = (!isNullOrUndefined(maskValues)) ? maskValues : (!isNullOrUndefined(element) &&\n        !isNullOrUndefined(this)) ? element.value : maskValues;\n    if (maskValue !== this.promptMask) {\n        for (var i = 0; i < this.customRegExpCollec.length; i++) {\n            if (checkMask) {\n                checkMask = false;\n            }\n            if (this.customRegExpCollec[k] === '>' || this.customRegExpCollec[k] === '<' ||\n                this.customRegExpCollec[k] === '|' || this.customRegExpCollec[k] === '\\\\') {\n                --i;\n                checkMask = true;\n            }\n            if (!checkMask) {\n                if ((maskValue[i] !== this.promptChar) && (!isNullOrUndefined(this.customRegExpCollec[k]) &&\n                    ((this._callPasteHandler || !isNullOrUndefined(this.regExpCollec[this.customRegExpCollec[k]])) ||\n                        (this.customRegExpCollec[k].length > 2 && this.customRegExpCollec[k][0] === '[' &&\n                            this.customRegExpCollec[k][this.customRegExpCollec[k].length - 1] === ']') ||\n                        (!isNullOrUndefined(this.customCharacters) &&\n                            (!isNullOrUndefined(this.customCharacters[this.customRegExpCollec[k]]))))) && (maskValue !== '')) {\n                    value += maskValue[i];\n                }\n            }\n            ++k;\n        }\n    }\n    if (this.mask === null || this.mask === '' && this.value !== undefined) {\n        value = maskValue;\n    }\n    return value;\n}\nfunction pushIntoRegExpCollec(value) {\n    for (var k = 0; k < value.length; k++) {\n        this.hiddenMask += value[k];\n        if (value[k] !== '\\\\') {\n            this.customRegExpCollec.push(value[k]);\n        }\n    }\n}\nexport function maskInputMouseDownHandler() {\n    this.isClicked = true;\n}\nexport function maskInputMouseUpHandler() {\n    this.isClicked = false;\n}\nexport function maskInputFocusHandler(event) {\n    var _this = this;\n    var inputElement = this.element;\n    var startIndex = 0;\n    var modelValue = strippedValue.call(this, inputElement);\n    var toAllowForward = false;\n    var toAllowBackward = false;\n    var eventArgs = {\n        selectionStart: inputElement.selectionStart,\n        event: event,\n        value: this.value,\n        maskedValue: inputElement.value,\n        container: this.inputObj.container,\n        selectionEnd: inputElement.selectionEnd\n    };\n    if (!this.isClicked) {\n        triggerFocus.call(this, eventArgs, inputElement);\n    }\n    if (this.mask) {\n        if (!(!(modelValue === null || modelValue === '') || this.floatLabelType === 'Always' ||\n            this.placeholder === null || this.placeholder === '')) {\n            inputElement.value = this.promptMask;\n        }\n        setTimeout(function () {\n            if (inputElement.selectionStart === _this.promptMask.length ||\n                inputElement.value[inputElement.selectionStart] === _this.promptChar) {\n                toAllowForward = true;\n            }\n            else {\n                for (var i = inputElement.selectionStart; i < _this.promptMask.length; i++) {\n                    if (inputElement.value[i] !== _this.promptChar) {\n                        if ((inputElement.value[i] !== _this.promptMask[i])) {\n                            toAllowForward = false;\n                            break;\n                        }\n                    }\n                    else {\n                        toAllowForward = true;\n                        break;\n                    }\n                }\n            }\n        });\n        setTimeout(function () {\n            var backSelectionStart = inputElement.selectionStart - 1;\n            if (backSelectionStart === _this.promptMask.length - 1 ||\n                inputElement.value[backSelectionStart] === _this.promptChar) {\n                toAllowBackward = true;\n            }\n            else {\n                for (var i = backSelectionStart; i >= 0; i--) {\n                    if (inputElement.value[i] !== _this.promptChar) {\n                        if ((inputElement.value[i] !== _this.promptMask[i])) {\n                            toAllowBackward = false;\n                            break;\n                        }\n                    }\n                    else {\n                        toAllowBackward = true;\n                        break;\n                    }\n                }\n            }\n        });\n        if ((this.isClicked || (this.floatLabelType !== 'Always' &&\n            ((modelValue === null || modelValue === '') &&\n                (this.placeholder !== null && this.placeholder !== ''))))) {\n            for (startIndex = 0; startIndex < this.promptMask.length; startIndex++) {\n                if (inputElement.value[startIndex] === this.promptChar) {\n                    setTimeout(function () {\n                        if (toAllowForward || toAllowBackward) {\n                            inputElement.selectionEnd = startIndex;\n                            inputElement.selectionStart = startIndex;\n                        }\n                        eventArgs = {\n                            selectionStart: inputElement.selectionStart,\n                            event: event,\n                            value: _this.value,\n                            maskedValue: inputElement.value,\n                            container: _this.inputObj.container,\n                            selectionEnd: inputElement.selectionEnd\n                        };\n                        triggerFocus.call(_this, eventArgs, inputElement);\n                    });\n                    break;\n                }\n            }\n            if (isNullOrUndefined(inputElement.value.match(this.promptChar))) {\n                eventArgs = {\n                    selectionStart: inputElement.selectionStart,\n                    event: event,\n                    value: this.value,\n                    maskedValue: inputElement.value,\n                    container: this.inputObj.container,\n                    selectionEnd: inputElement.selectionEnd\n                };\n                triggerFocus.call(this, eventArgs, inputElement);\n            }\n            this.isClicked = false;\n        }\n    }\n}\nexport function triggerFocus(eventArgs, inputElement) {\n    this.trigger('focus', eventArgs, function (eventArgs) {\n        inputElement.selectionStart = eventArgs.selectionStart;\n        inputElement.selectionEnd = eventArgs.selectionEnd;\n    });\n}\nexport function maskInputBlurHandler(event) {\n    this.blurEventArgs = {\n        event: event,\n        value: this.value,\n        maskedValue: this.element.value,\n        container: this.inputObj.container\n    };\n    this.trigger('blur', this.blurEventArgs);\n    if (this.mask) {\n        this.isFocus = false;\n        if (this.placeholder && this.element.value === this.promptMask && this.floatLabelType !== 'Always') {\n            setElementValue.call(this, '');\n            var labelElement = this.element.parentNode.querySelector('.e-float-text');\n            if (this.floatLabelType === 'Auto' && !isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL)) {\n                removeClass([labelElement], TOPLABEL);\n            }\n        }\n    }\n}\nfunction maskInputPasteHandler(event) {\n    var _this = this;\n    if (this.mask && !this.readonly) {\n        var sIndex_1 = this.element.selectionStart;\n        var eIndex_1 = this.element.selectionEnd;\n        var oldValue_1 = this.element.value;\n        setElementValue.call(this, '');\n        this._callPasteHandler = true;\n        setTimeout(function () {\n            var value = _this.element.value.replace(/ /g, '');\n            if (_this.redoCollec.length > 0 && _this.redoCollec[0].value === _this.element.value) {\n                value = strippedValue.call(_this, _this.element);\n            }\n            setElementValue.call(_this, oldValue_1);\n            _this.element.selectionStart = sIndex_1;\n            _this.element.selectionEnd = eIndex_1;\n            var i = 0;\n            _this.maskKeyPress = true;\n            do {\n                validateValue.call(_this, value[i], false, null);\n                ++i;\n            } while (i < value.length);\n            _this.maskKeyPress = false;\n            _this._callPasteHandler = false;\n            if (_this.element.value === oldValue_1) {\n                var i_1 = 0;\n                _this.maskKeyPress = true;\n                do {\n                    validateValue.call(_this, value[i_1], false, null);\n                    ++i_1;\n                } while (i_1 < value.length);\n                _this.maskKeyPress = false;\n            }\n            else {\n                triggerMaskChangeEvent.call(_this, event, oldValue_1);\n            }\n        }, 1);\n    }\n}\nfunction maskInputCutHandler(event) {\n    var _this = this;\n    if (this.mask && !this.readonly) {\n        var preValue_1 = this.element.value;\n        var sIndex_2 = this.element.selectionStart;\n        var eIndex = this.element.selectionEnd;\n        this.undoCollec.push({ value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd });\n        var value_1 = this.element.value.substring(0, sIndex_2) + this.promptMask.substring(sIndex_2, eIndex) +\n            this.element.value.substring(eIndex);\n        setTimeout(function () {\n            setElementValue.call(_this, value_1);\n            _this.element.selectionStart = _this.element.selectionEnd = sIndex_2;\n            if (_this.element.value !== preValue_1) {\n                triggerMaskChangeEvent.call(_this, event, null);\n            }\n        }, 0);\n    }\n}\nexport function maskInputDropHandler(event) {\n    event.preventDefault();\n}\nfunction maskInputHandler(event) {\n    if (Browser.isIE === true && this.element.value === '' && this.floatLabelType === 'Never') {\n        return;\n    }\n    var eventArgs = { ctrlKey: false, keyCode: 229 };\n    extend(event, eventArgs);\n    if (this.mask) {\n        if (this.element.value === '') {\n            this.redoCollec.unshift({\n                value: this.promptMask, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd\n            });\n        }\n        if (this.element.value.length === 1) {\n            this.element.value = this.element.value + this.promptMask;\n            this.element.setSelectionRange(1, 1);\n        }\n        if (!this._callPasteHandler) {\n            removeMaskInputValues.call(this, event);\n        }\n        if (this.element.value.length > this.promptMask.length) {\n            var startIndex = this.element.selectionStart;\n            var addedValues = this.element.value.length - this.promptMask.length;\n            var value = this.element.value.substring(startIndex - addedValues, startIndex);\n            this.maskKeyPress = false;\n            var i = 0;\n            do {\n                validateValue.call(this, value[i], event.ctrlKey, event);\n                ++i;\n            } while (i < value.length);\n            if (this.element.value !== this.preEleVal) {\n                triggerMaskChangeEvent.call(this, event, null);\n            }\n        }\n        var val = strippedValue.call(this, this.element);\n        this.prevValue = val;\n        this.value = val;\n        if (val === '') {\n            setElementValue.call(this, this.promptMask);\n            this.element.setSelectionRange(0, 0);\n        }\n    }\n}\nfunction maskInputKeyDownHandler(event) {\n    if (this.mask && !this.readonly) {\n        if (event.keyCode !== 229) {\n            if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\n                event.preventDefault();\n            }\n            removeMaskInputValues.call(this, event);\n        }\n        var startValue = this.element.value;\n        if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\n            var collec = void 0;\n            if (event.keyCode === 90 && this.undoCollec.length > 0 && startValue !== this.undoCollec[this.undoCollec.length - 1].value) {\n                collec = this.undoCollec[this.undoCollec.length - 1];\n                this.redoCollec.unshift({\n                    value: this.element.value, startIndex: this.element.selectionStart,\n                    endIndex: this.element.selectionEnd\n                });\n                setElementValue.call(this, collec.value);\n                this.element.selectionStart = collec.startIndex;\n                this.element.selectionEnd = collec.endIndex;\n                this.undoCollec.splice(this.undoCollec.length - 1, 1);\n            }\n            else if (event.keyCode === 89 && this.redoCollec.length > 0 && startValue !== this.redoCollec[0].value) {\n                collec = this.redoCollec[0];\n                this.undoCollec.push({\n                    value: this.element.value, startIndex: this.element.selectionStart,\n                    endIndex: this.element.selectionEnd\n                });\n                setElementValue.call(this, collec.value);\n                this.element.selectionStart = collec.startIndex;\n                this.element.selectionEnd = collec.endIndex;\n                this.redoCollec.splice(0, 1);\n            }\n        }\n    }\n}\nexport function mobileRemoveFunction() {\n    var collec;\n    var sIndex = this.element.selectionStart;\n    var eIndex = this.element.selectionEnd;\n    if (this.redoCollec.length > 0) {\n        collec = this.redoCollec[0];\n        setElementValue.call(this, collec.value);\n        if ((collec.startIndex - sIndex) === 1) {\n            this.element.selectionStart = collec.startIndex;\n            this.element.selectionEnd = collec.endIndex;\n        }\n        else {\n            this.element.selectionStart = sIndex + 1;\n            this.element.selectionEnd = eIndex + 1;\n        }\n    }\n    else {\n        setElementValue.call(this, this.promptMask);\n        this.element.selectionStart = this.element.selectionEnd = sIndex;\n    }\n}\nfunction autoFillMaskInputValues(isRemove, oldEventVal, event) {\n    if (event.type === 'input') {\n        isRemove = false;\n        oldEventVal = this.element.value;\n        setElementValue.call(this, this.promptMask);\n        setMaskValue.call(this, oldEventVal);\n    }\n    return isRemove;\n}\nfunction removeMaskInputValues(event) {\n    var isRemove = false;\n    var oldEventVal;\n    var isDeleted = false;\n    if (this.element.value.length < this.promptMask.length) {\n        isRemove = true;\n        oldEventVal = this.element.value;\n        isRemove = autoFillMaskInputValues.call(this, isRemove, oldEventVal, event);\n        mobileRemoveFunction.call(this);\n    }\n    if (this.element.value.length >= this.promptMask.length && event.type === 'input') {\n        isRemove = autoFillMaskInputValues.call(this, isRemove, oldEventVal, event);\n    }\n    var initStartIndex = this.element.selectionStart;\n    var initEndIndex = this.element.selectionEnd;\n    var startIndex = this.element.selectionStart;\n    var endIndex = this.element.selectionEnd;\n    var maskValue = this.hiddenMask.replace(/[>|\\\\<]/g, '');\n    var curMask = maskValue[startIndex - 1];\n    var deleteEndIndex = this.element.selectionEnd;\n    if (isRemove || event.keyCode === 8 || event.keyCode === 46) {\n        this.undoCollec.push({ value: this.element.value, startIndex: this.element.selectionStart, endIndex: endIndex });\n        var multipleDel = false;\n        var preValue = this.element.value;\n        if (startIndex > 0 || ((event.keyCode === 8 || event.keyCode === 46) && startIndex < this.element.value.length\n            && ((this.element.selectionEnd - startIndex) !== this.element.value.length))) {\n            var index = startIndex;\n            if (startIndex !== endIndex) {\n                startIndex = endIndex;\n                if (event.keyCode === 46) {\n                    multipleDel = true;\n                }\n            }\n            else if (event.keyCode === 46) {\n                ++index;\n            }\n            else {\n                --index;\n            }\n            for (var k = startIndex; (event.keyCode === 8 || isRemove || multipleDel) ? k > index : k < index; (event.keyCode === 8 || isRemove || multipleDel) ? k-- : k++) {\n                for (var i = startIndex; (event.keyCode === 8 || isRemove || multipleDel) ? i > 0 : i < this.element.value.length; (event.keyCode === 8 || isRemove || multipleDel) ? i-- : i++) {\n                    var sIndex = void 0;\n                    if (((event.keyCode === 8 || multipleDel) && ((initStartIndex !== initEndIndex && initStartIndex !== startIndex) ||\n                        (initStartIndex === initEndIndex))) || isRemove) {\n                        curMask = maskValue[i - 1];\n                        sIndex = startIndex - 1;\n                    }\n                    else {\n                        curMask = maskValue[i];\n                        sIndex = startIndex;\n                        ++startIndex;\n                    }\n                    var oldValue = this.element.value[sIndex];\n                    if ((isNullOrUndefined(this.regExpCollec[curMask]) && (!isNullOrUndefined(this.customCharacters)\n                        && isNullOrUndefined(this.customCharacters[curMask]))\n                        && ((this.hiddenMask[sIndex] !== this.promptChar && this.customRegExpCollec[sIndex][0] !== '['\n                            && this.customRegExpCollec[sIndex][this.customRegExpCollec[sIndex].length - 1] !== ']')))\n                        || (this.promptMask[sIndex] !== this.promptChar && isNullOrUndefined(this.customCharacters))) {\n                        this.element.selectionStart = this.element.selectionEnd = sIndex;\n                        event.preventDefault();\n                        if (event.keyCode === 46 && !multipleDel) {\n                            ++this.element.selectionStart;\n                        }\n                    }\n                    else {\n                        var value = this.element.value;\n                        var prompt_1 = this.promptChar;\n                        var elementValue = value.substring(0, sIndex) + prompt_1 + value.substring(startIndex, value.length);\n                        setElementValue.call(this, elementValue);\n                        event.preventDefault();\n                        if (event.keyCode === 46 && !multipleDel) {\n                            sIndex++;\n                        }\n                        this.element.selectionStart = this.element.selectionEnd = sIndex;\n                        isDeleted = true;\n                    }\n                    startIndex = this.element.selectionStart;\n                    if ((!isDeleted && event.keyCode === 8) || multipleDel || (!isDeleted && !(event.keyCode === 46))) {\n                        sIndex = startIndex - 1;\n                    }\n                    else {\n                        sIndex = startIndex;\n                        isDeleted = false;\n                    }\n                    oldValue = this.element.value[sIndex];\n                    if (((initStartIndex !== initEndIndex) && (this.element.selectionStart === initStartIndex))\n                        || (this.promptMask[sIndex] === this.promptChar) || ((oldValue !== this.promptMask[sIndex]) &&\n                        (this.promptMask[sIndex] !== this.promptChar) && !isNullOrUndefined(this.customCharacters))) {\n                        break;\n                    }\n                }\n            }\n        }\n        if (event.keyCode === 46 && multipleDel && isDeleted) {\n            this.element.selectionStart = this.element.selectionEnd = deleteEndIndex;\n        }\n        if (this.element.selectionStart === 0 && (this.element.selectionEnd === this.element.value.length)) {\n            setElementValue.call(this, this.promptMask);\n            event.preventDefault();\n            this.element.selectionStart = this.element.selectionEnd = startIndex;\n        }\n        this.redoCollec.unshift({\n            value: this.element.value, startIndex: this.element.selectionStart,\n            endIndex: this.element.selectionEnd\n        });\n        if (this.element.value !== preValue) {\n            triggerMaskChangeEvent.call(this, event, oldEventVal);\n        }\n    }\n}\nfunction maskInputKeyPressHandler(event) {\n    if (this.mask && !this.readonly) {\n        var oldValue = this.element.value;\n        if ((!event.ctrlKey) || (event.ctrlKey && event.code !== 'KeyA' && event.code !== 'KeyY'\n            && event.code !== 'KeyZ' && event.code !== 'KeyX' && event.code !== 'KeyC' && event.code !== 'KeyV')) {\n            this.maskKeyPress = true;\n            var key = event.key;\n            if (key === 'Spacebar') {\n                key = String.fromCharCode(event.keyCode);\n            }\n            if (!key) {\n                this.isIosInvalid = true;\n                validateValue.call(this, String.fromCharCode(event.keyCode), event.ctrlKey, event);\n                event.preventDefault();\n                this.isIosInvalid = false;\n            }\n            else if (key && key.length === 1) {\n                validateValue.call(this, key, event.ctrlKey, event);\n                event.preventDefault();\n            }\n            if (event.keyCode === 32 && key === ' ' && this.promptChar === ' ') {\n                this.element.selectionStart = this.element.selectionEnd = this.element.selectionStart - key.length;\n            }\n        }\n        if (this.element.value !== oldValue) {\n            triggerMaskChangeEvent.call(this, event, oldValue);\n        }\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction triggerMaskChangeEvent(event, oldValue) {\n    var prevOnChange = this.isProtectedOnChange;\n    if (!isNullOrUndefined(this.changeEventArgs) && !this.isInitial) {\n        var eventArgs = {};\n        this.changeEventArgs = { value: this.element.value, maskedValue: this.element.value, isInteraction: false, isInteracted: false };\n        if (this.mask) {\n            this.changeEventArgs.value = strippedValue.call(this, this.element);\n        }\n        if (!isNullOrUndefined(event)) {\n            this.changeEventArgs.isInteracted = true;\n            this.changeEventArgs.isInteraction = true;\n            this.changeEventArgs.event = event;\n        }\n        this.isProtectedOnChange = true;\n        this.value = this.changeEventArgs.value;\n        this.isProtectedOnChange = prevOnChange;\n        merge(eventArgs, this.changeEventArgs);\n        /* istanbul ignore next */\n        if (this.isAngular && this.preventChange) {\n            this.preventChange = false;\n        }\n        else {\n            this.trigger('change', eventArgs);\n        }\n    }\n    this.preEleVal = this.element.value;\n    this.prevValue = strippedValue.call(this, this.element);\n    attributes(this.element, { 'aria-valuenow': this.element.value });\n}\nfunction maskInputKeyUpHandler(event) {\n    if (this.mask && !this.readonly) {\n        var collec = void 0;\n        if (!this.maskKeyPress && event.keyCode === 229) {\n            var oldEventVal = void 0;\n            if (this.element.value.length === 1) {\n                this.element.value = this.element.value + this.promptMask;\n                this.element.setSelectionRange(1, 1);\n            }\n            if (this.element.value.length > this.promptMask.length) {\n                var startIndex = this.element.selectionStart;\n                var addedValues = this.element.value.length - this.promptMask.length;\n                var val_1 = this.element.value.substring(startIndex - addedValues, startIndex);\n                if (this.undoCollec.length > 0) {\n                    collec = this.undoCollec[this.undoCollec.length - 1];\n                    var startIndex_1 = this.element.selectionStart;\n                    oldEventVal = collec.value;\n                    var oldVal = collec.value.substring(startIndex_1 - addedValues, startIndex_1);\n                    collec = this.redoCollec[0];\n                    val_1 = val_1.trim();\n                    var isSpace = Browser.isAndroid && val_1 === '';\n                    if (!isSpace && oldVal !== val_1 && collec.value.substring(startIndex_1 - addedValues, startIndex_1) !== val_1) {\n                        validateValue.call(this, val_1, event.ctrlKey, event);\n                    }\n                    else if (isSpace) {\n                        preventUnsupportedValues.call(this, event, startIndex_1 - 1, this.element.selectionEnd - 1, val_1, event.ctrlKey, false);\n                    }\n                }\n                else {\n                    oldEventVal = this.promptMask;\n                    validateValue.call(this, val_1, event.ctrlKey, event);\n                }\n                this.maskKeyPress = false;\n                triggerMaskChangeEvent.call(this, event, oldEventVal);\n            }\n        }\n        else {\n            removeMaskError.call(this);\n        }\n        var val = strippedValue.call(this, this.element);\n        if (!((this.element.selectionStart === 0) && (this.promptMask === this.element.value) && val === '')\n            || (val === '' && this.value !== val)) {\n            this.prevValue = val;\n            this.value = val;\n        }\n    }\n    else {\n        triggerMaskChangeEvent.call(this, event);\n    }\n    if (this.element.selectionStart === 0 && this.element.selectionEnd === 0) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var temp_1 = this.element;\n        setTimeout(function () {\n            temp_1.setSelectionRange(0, 0);\n        }, 0);\n    }\n}\nfunction mobileSwipeCheck(key) {\n    if (key.length > 1 && ((this.promptMask.length + key.length) < this.element.value.length)) {\n        var elementValue = this.redoCollec[0].value.substring(0, this.redoCollec[0].startIndex) + key +\n            this.redoCollec[0].value.substring(this.redoCollec[0].startIndex, this.redoCollec[0].value.length);\n        setElementValue.call(this, elementValue);\n        this.element.selectionStart = this.element.selectionEnd = this.redoCollec[0].startIndex + key.length;\n    }\n    this.element.selectionStart = this.element.selectionStart - key.length;\n    this.element.selectionEnd = this.element.selectionEnd - key.length;\n}\nfunction mobileValidation(key) {\n    if (!this.maskKeyPress) {\n        mobileSwipeCheck.call(this, key);\n    }\n}\nfunction validateValue(key, isCtrlKey, event) {\n    mobileValidation.call(this, key);\n    if (isNullOrUndefined(this) || isNullOrUndefined(key)) {\n        return;\n    }\n    var startIndex = this.element.selectionStart;\n    var initStartIndex = startIndex;\n    var curMask;\n    var allowText = false;\n    var value = this.element.value;\n    var eventOldVal;\n    var prevSupport = false;\n    var isEqualVal = false;\n    for (var k = 0; k < key.length; k++) {\n        var keyValue = key[k];\n        startIndex = this.element.selectionStart;\n        if (!this.maskKeyPress && initStartIndex === startIndex) {\n            startIndex = startIndex + k;\n        }\n        if ((!this.maskKeyPress || startIndex < this.promptMask.length)) {\n            for (var i = startIndex; i < this.promptMask.length; i++) {\n                var maskValue = this.escapeMaskValue;\n                curMask = maskValue[startIndex];\n                if (this.hiddenMask[startIndex] === '\\\\' && this.hiddenMask[startIndex + 1] === key) {\n                    isEqualVal = true;\n                }\n                if ((isNullOrUndefined(this.regExpCollec[curMask]) && (isNullOrUndefined(this.customCharacters)\n                    || (!isNullOrUndefined(this.customCharacters) && isNullOrUndefined(this.customCharacters[curMask])))\n                    && ((this.hiddenMask[startIndex] !== this.promptChar && this.customRegExpCollec[startIndex][0] !== '['\n                        && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] !== ']')))\n                    || ((this.promptMask[startIndex] !== this.promptChar) && isNullOrUndefined(this.customCharacters))\n                    || (this.promptChar === curMask && this.escapeMaskValue === this.mask)) {\n                    this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\n                    startIndex = this.element.selectionStart;\n                    curMask = this.hiddenMask[startIndex];\n                }\n            }\n            if (!isNullOrUndefined(this.customCharacters) && !isNullOrUndefined(this.customCharacters[curMask])) {\n                var customValStr = this.customCharacters[curMask];\n                var customValArr = customValStr.split(',');\n                for (var i = 0; i < customValArr.length; i++) {\n                    if (keyValue.match(new RegExp('[' + customValArr[i] + ']'))) {\n                        allowText = true;\n                        break;\n                    }\n                }\n            }\n            else if (!isNullOrUndefined(this.regExpCollec[curMask]) && keyValue.match(new RegExp(this.regExpCollec[curMask]))\n                && this.promptMask[startIndex] === this.promptChar) {\n                allowText = true;\n            }\n            else if (this.promptMask[startIndex] === this.promptChar && this.customRegExpCollec[startIndex][0] === '['\n                && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] === ']'\n                && keyValue.match(new RegExp(this.customRegExpCollec[startIndex]))) {\n                allowText = true;\n            }\n            if ((!this.maskKeyPress || startIndex < this.hiddenMask.length) && allowText) {\n                if (k === 0) {\n                    if (this.maskKeyPress) {\n                        this.undoCollec.push({ value: value, startIndex: startIndex, endIndex: startIndex });\n                    }\n                    else {\n                        var sIndex = this.element.selectionStart;\n                        var eIndex = this.element.selectionEnd;\n                        if (this.redoCollec.length > 0) {\n                            eventOldVal = this.redoCollec[0].value;\n                            setElementValue.call(this, eventOldVal);\n                            this.undoCollec.push(this.redoCollec[0]);\n                        }\n                        else {\n                            this.undoCollec.push({ value: this.promptMask, startIndex: startIndex, endIndex: startIndex });\n                            eventOldVal = this.promptMask;\n                            setElementValue.call(this, eventOldVal);\n                        }\n                        this.element.selectionStart = sIndex;\n                        this.element.selectionEnd = eIndex;\n                    }\n                }\n                startIndex = this.element.selectionStart;\n                applySupportedValues.call(this, event, startIndex, keyValue, eventOldVal, isEqualVal);\n                prevSupport = true;\n                if (k === key.length - 1) {\n                    this.redoCollec.unshift({\n                        value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd\n                    });\n                }\n                allowText = false;\n            }\n            else {\n                startIndex = this.element.selectionStart;\n                preventUnsupportedValues.call(this, event, startIndex, initStartIndex, key, isCtrlKey, prevSupport);\n            }\n            if (k === key.length - 1 && !allowText) {\n                if (!Browser.isAndroid || (Browser.isAndroid && startIndex < this.promptMask.length)) {\n                    this.redoCollec.unshift({\n                        value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd\n                    });\n                }\n            }\n        }\n        else {\n            if (key.length === 1 && !isCtrlKey && !isNullOrUndefined(event)) {\n                addMaskErrorClass.call(this);\n            }\n        }\n    }\n}\nfunction applySupportedValues(event, startIndex, keyValue, eventOldVal, isEqualVal) {\n    if (this.hiddenMask.length > this.promptMask.length) {\n        keyValue = changeToLowerUpperCase.call(this, keyValue, this.element.value);\n    }\n    if (!isEqualVal) {\n        var value = this.element.value;\n        var elementValue = value.substring(0, startIndex) + keyValue + value.substring(startIndex + 1, value.length);\n        setElementValue.call(this, elementValue);\n        this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\n    }\n}\nfunction preventUnsupportedValues(event, sIdx, idx, key, ctrl, chkSupport) {\n    if (!this.maskKeyPress) {\n        var value = this.element.value;\n        if (sIdx >= this.promptMask.length) {\n            setElementValue.call(this, value.substring(0, sIdx));\n        }\n        else {\n            if (idx === sIdx) {\n                setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx + 1, value.length));\n            }\n            else {\n                if (this.promptMask.length === this.element.value.length) {\n                    setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx, value.length));\n                }\n                else {\n                    setElementValue.call(this, value.substring(0, idx) + value.substring(idx + 1, value.length));\n                }\n            }\n            this.element.selectionStart = this.element.selectionEnd = (chkSupport ||\n                this.element.value[idx] !== this.promptChar) ? sIdx : idx;\n        }\n        addMaskErrorClass.call(this);\n    }\n    if (key.length === 1 && !ctrl && !isNullOrUndefined(event)) {\n        addMaskErrorClass.call(this);\n    }\n}\nfunction addMaskErrorClass() {\n    var _this = this;\n    var parentElement = this.element.parentNode;\n    var timer = 200;\n    if (parentElement.classList.contains(INPUTGROUP) || parentElement.classList.contains(FLOATINPUT)) {\n        addClass([parentElement], ERROR);\n    }\n    else {\n        addClass([this.element], ERROR);\n    }\n    if (this.isIosInvalid === true) {\n        timer = 400;\n    }\n    attributes(this.element, { 'aria-invalid': 'true' });\n    setTimeout(function () {\n        if (!_this.maskKeyPress) {\n            removeMaskError.call(_this);\n        }\n    }, timer);\n}\nfunction removeMaskError() {\n    var parentElement = this.element.parentNode;\n    if (!isNullOrUndefined(parentElement)) {\n        removeClass([parentElement], ERROR);\n    }\n    removeClass([this.element], ERROR);\n    attributes(this.element, { 'aria-invalid': 'false' });\n}\n/**\n * Validates user input using masking elements '<' , '>' and '|'.\n *\n * @hidden\n */\nfunction changeToLowerUpperCase(key, value) {\n    var promptMask;\n    var i;\n    var curVal = value;\n    var caseCount = 0;\n    for (i = 0; i < this.hiddenMask.length; i++) {\n        if (this.hiddenMask[i] === '\\\\') {\n            promptMask = curVal.substring(0, i) + '\\\\' + curVal.substring(i, curVal.length);\n        }\n        if (this.hiddenMask[i] === '>' || this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|') {\n            if (this.hiddenMask[i] !== curVal[i]) {\n                promptMask = curVal.substring(0, i) + this.hiddenMask[i] + curVal.substring(i, curVal.length);\n            }\n            ++caseCount;\n        }\n        if (promptMask) {\n            if (((promptMask[i] === this.promptChar) && (i > this.element.selectionStart)) ||\n                (this.element.value.indexOf(this.promptChar) < 0 && (this.element.selectionStart + caseCount) === i)) {\n                caseCount = 0;\n                break;\n            }\n            curVal = promptMask;\n        }\n    }\n    while (i >= 0 && promptMask) {\n        if (i === 0 || promptMask[i - 1] !== '\\\\') {\n            if (promptMask[i] === '>') {\n                key = key.toUpperCase();\n                break;\n            }\n            else if (promptMask[i] === '<') {\n                key = key.toLowerCase();\n                break;\n            }\n            else if (promptMask[i] === '|') {\n                break;\n            }\n        }\n        --i;\n    }\n    return key;\n}\n/**\n * To set updated values in the MaskedTextBox.\n *\n * @hidden\n */\nexport function setMaskValue(val) {\n    if (this.mask && val !== undefined && (this.prevValue === undefined || this.prevValue !== val)) {\n        this.maskKeyPress = true;\n        setElementValue.call(this, this.promptMask);\n        if (val !== '' && !(val === null && this.floatLabelType === 'Never' && this.placeholder)) {\n            this.element.selectionStart = 0;\n            this.element.selectionEnd = 0;\n        }\n        if (val !== null) {\n            for (var i = 0; i < val.length; i++) {\n                validateValue.call(this, val[i], false, null);\n            }\n        }\n        var newVal = strippedValue.call(this, this.element);\n        this.prevValue = newVal;\n        this.value = newVal;\n        triggerMaskChangeEvent.call(this, null, null);\n        this.maskKeyPress = false;\n        var labelElement = this.element.parentNode.querySelector('.e-float-text');\n        if (this.element.value === this.promptMask && this.floatLabelType === 'Auto' && this.placeholder &&\n            !isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL) && !this.isFocus) {\n            removeClass([labelElement], TOPLABEL);\n            addClass([labelElement], BOTTOMLABEL);\n            setElementValue.call(this, '');\n        }\n    }\n    if (this.mask === null || this.mask === '' && this.value !== undefined) {\n        setElementValue.call(this, this.value);\n    }\n}\n/**\n * To set updated values in the input element.\n *\n * @hidden\n */\nexport function setElementValue(val, element) {\n    if (!this.isFocus && this.floatLabelType === 'Auto' && this.placeholder && isNullOrUndefined(this.value)) {\n        val = '';\n    }\n    var value = strippedValue.call(this, (element ? element : this.element), val);\n    if (value === null || value === '') {\n        Input.setValue(val, (element ? element : this.element), this.floatLabelType, false);\n        if (this.showClearButton) {\n            this.inputObj.clearButton.classList.add('e-clear-icon-hide');\n        }\n    }\n    else {\n        Input.setValue(val, (element ? element : this.element), this.floatLabelType, this.showClearButton);\n    }\n}\n/**\n * Provide mask support to input textbox through utility method.\n *\n * @hidden\n */\nexport function maskInput(args) {\n    var inputEle = getMaskInput(args);\n    applyMask.call(inputEle);\n    var val = strippedValue.call(this, this.element);\n    this.prevValue = val;\n    this.value = val;\n    if (args.mask) {\n        unwireEvents.call(inputEle);\n        wireEvents.call(inputEle);\n    }\n}\nfunction getMaskInput(args) {\n    addClass([args.element], UTILMASK);\n    var inputEle = {\n        element: args.element,\n        mask: args.mask,\n        promptMask: '',\n        hiddenMask: '',\n        escapeMaskValue: '',\n        promptChar: args.promptChar ? (args.promptChar.length > 1) ? args.promptChar = args.promptChar[0]\n            : args.promptChar : '_',\n        value: args.value ? args.value : null,\n        regExpCollec: regularExpressions,\n        customRegExpCollec: [],\n        customCharacters: args.customCharacters,\n        undoCollec: [],\n        redoCollec: [],\n        maskKeyPress: false,\n        prevValue: ''\n    };\n    createMask.call(inputEle);\n    return inputEle;\n}\n/**\n * Gets raw value of the textbox which has been masked through utility method.\n *\n * @hidden\n */\nexport function getVal(args) {\n    return strippedValue.call(getUtilMaskEle(args), args.element);\n}\n/**\n * Gets masked value of the textbox which has been masked through utility method.\n *\n * @hidden\n */\nexport function getMaskedVal(args) {\n    return unstrippedValue.call(getUtilMaskEle(args), args.element);\n}\nfunction getUtilMaskEle(args) {\n    var inputEle;\n    if (!isNullOrUndefined(args) && args.element.classList.contains(UTILMASK)) {\n        inputEle = getMaskInput(args);\n    }\n    return inputEle;\n}\n/**\n * Arguments to perform undo and redo functionalities.\n *\n * @hidden\n */\nvar MaskUndo = /** @class */ (function () {\n    function MaskUndo() {\n    }\n    return MaskUndo;\n}());\nexport { MaskUndo };\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nvar maskUndo = new MaskUndo();\n/* eslint-enable valid-jsdoc, jsdoc/require-jsdoc, jsdoc/require-returns, jsdoc/require-param */\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}