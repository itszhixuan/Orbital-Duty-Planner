{"ast":null,"code":"import { DataUtil } from './util';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * Query class is used to build query which is used by the DataManager to communicate with datasource.\n */\n\nvar Query =\n/** @class */\nfunction () {\n  /**\n   * Constructor for Query class.\n   * @param  {string|string[]} from?\n   * @hidden\n   */\n  function Query(from) {\n    /** @hidden */\n    this.subQuery = null;\n    /** @hidden */\n\n    this.isChild = false;\n    /** @hidden */\n\n    this.distincts = [];\n    this.queries = [];\n    this.key = '';\n    this.fKey = '';\n\n    if (typeof from === 'string') {\n      this.fromTable = from;\n    } else if (from && from instanceof Array) {\n      this.lookups = from;\n    }\n\n    this.expands = [];\n    this.sortedColumns = [];\n    this.groupedColumns = [];\n    this.subQuery = null;\n    this.isChild = false;\n    this.params = [];\n    this.lazyLoad = [];\n    return this;\n  }\n  /**\n   * Sets the primary key.\n   * @param  {string} field - Defines the column field.\n   */\n\n\n  Query.prototype.setKey = function (field) {\n    this.key = field;\n    return this;\n  };\n  /**\n   * Sets default DataManager to execute query.\n   * @param  {DataManager} dataManager - Defines the DataManager.\n   */\n\n\n  Query.prototype.using = function (dataManager) {\n    this.dataManager = dataManager;\n    return this;\n  };\n  /**\n   * Executes query with the given DataManager.\n   * @param  {DataManager} dataManager - Defines the DataManager.\n   * @param  {Function} done - Defines the success callback.\n   * @param  {Function} fail - Defines the failure callback.\n   * @param  {Function} always - Defines the callback which will be invoked on either success or failure.\n   *\n   * <pre>\n   * let dataManager: DataManager = new DataManager([{ ID: '10' }, { ID: '2' }, { ID: '1' }, { ID: '20' }]);\n   * let query: Query = new Query();\n   * query.sortBy('ID', (x: string, y: string): number => { return parseInt(x, 10) - parseInt(y, 10) });\n   * let promise: Promise< Object > = query.execute(dataManager);\n   * promise.then((e: { result: Object }) => { });\n   * </pre>\n   */\n\n\n  Query.prototype.execute = function (dataManager, done, fail, always) {\n    dataManager = dataManager || this.dataManager;\n\n    if (dataManager) {\n      return dataManager.executeQuery(this, done, fail, always);\n    }\n\n    return DataUtil.throwError('Query - execute() : dataManager needs to be is set using \"using\" function or should be passed as argument');\n  };\n  /**\n   * Executes query with the local datasource.\n   * @param  {DataManager} dataManager - Defines the DataManager.\n   */\n\n\n  Query.prototype.executeLocal = function (dataManager) {\n    dataManager = dataManager || this.dataManager;\n\n    if (dataManager) {\n      return dataManager.executeLocal(this);\n    }\n\n    return DataUtil.throwError('Query - executeLocal() : dataManager needs to be is set using \"using\" function or should be passed as argument');\n  };\n  /**\n   * Creates deep copy of the Query object.\n   */\n\n\n  Query.prototype.clone = function () {\n    var cloned = new Query();\n    cloned.queries = this.queries.slice(0);\n    cloned.key = this.key;\n    cloned.isChild = this.isChild;\n    cloned.dataManager = this.dataManager;\n    cloned.fromTable = this.fromTable;\n    cloned.params = this.params.slice(0);\n    cloned.expands = this.expands.slice(0);\n    cloned.sortedColumns = this.sortedColumns.slice(0);\n    cloned.groupedColumns = this.groupedColumns.slice(0);\n    cloned.subQuerySelector = this.subQuerySelector;\n    cloned.subQuery = this.subQuery;\n    cloned.fKey = this.fKey;\n    cloned.isCountRequired = this.isCountRequired;\n    cloned.distincts = this.distincts.slice(0);\n    cloned.lazyLoad = this.lazyLoad.slice(0);\n    return cloned;\n  };\n  /**\n   * Specifies the name of table to retrieve data in query execution.\n   * @param  {string} tableName - Defines the table name.\n   */\n\n\n  Query.prototype.from = function (tableName) {\n    this.fromTable = tableName;\n    return this;\n  };\n  /**\n   * Adds additional parameter which will be sent along with the request which will be generated while DataManager execute.\n   * @param  {string} key - Defines the key of additional parameter.\n   * @param  {Function|string} value - Defines the value for the key.\n   */\n\n\n  Query.prototype.addParams = function (key, value) {\n    if (typeof value === 'function') {\n      this.params.push({\n        key: key,\n        fn: value\n      });\n    } else {\n      this.params.push({\n        key: key,\n        value: value\n      });\n    }\n\n    return this;\n  };\n  /**\n   * @hidden\n   */\n\n\n  Query.prototype.distinct = function (fields) {\n    if (typeof fields === 'string') {\n      this.distincts = [].slice.call([fields], 0);\n    } else {\n      this.distincts = fields.slice(0);\n    }\n\n    return this;\n  };\n  /**\n   * Expands the related table.\n   * @param  {string|Object[]} tables\n   */\n\n\n  Query.prototype.expand = function (tables) {\n    if (typeof tables === 'string') {\n      this.expands = [].slice.call([tables], 0);\n    } else {\n      this.expands = tables.slice(0);\n    }\n\n    return this;\n  };\n  /**\n   * Filter data with given filter criteria.\n   * @param  {string|Predicate} fieldName - Defines the column field or Predicate.\n   * @param  {string} operator - Defines the operator how to filter data.\n   * @param  {string|number|boolean} value - Defines the values to match with data.\n   * @param  {boolean} ignoreCase - If ignore case set to false, then filter data with exact match or else\n   * filter data with case insensitive.\n   */\n\n\n  Query.prototype.where = function (fieldName, operator, value, ignoreCase, ignoreAccent) {\n    operator = operator ? operator.toLowerCase() : null;\n    var predicate = null;\n\n    if (typeof fieldName === 'string') {\n      predicate = new Predicate(fieldName, operator, value, ignoreCase, ignoreAccent);\n    } else if (fieldName instanceof Predicate) {\n      predicate = fieldName;\n    }\n\n    this.queries.push({\n      fn: 'onWhere',\n      e: predicate\n    });\n    return this;\n  };\n  /**\n   * Search data with given search criteria.\n   * @param  {string|number|boolean} searchKey - Defines the search key.\n   * @param  {string|string[]} fieldNames - Defines the collection of column fields.\n   * @param  {string} operator - Defines the operator how to search data.\n   * @param  {boolean} ignoreCase - If ignore case set to false, then filter data with exact match or else\n   * filter data with case insensitive.\n   */\n\n\n  Query.prototype.search = function (searchKey, fieldNames, operator, ignoreCase, ignoreAccent) {\n    if (typeof fieldNames === 'string') {\n      fieldNames = [fieldNames];\n    }\n\n    if (!operator || operator === 'none') {\n      operator = 'contains';\n    }\n\n    var comparer = DataUtil.fnOperators[operator];\n    this.queries.push({\n      fn: 'onSearch',\n      e: {\n        fieldNames: fieldNames,\n        operator: operator,\n        searchKey: searchKey,\n        ignoreCase: ignoreCase,\n        ignoreAccent: ignoreAccent,\n        comparer: comparer\n      }\n    });\n    return this;\n  };\n  /**\n   * Sort the data with given sort criteria.\n   * By default, sort direction is ascending.\n   * @param  {string|string[]} fieldName - Defines the single or collection of column fields.\n   * @param  {string|Function} comparer - Defines the sort direction or custom sort comparer function.\n   */\n\n\n  Query.prototype.sortBy = function (fieldName, comparer, isFromGroup) {\n    return this.sortByForeignKey(fieldName, comparer, isFromGroup);\n  };\n  /**\n   * Sort the data with given sort criteria.\n   * By default, sort direction is ascending.\n   * @param  {string|string[]} fieldName - Defines the single or collection of column fields.\n   * @param  {string|Function} comparer - Defines the sort direction or custom sort comparer function.\n   * @param  {string} direction - Defines the sort direction .\n   */\n\n\n  Query.prototype.sortByForeignKey = function (fieldName, comparer, isFromGroup, direction) {\n    var order = !isNullOrUndefined(direction) ? direction : 'ascending';\n    var sorts;\n    var temp;\n\n    if (typeof fieldName === 'string' && DataUtil.endsWith(fieldName.toLowerCase(), ' desc')) {\n      fieldName = fieldName.replace(/ desc$/i, '');\n      comparer = 'descending';\n    }\n\n    if (!comparer || typeof comparer === 'string') {\n      order = comparer ? comparer.toLowerCase() : 'ascending';\n      comparer = DataUtil.fnSort(comparer);\n    }\n\n    if (isFromGroup) {\n      sorts = Query.filterQueries(this.queries, 'onSortBy');\n\n      for (var i = 0; i < sorts.length; i++) {\n        temp = sorts[i].e.fieldName;\n\n        if (typeof temp === 'string') {\n          if (temp === fieldName) {\n            return this;\n          }\n        } else if (temp instanceof Array) {\n          for (var j = 0; j < temp.length; j++) {\n            if (temp[j] === fieldName || fieldName.toLowerCase() === temp[j] + ' desc') {\n              return this;\n            }\n          }\n        }\n      }\n    }\n\n    this.queries.push({\n      fn: 'onSortBy',\n      e: {\n        fieldName: fieldName,\n        comparer: comparer,\n        direction: order\n      }\n    });\n    return this;\n  };\n  /**\n   * Sorts data in descending order.\n   * @param  {string} fieldName - Defines the column field.\n   */\n\n\n  Query.prototype.sortByDesc = function (fieldName) {\n    return this.sortBy(fieldName, 'descending');\n  };\n  /**\n   * Groups data with the given field name.\n   * @param  {string} fieldName - Defines the column field.\n   */\n\n\n  Query.prototype.group = function (fieldName, fn, format) {\n    this.sortBy(fieldName, null, true);\n    this.queries.push({\n      fn: 'onGroup',\n      e: {\n        fieldName: fieldName,\n        comparer: fn ? fn : null,\n        format: format ? format : null\n      }\n    });\n    return this;\n  };\n  /**\n   * Gets data based on the given page index and size.\n   * @param  {number} pageIndex - Defines the current page index.\n   * @param  {number} pageSize - Defines the no of records per page.\n   */\n\n\n  Query.prototype.page = function (pageIndex, pageSize) {\n    this.queries.push({\n      fn: 'onPage',\n      e: {\n        pageIndex: pageIndex,\n        pageSize: pageSize\n      }\n    });\n    return this;\n  };\n  /**\n   * Gets data based on the given start and end index.\n   * @param  {number} start - Defines the start index of the datasource.\n   * @param  {number} end - Defines the end index of the datasource.\n   */\n\n\n  Query.prototype.range = function (start, end) {\n    this.queries.push({\n      fn: 'onRange',\n      e: {\n        start: start,\n        end: end\n      }\n    });\n    return this;\n  };\n  /**\n   * Gets data from the top of the data source based on given number of records count.\n   * @param  {number} nos - Defines the no of records to retrieve from datasource.\n   */\n\n\n  Query.prototype.take = function (nos) {\n    this.queries.push({\n      fn: 'onTake',\n      e: {\n        nos: nos\n      }\n    });\n    return this;\n  };\n  /**\n   * Skips data with given number of records count from the top of the data source.\n   * @param  {number} nos - Defines the no of records skip in the datasource.\n   */\n\n\n  Query.prototype.skip = function (nos) {\n    this.queries.push({\n      fn: 'onSkip',\n      e: {\n        nos: nos\n      }\n    });\n    return this;\n  };\n  /**\n   * Selects specified columns from the data source.\n   * @param  {string|string[]} fieldNames - Defines the collection of column fields.\n   */\n\n\n  Query.prototype.select = function (fieldNames) {\n    if (typeof fieldNames === 'string') {\n      fieldNames = [].slice.call([fieldNames], 0);\n    }\n\n    this.queries.push({\n      fn: 'onSelect',\n      e: {\n        fieldNames: fieldNames\n      }\n    });\n    return this;\n  };\n  /**\n   * Gets the records in hierarchical relationship from two tables. It requires the foreign key to relate two tables.\n   * @param  {Query} query - Defines the query to relate two tables.\n   * @param  {Function} selectorFn - Defines the custom function to select records.\n   */\n\n\n  Query.prototype.hierarchy = function (query, selectorFn) {\n    this.subQuerySelector = selectorFn;\n    this.subQuery = query;\n    return this;\n  };\n  /**\n   * Sets the foreign key which is used to get data from the related table.\n   * @param  {string} key - Defines the foreign key.\n   */\n\n\n  Query.prototype.foreignKey = function (key) {\n    this.fKey = key;\n    return this;\n  };\n  /**\n   * It is used to get total number of records in the DataManager execution result.\n   */\n\n\n  Query.prototype.requiresCount = function () {\n    this.isCountRequired = true;\n    return this;\n  }; //type - sum, avg, min, max\n\n  /**\n   * Aggregate the data with given type and field name.\n   * @param  {string} type - Defines the aggregate type.\n   * @param  {string} field - Defines the column field to aggregate.\n   */\n\n\n  Query.prototype.aggregate = function (type, field) {\n    this.queries.push({\n      fn: 'onAggregates',\n      e: {\n        field: field,\n        type: type\n      }\n    });\n    return this;\n  };\n  /**\n   * Pass array of filterColumn query for performing filter operation.\n   * @param  {QueryOptions[]} queries\n   * @param  {string} name\n   * @hidden\n   */\n\n\n  Query.filterQueries = function (queries, name) {\n    return queries.filter(function (q) {\n      return q.fn === name;\n    });\n  };\n  /**\n   * To get the list of queries which is already filtered in current data source.\n   * @param  {Object[]} queries\n   * @param  {string[]} singles\n   * @hidden\n   */\n\n\n  Query.filterQueryLists = function (queries, singles) {\n    var filtered = queries.filter(function (q) {\n      return singles.indexOf(q.fn) !== -1;\n    });\n    var res = {};\n\n    for (var i = 0; i < filtered.length; i++) {\n      if (!res[filtered[i].fn]) {\n        res[filtered[i].fn] = filtered[i].e;\n      }\n    }\n\n    return res;\n  };\n\n  return Query;\n}();\n\nexport { Query };\n/**\n * Predicate class is used to generate complex filter criteria.\n * This will be used by DataManager to perform multiple filtering operation.\n */\n\nvar Predicate =\n/** @class */\nfunction () {\n  /**\n   * Constructor for Predicate class.\n   * @param  {string|Predicate} field\n   * @param  {string} operator\n   * @param  {string|number|boolean|Predicate|Predicate[]} value\n   * @param  {boolean=false} ignoreCase\n   * @hidden\n   */\n  function Predicate(field, operator, value, ignoreCase, ignoreAccent) {\n    if (ignoreCase === void 0) {\n      ignoreCase = false;\n    }\n    /** @hidden */\n\n\n    this.ignoreAccent = false;\n    /** @hidden */\n\n    this.isComplex = false;\n\n    if (typeof field === 'string') {\n      this.field = field;\n      this.operator = operator.toLowerCase();\n      this.value = value;\n      this.ignoreCase = ignoreCase;\n      this.ignoreAccent = ignoreAccent;\n      this.isComplex = false;\n      this.comparer = DataUtil.fnOperators.processOperator(this.operator);\n    } else if (field instanceof Predicate && value instanceof Predicate || value instanceof Array) {\n      this.isComplex = true;\n      this.condition = operator.toLowerCase();\n      this.predicates = [field];\n\n      if (value instanceof Array) {\n        [].push.apply(this.predicates, value);\n      } else {\n        this.predicates.push(value);\n      }\n    }\n\n    return this;\n  }\n  /**\n   * Adds n-number of new predicates on existing predicate with “and” condition.\n   * @param  {Object[]} args - Defines the collection of predicates.\n   */\n\n\n  Predicate.and = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    return Predicate.combinePredicates([].slice.call(args, 0), 'and');\n  };\n  /**\n   * Adds new predicate on existing predicate with “and” condition.\n   * @param  {string} field - Defines the column field.\n   * @param  {string} operator - Defines the operator how to filter data.\n   * @param  {string} value - Defines the values to match with data.\n   * @param  {boolean} ignoreCase? - If ignore case set to false, then filter data with exact match or else\n   * filter data with case insensitive.\n   */\n\n\n  Predicate.prototype.and = function (field, operator, value, ignoreCase, ignoreAccent) {\n    return Predicate.combine(this, field, operator, value, 'and', ignoreCase, ignoreAccent);\n  };\n  /**\n   * Adds n-number of new predicates on existing predicate with “or” condition.\n   * @param  {Object[]} args - Defines the collection of predicates.\n   */\n\n\n  Predicate.or = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    return Predicate.combinePredicates([].slice.call(args, 0), 'or');\n  };\n  /**\n   * Adds new predicate on existing predicate with “or” condition.\n   * @param  {string} field - Defines the column field.\n   * @param  {string} operator - Defines the operator how to filter data.\n   * @param  {string} value - Defines the values to match with data.\n   * @param  {boolean} ignoreCase? - If ignore case set to false, then filter data with exact match or else\n   * filter data with case insensitive.\n   */\n\n\n  Predicate.prototype.or = function (field, operator, value, ignoreCase, ignoreAccent) {\n    return Predicate.combine(this, field, operator, value, 'or', ignoreCase, ignoreAccent);\n  };\n  /**\n   * Converts plain JavaScript object to Predicate object.\n   * @param  {Predicate[]|Predicate} json - Defines single or collection of Predicate.\n   */\n\n\n  Predicate.fromJson = function (json) {\n    if (json instanceof Array) {\n      var res = [];\n\n      for (var i = 0, len = json.length; i < len; i++) {\n        res.push(this.fromJSONData(json[i]));\n      }\n\n      return res;\n    }\n\n    var pred = json;\n    return this.fromJSONData(pred);\n  };\n  /**\n   * Validate the record based on the predicates.\n   * @param  {Object} record - Defines the datasource record.\n   */\n\n\n  Predicate.prototype.validate = function (record) {\n    var predicate = this.predicates ? this.predicates : [];\n    var isAnd;\n    var ret;\n\n    if (!this.isComplex && this.comparer) {\n      return this.comparer.call(this, DataUtil.getObject(this.field, record), this.value, this.ignoreCase, this.ignoreAccent);\n    }\n\n    isAnd = this.condition === 'and';\n\n    for (var i = 0; i < predicate.length; i++) {\n      ret = predicate[i].validate(record);\n\n      if (isAnd) {\n        if (!ret) {\n          return false;\n        }\n      } else {\n        if (ret) {\n          return true;\n        }\n      }\n    }\n\n    return isAnd;\n  };\n  /**\n   * Converts predicates to plain JavaScript.\n   * This method is uses Json stringify when serializing Predicate object.\n   */\n\n\n  Predicate.prototype.toJson = function () {\n    var predicates;\n    var p;\n\n    if (this.isComplex) {\n      predicates = [];\n      p = this.predicates;\n\n      for (var i = 0; i < p.length; i++) {\n        predicates.push(p[i].toJson());\n      }\n    }\n\n    return {\n      isComplex: this.isComplex,\n      field: this.field,\n      operator: this.operator,\n      value: this.value,\n      ignoreCase: this.ignoreCase,\n      ignoreAccent: this.ignoreAccent,\n      condition: this.condition,\n      predicates: predicates\n    };\n  };\n\n  Predicate.combinePredicates = function (predicates, operator) {\n    if (predicates.length === 1) {\n      if (!(predicates[0] instanceof Array)) {\n        return predicates[0];\n      }\n\n      predicates = predicates[0];\n    }\n\n    return new Predicate(predicates[0], operator, predicates.slice(1));\n  };\n\n  Predicate.combine = function (pred, field, operator, value, condition, ignoreCase, ignoreAccent) {\n    if (field instanceof Predicate) {\n      return Predicate[condition](pred, field);\n    }\n\n    if (typeof field === 'string') {\n      return Predicate[condition](pred, new Predicate(field, operator, value, ignoreCase, ignoreAccent));\n    }\n\n    return DataUtil.throwError('Predicate - ' + condition + ' : invalid arguments');\n  };\n\n  Predicate.fromJSONData = function (json) {\n    var preds = json.predicates || [];\n    var len = preds.length;\n    var predicates = [];\n    var result;\n\n    for (var i = 0; i < len; i++) {\n      predicates.push(this.fromJSONData(preds[i]));\n    }\n\n    if (!json.isComplex) {\n      result = new Predicate(json.field, json.operator, json.value, json.ignoreCase, json.ignoreAccent);\n    } else {\n      result = new Predicate(predicates[0], json.condition, predicates.slice(1));\n    }\n\n    return result;\n  };\n\n  return Predicate;\n}();\n\nexport { Predicate };","map":{"version":3,"names":["DataUtil","isNullOrUndefined","Query","from","subQuery","isChild","distincts","queries","key","fKey","fromTable","Array","lookups","expands","sortedColumns","groupedColumns","params","lazyLoad","prototype","setKey","field","using","dataManager","execute","done","fail","always","executeQuery","throwError","executeLocal","clone","cloned","slice","subQuerySelector","isCountRequired","tableName","addParams","value","push","fn","distinct","fields","call","expand","tables","where","fieldName","operator","ignoreCase","ignoreAccent","toLowerCase","predicate","Predicate","e","search","searchKey","fieldNames","comparer","fnOperators","sortBy","isFromGroup","sortByForeignKey","direction","order","sorts","temp","endsWith","replace","fnSort","filterQueries","i","length","j","sortByDesc","group","format","page","pageIndex","pageSize","range","start","end","take","nos","skip","select","hierarchy","query","selectorFn","foreignKey","requiresCount","aggregate","type","name","filter","q","filterQueryLists","singles","filtered","indexOf","res","isComplex","processOperator","condition","predicates","apply","and","args","_i","arguments","combinePredicates","combine","or","fromJson","json","len","fromJSONData","pred","validate","record","isAnd","ret","getObject","toJson","p","preds","result"],"sources":["C:/Users/leezh/Documents/Coding/Orbital Test/Orbital-Duty-Planner/node_modules/@syncfusion/ej2-data/src/query.js"],"sourcesContent":["import { DataUtil } from './util';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * Query class is used to build query which is used by the DataManager to communicate with datasource.\n */\nvar Query = /** @class */ (function () {\n    /**\n     * Constructor for Query class.\n     * @param  {string|string[]} from?\n     * @hidden\n     */\n    function Query(from) {\n        /** @hidden */\n        this.subQuery = null;\n        /** @hidden */\n        this.isChild = false;\n        /** @hidden */\n        this.distincts = [];\n        this.queries = [];\n        this.key = '';\n        this.fKey = '';\n        if (typeof from === 'string') {\n            this.fromTable = from;\n        }\n        else if (from && from instanceof Array) {\n            this.lookups = from;\n        }\n        this.expands = [];\n        this.sortedColumns = [];\n        this.groupedColumns = [];\n        this.subQuery = null;\n        this.isChild = false;\n        this.params = [];\n        this.lazyLoad = [];\n        return this;\n    }\n    /**\n     * Sets the primary key.\n     * @param  {string} field - Defines the column field.\n     */\n    Query.prototype.setKey = function (field) {\n        this.key = field;\n        return this;\n    };\n    /**\n     * Sets default DataManager to execute query.\n     * @param  {DataManager} dataManager - Defines the DataManager.\n     */\n    Query.prototype.using = function (dataManager) {\n        this.dataManager = dataManager;\n        return this;\n    };\n    /**\n     * Executes query with the given DataManager.\n     * @param  {DataManager} dataManager - Defines the DataManager.\n     * @param  {Function} done - Defines the success callback.\n     * @param  {Function} fail - Defines the failure callback.\n     * @param  {Function} always - Defines the callback which will be invoked on either success or failure.\n     *\n     * <pre>\n     * let dataManager: DataManager = new DataManager([{ ID: '10' }, { ID: '2' }, { ID: '1' }, { ID: '20' }]);\n     * let query: Query = new Query();\n     * query.sortBy('ID', (x: string, y: string): number => { return parseInt(x, 10) - parseInt(y, 10) });\n     * let promise: Promise< Object > = query.execute(dataManager);\n     * promise.then((e: { result: Object }) => { });\n     * </pre>\n     */\n    Query.prototype.execute = function (dataManager, done, fail, always) {\n        dataManager = dataManager || this.dataManager;\n        if (dataManager) {\n            return dataManager.executeQuery(this, done, fail, always);\n        }\n        return DataUtil.throwError('Query - execute() : dataManager needs to be is set using \"using\" function or should be passed as argument');\n    };\n    /**\n     * Executes query with the local datasource.\n     * @param  {DataManager} dataManager - Defines the DataManager.\n     */\n    Query.prototype.executeLocal = function (dataManager) {\n        dataManager = dataManager || this.dataManager;\n        if (dataManager) {\n            return dataManager.executeLocal(this);\n        }\n        return DataUtil.throwError('Query - executeLocal() : dataManager needs to be is set using \"using\" function or should be passed as argument');\n    };\n    /**\n     * Creates deep copy of the Query object.\n     */\n    Query.prototype.clone = function () {\n        var cloned = new Query();\n        cloned.queries = this.queries.slice(0);\n        cloned.key = this.key;\n        cloned.isChild = this.isChild;\n        cloned.dataManager = this.dataManager;\n        cloned.fromTable = this.fromTable;\n        cloned.params = this.params.slice(0);\n        cloned.expands = this.expands.slice(0);\n        cloned.sortedColumns = this.sortedColumns.slice(0);\n        cloned.groupedColumns = this.groupedColumns.slice(0);\n        cloned.subQuerySelector = this.subQuerySelector;\n        cloned.subQuery = this.subQuery;\n        cloned.fKey = this.fKey;\n        cloned.isCountRequired = this.isCountRequired;\n        cloned.distincts = this.distincts.slice(0);\n        cloned.lazyLoad = this.lazyLoad.slice(0);\n        return cloned;\n    };\n    /**\n     * Specifies the name of table to retrieve data in query execution.\n     * @param  {string} tableName - Defines the table name.\n     */\n    Query.prototype.from = function (tableName) {\n        this.fromTable = tableName;\n        return this;\n    };\n    /**\n     * Adds additional parameter which will be sent along with the request which will be generated while DataManager execute.\n     * @param  {string} key - Defines the key of additional parameter.\n     * @param  {Function|string} value - Defines the value for the key.\n     */\n    Query.prototype.addParams = function (key, value) {\n        if (typeof value === 'function') {\n            this.params.push({ key: key, fn: value });\n        }\n        else {\n            this.params.push({ key: key, value: value });\n        }\n        return this;\n    };\n    /**\n     * @hidden\n     */\n    Query.prototype.distinct = function (fields) {\n        if (typeof fields === 'string') {\n            this.distincts = [].slice.call([fields], 0);\n        }\n        else {\n            this.distincts = fields.slice(0);\n        }\n        return this;\n    };\n    /**\n     * Expands the related table.\n     * @param  {string|Object[]} tables\n     */\n    Query.prototype.expand = function (tables) {\n        if (typeof tables === 'string') {\n            this.expands = [].slice.call([tables], 0);\n        }\n        else {\n            this.expands = tables.slice(0);\n        }\n        return this;\n    };\n    /**\n     * Filter data with given filter criteria.\n     * @param  {string|Predicate} fieldName - Defines the column field or Predicate.\n     * @param  {string} operator - Defines the operator how to filter data.\n     * @param  {string|number|boolean} value - Defines the values to match with data.\n     * @param  {boolean} ignoreCase - If ignore case set to false, then filter data with exact match or else\n     * filter data with case insensitive.\n     */\n    Query.prototype.where = function (fieldName, operator, value, ignoreCase, ignoreAccent) {\n        operator = operator ? (operator).toLowerCase() : null;\n        var predicate = null;\n        if (typeof fieldName === 'string') {\n            predicate = new Predicate(fieldName, operator, value, ignoreCase, ignoreAccent);\n        }\n        else if (fieldName instanceof Predicate) {\n            predicate = fieldName;\n        }\n        this.queries.push({\n            fn: 'onWhere',\n            e: predicate\n        });\n        return this;\n    };\n    /**\n     * Search data with given search criteria.\n     * @param  {string|number|boolean} searchKey - Defines the search key.\n     * @param  {string|string[]} fieldNames - Defines the collection of column fields.\n     * @param  {string} operator - Defines the operator how to search data.\n     * @param  {boolean} ignoreCase - If ignore case set to false, then filter data with exact match or else\n     * filter data with case insensitive.\n     */\n    Query.prototype.search = function (searchKey, fieldNames, operator, ignoreCase, ignoreAccent) {\n        if (typeof fieldNames === 'string') {\n            fieldNames = [fieldNames];\n        }\n        if (!operator || operator === 'none') {\n            operator = 'contains';\n        }\n        var comparer = DataUtil.fnOperators[operator];\n        this.queries.push({\n            fn: 'onSearch',\n            e: {\n                fieldNames: fieldNames,\n                operator: operator,\n                searchKey: searchKey,\n                ignoreCase: ignoreCase,\n                ignoreAccent: ignoreAccent,\n                comparer: comparer\n            }\n        });\n        return this;\n    };\n    /**\n     * Sort the data with given sort criteria.\n     * By default, sort direction is ascending.\n     * @param  {string|string[]} fieldName - Defines the single or collection of column fields.\n     * @param  {string|Function} comparer - Defines the sort direction or custom sort comparer function.\n     */\n    Query.prototype.sortBy = function (fieldName, comparer, isFromGroup) {\n        return this.sortByForeignKey(fieldName, comparer, isFromGroup);\n    };\n    /**\n     * Sort the data with given sort criteria.\n     * By default, sort direction is ascending.\n     * @param  {string|string[]} fieldName - Defines the single or collection of column fields.\n     * @param  {string|Function} comparer - Defines the sort direction or custom sort comparer function.\n     * @param  {string} direction - Defines the sort direction .\n     */\n    Query.prototype.sortByForeignKey = function (fieldName, comparer, isFromGroup, direction) {\n        var order = !isNullOrUndefined(direction) ? direction : 'ascending';\n        var sorts;\n        var temp;\n        if (typeof fieldName === 'string' && DataUtil.endsWith(fieldName.toLowerCase(), ' desc')) {\n            fieldName = fieldName.replace(/ desc$/i, '');\n            comparer = 'descending';\n        }\n        if (!comparer || typeof comparer === 'string') {\n            order = comparer ? comparer.toLowerCase() : 'ascending';\n            comparer = DataUtil.fnSort(comparer);\n        }\n        if (isFromGroup) {\n            sorts = Query.filterQueries(this.queries, 'onSortBy');\n            for (var i = 0; i < sorts.length; i++) {\n                temp = sorts[i].e.fieldName;\n                if (typeof temp === 'string') {\n                    if (temp === fieldName) {\n                        return this;\n                    }\n                }\n                else if (temp instanceof Array) {\n                    for (var j = 0; j < temp.length; j++) {\n                        if (temp[j] === fieldName || fieldName.toLowerCase() === temp[j] + ' desc') {\n                            return this;\n                        }\n                    }\n                }\n            }\n        }\n        this.queries.push({\n            fn: 'onSortBy',\n            e: {\n                fieldName: fieldName,\n                comparer: comparer,\n                direction: order\n            }\n        });\n        return this;\n    };\n    /**\n     * Sorts data in descending order.\n     * @param  {string} fieldName - Defines the column field.\n     */\n    Query.prototype.sortByDesc = function (fieldName) {\n        return this.sortBy(fieldName, 'descending');\n    };\n    /**\n     * Groups data with the given field name.\n     * @param  {string} fieldName - Defines the column field.\n     */\n    Query.prototype.group = function (fieldName, fn, format) {\n        this.sortBy(fieldName, null, true);\n        this.queries.push({\n            fn: 'onGroup',\n            e: {\n                fieldName: fieldName,\n                comparer: fn ? fn : null,\n                format: format ? format : null\n            }\n        });\n        return this;\n    };\n    /**\n     * Gets data based on the given page index and size.\n     * @param  {number} pageIndex - Defines the current page index.\n     * @param  {number} pageSize - Defines the no of records per page.\n     */\n    Query.prototype.page = function (pageIndex, pageSize) {\n        this.queries.push({\n            fn: 'onPage',\n            e: {\n                pageIndex: pageIndex,\n                pageSize: pageSize\n            }\n        });\n        return this;\n    };\n    /**\n     * Gets data based on the given start and end index.\n     * @param  {number} start - Defines the start index of the datasource.\n     * @param  {number} end - Defines the end index of the datasource.\n     */\n    Query.prototype.range = function (start, end) {\n        this.queries.push({\n            fn: 'onRange',\n            e: {\n                start: start,\n                end: end\n            }\n        });\n        return this;\n    };\n    /**\n     * Gets data from the top of the data source based on given number of records count.\n     * @param  {number} nos - Defines the no of records to retrieve from datasource.\n     */\n    Query.prototype.take = function (nos) {\n        this.queries.push({\n            fn: 'onTake',\n            e: {\n                nos: nos\n            }\n        });\n        return this;\n    };\n    /**\n     * Skips data with given number of records count from the top of the data source.\n     * @param  {number} nos - Defines the no of records skip in the datasource.\n     */\n    Query.prototype.skip = function (nos) {\n        this.queries.push({\n            fn: 'onSkip',\n            e: { nos: nos }\n        });\n        return this;\n    };\n    /**\n     * Selects specified columns from the data source.\n     * @param  {string|string[]} fieldNames - Defines the collection of column fields.\n     */\n    Query.prototype.select = function (fieldNames) {\n        if (typeof fieldNames === 'string') {\n            fieldNames = [].slice.call([fieldNames], 0);\n        }\n        this.queries.push({\n            fn: 'onSelect',\n            e: { fieldNames: fieldNames }\n        });\n        return this;\n    };\n    /**\n     * Gets the records in hierarchical relationship from two tables. It requires the foreign key to relate two tables.\n     * @param  {Query} query - Defines the query to relate two tables.\n     * @param  {Function} selectorFn - Defines the custom function to select records.\n     */\n    Query.prototype.hierarchy = function (query, selectorFn) {\n        this.subQuerySelector = selectorFn;\n        this.subQuery = query;\n        return this;\n    };\n    /**\n     * Sets the foreign key which is used to get data from the related table.\n     * @param  {string} key - Defines the foreign key.\n     */\n    Query.prototype.foreignKey = function (key) {\n        this.fKey = key;\n        return this;\n    };\n    /**\n     * It is used to get total number of records in the DataManager execution result.\n     */\n    Query.prototype.requiresCount = function () {\n        this.isCountRequired = true;\n        return this;\n    };\n    //type - sum, avg, min, max\n    /**\n     * Aggregate the data with given type and field name.\n     * @param  {string} type - Defines the aggregate type.\n     * @param  {string} field - Defines the column field to aggregate.\n     */\n    Query.prototype.aggregate = function (type, field) {\n        this.queries.push({\n            fn: 'onAggregates',\n            e: { field: field, type: type }\n        });\n        return this;\n    };\n    /**\n     * Pass array of filterColumn query for performing filter operation.\n     * @param  {QueryOptions[]} queries\n     * @param  {string} name\n     * @hidden\n     */\n    Query.filterQueries = function (queries, name) {\n        return queries.filter(function (q) {\n            return q.fn === name;\n        });\n    };\n    /**\n     * To get the list of queries which is already filtered in current data source.\n     * @param  {Object[]} queries\n     * @param  {string[]} singles\n     * @hidden\n     */\n    Query.filterQueryLists = function (queries, singles) {\n        var filtered = queries.filter(function (q) {\n            return singles.indexOf(q.fn) !== -1;\n        });\n        var res = {};\n        for (var i = 0; i < filtered.length; i++) {\n            if (!res[filtered[i].fn]) {\n                res[filtered[i].fn] = filtered[i].e;\n            }\n        }\n        return res;\n    };\n    return Query;\n}());\nexport { Query };\n/**\n * Predicate class is used to generate complex filter criteria.\n * This will be used by DataManager to perform multiple filtering operation.\n */\nvar Predicate = /** @class */ (function () {\n    /**\n     * Constructor for Predicate class.\n     * @param  {string|Predicate} field\n     * @param  {string} operator\n     * @param  {string|number|boolean|Predicate|Predicate[]} value\n     * @param  {boolean=false} ignoreCase\n     * @hidden\n     */\n    function Predicate(field, operator, value, ignoreCase, ignoreAccent) {\n        if (ignoreCase === void 0) { ignoreCase = false; }\n        /** @hidden */\n        this.ignoreAccent = false;\n        /** @hidden */\n        this.isComplex = false;\n        if (typeof field === 'string') {\n            this.field = field;\n            this.operator = operator.toLowerCase();\n            this.value = value;\n            this.ignoreCase = ignoreCase;\n            this.ignoreAccent = ignoreAccent;\n            this.isComplex = false;\n            this.comparer = DataUtil.fnOperators.processOperator(this.operator);\n        }\n        else if (field instanceof Predicate && value instanceof Predicate || value instanceof Array) {\n            this.isComplex = true;\n            this.condition = operator.toLowerCase();\n            this.predicates = [field];\n            if (value instanceof Array) {\n                [].push.apply(this.predicates, value);\n            }\n            else {\n                this.predicates.push(value);\n            }\n        }\n        return this;\n    }\n    /**\n     * Adds n-number of new predicates on existing predicate with “and” condition.\n     * @param  {Object[]} args - Defines the collection of predicates.\n     */\n    Predicate.and = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return Predicate.combinePredicates([].slice.call(args, 0), 'and');\n    };\n    /**\n     * Adds new predicate on existing predicate with “and” condition.\n     * @param  {string} field - Defines the column field.\n     * @param  {string} operator - Defines the operator how to filter data.\n     * @param  {string} value - Defines the values to match with data.\n     * @param  {boolean} ignoreCase? - If ignore case set to false, then filter data with exact match or else\n     * filter data with case insensitive.\n     */\n    Predicate.prototype.and = function (field, operator, value, ignoreCase, ignoreAccent) {\n        return Predicate.combine(this, field, operator, value, 'and', ignoreCase, ignoreAccent);\n    };\n    /**\n     * Adds n-number of new predicates on existing predicate with “or” condition.\n     * @param  {Object[]} args - Defines the collection of predicates.\n     */\n    Predicate.or = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return Predicate.combinePredicates([].slice.call(args, 0), 'or');\n    };\n    /**\n     * Adds new predicate on existing predicate with “or” condition.\n     * @param  {string} field - Defines the column field.\n     * @param  {string} operator - Defines the operator how to filter data.\n     * @param  {string} value - Defines the values to match with data.\n     * @param  {boolean} ignoreCase? - If ignore case set to false, then filter data with exact match or else\n     * filter data with case insensitive.\n     */\n    Predicate.prototype.or = function (field, operator, value, ignoreCase, ignoreAccent) {\n        return Predicate.combine(this, field, operator, value, 'or', ignoreCase, ignoreAccent);\n    };\n    /**\n     * Converts plain JavaScript object to Predicate object.\n     * @param  {Predicate[]|Predicate} json - Defines single or collection of Predicate.\n     */\n    Predicate.fromJson = function (json) {\n        if (json instanceof Array) {\n            var res = [];\n            for (var i = 0, len = json.length; i < len; i++) {\n                res.push(this.fromJSONData(json[i]));\n            }\n            return res;\n        }\n        var pred = json;\n        return this.fromJSONData(pred);\n    };\n    /**\n     * Validate the record based on the predicates.\n     * @param  {Object} record - Defines the datasource record.\n     */\n    Predicate.prototype.validate = function (record) {\n        var predicate = this.predicates ? this.predicates : [];\n        var isAnd;\n        var ret;\n        if (!this.isComplex && this.comparer) {\n            return this.comparer.call(this, DataUtil.getObject(this.field, record), this.value, this.ignoreCase, this.ignoreAccent);\n        }\n        isAnd = this.condition === 'and';\n        for (var i = 0; i < predicate.length; i++) {\n            ret = predicate[i].validate(record);\n            if (isAnd) {\n                if (!ret) {\n                    return false;\n                }\n            }\n            else {\n                if (ret) {\n                    return true;\n                }\n            }\n        }\n        return isAnd;\n    };\n    /**\n     * Converts predicates to plain JavaScript.\n     * This method is uses Json stringify when serializing Predicate object.\n     */\n    Predicate.prototype.toJson = function () {\n        var predicates;\n        var p;\n        if (this.isComplex) {\n            predicates = [];\n            p = this.predicates;\n            for (var i = 0; i < p.length; i++) {\n                predicates.push(p[i].toJson());\n            }\n        }\n        return {\n            isComplex: this.isComplex,\n            field: this.field,\n            operator: this.operator,\n            value: this.value,\n            ignoreCase: this.ignoreCase,\n            ignoreAccent: this.ignoreAccent,\n            condition: this.condition,\n            predicates: predicates\n        };\n    };\n    Predicate.combinePredicates = function (predicates, operator) {\n        if (predicates.length === 1) {\n            if (!(predicates[0] instanceof Array)) {\n                return predicates[0];\n            }\n            predicates = predicates[0];\n        }\n        return new Predicate(predicates[0], operator, predicates.slice(1));\n    };\n    Predicate.combine = function (pred, field, operator, value, condition, ignoreCase, ignoreAccent) {\n        if (field instanceof Predicate) {\n            return Predicate[condition](pred, field);\n        }\n        if (typeof field === 'string') {\n            return Predicate[condition](pred, new Predicate(field, operator, value, ignoreCase, ignoreAccent));\n        }\n        return DataUtil.throwError('Predicate - ' + condition + ' : invalid arguments');\n    };\n    Predicate.fromJSONData = function (json) {\n        var preds = json.predicates || [];\n        var len = preds.length;\n        var predicates = [];\n        var result;\n        for (var i = 0; i < len; i++) {\n            predicates.push(this.fromJSONData(preds[i]));\n        }\n        if (!json.isComplex) {\n            result = new Predicate(json.field, json.operator, json.value, json.ignoreCase, json.ignoreAccent);\n        }\n        else {\n            result = new Predicate(predicates[0], json.condition, predicates.slice(1));\n        }\n        return result;\n    };\n    return Predicate;\n}());\nexport { Predicate };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}