{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nimport { Component, Property, Event, EventHandler, L10n, compile, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, detach, append, Animation } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, KeyboardEvents, setValue, getValue, ChildProperty } from '@syncfusion/ej2-base';\nimport { Collection, Complex, Browser, Ajax, getUniqueID, closest, remove } from '@syncfusion/ej2-base';\nimport { createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { select, selectAll } from '@syncfusion/ej2-base';\nvar CONTROL_WRAPPER = 'e-upload e-control-wrapper';\nvar INPUT_WRAPPER = 'e-file-select';\nvar DROP_AREA = 'e-file-drop';\nvar DROP_WRAPPER = 'e-file-select-wrap';\nvar LIST_PARENT = 'e-upload-files';\nvar FILE = 'e-upload-file-list';\nvar STATUS = 'e-file-status';\nvar ACTION_BUTTONS = 'e-upload-actions';\nvar UPLOAD_BUTTONS = 'e-file-upload-btn e-css e-btn e-flat e-primary';\nvar CLEAR_BUTTONS = 'e-file-clear-btn e-css e-btn e-flat';\nvar FILE_NAME = 'e-file-name';\nvar FILE_TYPE = 'e-file-type';\nvar FILE_SIZE = 'e-file-size';\nvar REMOVE_ICON = 'e-file-remove-btn';\nvar DELETE_ICON = 'e-file-delete-btn';\nvar SPINNER_PANE = 'e-spinner-pane';\nvar ABORT_ICON = 'e-file-abort-btn';\nvar RETRY_ICON = 'e-file-reload-btn';\nvar DRAG_HOVER = 'e-upload-drag-hover';\nvar PROGRESS_WRAPPER = 'e-upload-progress-wrap';\nvar PROGRESSBAR = 'e-upload-progress-bar';\nvar PROGRESSBAR_TEXT = 'e-progress-bar-text';\nvar UPLOAD_INPROGRESS = 'e-upload-progress';\nvar UPLOAD_SUCCESS = 'e-upload-success';\nvar UPLOAD_FAILED = 'e-upload-fails';\nvar TEXT_CONTAINER = 'e-file-container';\nvar VALIDATION_FAILS = 'e-validation-fails';\nvar RTL = 'e-rtl';\nvar DISABLED = 'e-disabled';\nvar RTL_CONTAINER = 'e-rtl-container';\nvar ICON_FOCUSED = 'e-clear-icon-focus';\nvar PROGRESS_INNER_WRAPPER = 'e-progress-inner-wrap';\nvar PAUSE_UPLOAD = 'e-file-pause-btn';\nvar RESUME_UPLOAD = 'e-file-play-btn';\nvar RESTRICT_RETRY = 'e-restrict-retry';\nvar wrapperAttr = ['title', 'style', 'class'];\nvar FORM_UPLOAD = 'e-form-upload';\nvar HIDDEN_INPUT = 'e-hidden-file-input';\nvar INVALID_FILE = 'e-file-invalid';\nvar INFORMATION = 'e-file-information';\n\nvar FilesProp =\n/** @class */\nfunction (_super) {\n  __extends(FilesProp, _super);\n\n  function FilesProp() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property('')], FilesProp.prototype, \"name\", void 0);\n\n  __decorate([Property(null)], FilesProp.prototype, \"size\", void 0);\n\n  __decorate([Property('')], FilesProp.prototype, \"type\", void 0);\n\n  return FilesProp;\n}(ChildProperty);\n\nexport { FilesProp };\n\nvar ButtonsProps =\n/** @class */\nfunction (_super) {\n  __extends(ButtonsProps, _super);\n\n  function ButtonsProps() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property('Browse...')], ButtonsProps.prototype, \"browse\", void 0);\n\n  __decorate([Property('Upload')], ButtonsProps.prototype, \"upload\", void 0);\n\n  __decorate([Property('Clear')], ButtonsProps.prototype, \"clear\", void 0);\n\n  return ButtonsProps;\n}(ChildProperty);\n\nexport { ButtonsProps };\n\nvar AsyncSettings =\n/** @class */\nfunction (_super) {\n  __extends(AsyncSettings, _super);\n\n  function AsyncSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property('')], AsyncSettings.prototype, \"saveUrl\", void 0);\n\n  __decorate([Property('')], AsyncSettings.prototype, \"removeUrl\", void 0);\n\n  __decorate([Property(0)], AsyncSettings.prototype, \"chunkSize\", void 0);\n\n  __decorate([Property(3)], AsyncSettings.prototype, \"retryCount\", void 0);\n\n  __decorate([Property(500)], AsyncSettings.prototype, \"retryAfterDelay\", void 0);\n\n  return AsyncSettings;\n}(ChildProperty);\n\nexport { AsyncSettings };\n/**\n * The uploader component allows to upload images, documents, and other files from local to server.\n * ```html\n * <input type='file' name='images[]' id='upload'/>\n * ```\n * ```typescript\n * <script>\n *   var uploadObj = new Uploader();\n *   uploadObj.appendTo('#upload');\n * </script>\n * ```\n */\n\nvar Uploader =\n/** @class */\nfunction (_super) {\n  __extends(Uploader, _super);\n  /**\n   * Triggers when change the Uploader value.\n   *\n   * @param {UploaderModel} options - Specifies the Uploader model.\n   * @param {string | HTMLInputElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function Uploader(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.initialAttr = {\n      accept: null,\n      multiple: false,\n      disabled: false\n    };\n    _this.uploadedFilesData = [];\n    _this.base64String = [];\n    _this.isForm = false;\n    _this.allTypes = false;\n    _this.pausedData = [];\n    _this.uploadMetaData = [];\n    _this.tabIndex = '0';\n    _this.btnTabIndex = '0';\n    _this.disableKeyboardNavigation = false;\n    _this.count = -1;\n    _this.actionCompleteCount = 0;\n    _this.flag = true;\n    _this.selectedFiles = [];\n    _this.uploaderName = 'UploadFiles';\n    _this.fileStreams = [];\n    _this.newFileRef = 0;\n    _this.isFirstFileOnSelection = false;\n    _this.dragCounter = 0;\n    /**\n     * Get the file item(li) which are shown in file list.\n     *\n     * @private\n     */\n\n    _this.fileList = [];\n    /**\n     * Get the data of files which are shown in file list.\n     *\n     * @private\n     */\n\n    _this.filesData = [];\n    _this.uploaderOptions = options;\n    return _this;\n  }\n  /**\n   * Calls internally if any of the property value is changed.\n   *\n   * @param {UploaderModel} newProp - Returns the dynamic property value of the component.\n   * @param {UploaderModel} oldProp - Returns the previous property value of the component.\n   * @returns {void}\n   * @private\n   */\n\n\n  Uploader.prototype.onPropertyChanged = function (newProp, oldProp) {\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'allowedExtensions':\n          this.setExtensions(this.allowedExtensions);\n          this.clearAll();\n          break;\n\n        case 'enabled':\n          this.setControlStatus();\n          break;\n\n        case 'multiple':\n          this.setMultipleSelection();\n          break;\n\n        case 'enableRtl':\n          this.setRTL();\n          this.reRenderFileList();\n          break;\n\n        case 'buttons':\n          this.buttons.browse = isNullOrUndefined(this.buttons.browse) ? '' : this.buttons.browse;\n          this.buttons.clear = isNullOrUndefined(this.buttons.clear) ? '' : this.buttons.clear;\n          this.buttons.upload = isNullOrUndefined(this.buttons.upload) ? '' : this.buttons.upload;\n          this.renderButtonTemplates();\n          break;\n\n        case 'dropArea':\n          this.unBindDropEvents();\n          this.updateDropArea();\n          break;\n\n        case 'htmlAttributes':\n          this.updateHTMLAttrToElement();\n          this.updateHTMLAttrToWrapper();\n          this.checkHTMLAttributes(true);\n          break;\n\n        case 'files':\n          this.renderPreLoadFiles();\n          break;\n\n        case 'directoryUpload':\n          this.updateDirectoryAttributes();\n          break;\n\n        case 'template':\n          this.clearAll();\n          break;\n\n        case 'minFileSize':\n        case 'maxFileSize':\n        case 'autoUpload':\n          this.clearAll();\n          break;\n\n        case 'sequentialUpload':\n          this.clearAll();\n          break;\n\n        case 'locale':\n          this.l10n.setLocale(this.locale);\n          this.setLocalizedTexts();\n          this.preLocaleObj = getValue('currentLocale', this.l10n);\n          break;\n\n        case 'cssClass':\n          this.setCSSClass(oldProp.cssClass);\n          break;\n      }\n    }\n  };\n\n  Uploader.prototype.setLocalizedTexts = function () {\n    if (isNullOrUndefined(this.template)) {\n      if (typeof this.buttons.browse === 'string') {\n        this.browseButton.innerText = this.buttons.browse === 'Browse...' ? this.localizedTexts('Browse') : this.buttons.browse;\n        this.browseButton.setAttribute('title', this.browseButton.innerText);\n\n        if (this.uploadWrapper && !isNullOrUndefined(this.uploadWrapper.querySelector('.' + DROP_AREA))) {\n          this.uploadWrapper.querySelector('.' + DROP_AREA).innerHTML = this.localizedTexts('dropFilesHint');\n        }\n      }\n\n      this.updateFileList();\n    }\n  };\n\n  Uploader.prototype.getKeyValue = function (val) {\n    var keyValue;\n\n    for (var _i = 0, _a = Object.keys(this.preLocaleObj); _i < _a.length; _i++) {\n      var key = _a[_i];\n\n      if (this.preLocaleObj[key] === val) {\n        keyValue = key;\n      }\n    }\n\n    return keyValue;\n  };\n\n  Uploader.prototype.updateFileList = function () {\n    var element;\n    /* istanbul ignore next */\n\n    if (this.fileList.length > 0 && !isNullOrUndefined(this.uploadWrapper.querySelector('.' + LIST_PARENT))) {\n      for (var i = 0; i < this.fileList.length; i++) {\n        element = this.fileList[i].querySelector('.e-file-status');\n        element.innerHTML = this.localizedTexts(this.getKeyValue(this.filesData[i].status));\n        this.filesData[i].status = this.localizedTexts(this.getKeyValue(this.filesData[i].status));\n\n        if (this.fileList[i].classList.contains(UPLOAD_SUCCESS)) {\n          this.fileList[i].querySelector('.e-icons').setAttribute('title', this.localizedTexts('delete'));\n        }\n\n        if (this.fileList[i].querySelector('.e-file-play-btn')) {\n          this.fileList[i].querySelector('.e-icons').setAttribute('title', this.localizedTexts('resume'));\n        }\n\n        if (this.fileList[i].querySelector('.e-file-remove-btn')) {\n          this.fileList[i].querySelector('.e-icons').setAttribute('title', this.localizedTexts('remove'));\n        }\n\n        if (this.fileList[i].querySelector('.e-file-reload-btn')) {\n          this.fileList[i].querySelector('.e-icons').setAttribute('title', this.localizedTexts('retry'));\n        }\n\n        if (!this.autoUpload) {\n          this.uploadButton.innerText = this.buttons.upload === 'Upload' ? this.localizedTexts('Upload') : this.buttons.upload;\n          this.uploadButton.setAttribute('title', this.localizedTexts('Upload'));\n          this.clearButton.innerText = this.buttons.clear === 'Clear' ? this.localizedTexts('Clear') : this.buttons.clear;\n          this.clearButton.setAttribute('title', this.localizedTexts('Clear'));\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.reRenderFileList = function () {\n    if (this.listParent) {\n      detach(this.listParent);\n      this.listParent = null;\n      this.fileList = [];\n      this.createFileList(this.filesData);\n\n      if (this.actionButtons) {\n        this.removeActionButtons();\n        this.renderActionButtons();\n        this.checkActionButtonStatus();\n      }\n    }\n  };\n\n  Uploader.prototype.preRender = function () {\n    this.localeText = {\n      Browse: 'Browse...',\n      Clear: 'Clear',\n      Upload: 'Upload',\n      dropFilesHint: 'Or drop files here',\n      invalidMaxFileSize: 'File size is too large',\n      invalidMinFileSize: 'File size is too small',\n      invalidFileType: 'File type is not allowed',\n      uploadFailedMessage: 'File failed to upload',\n      uploadSuccessMessage: 'File uploaded successfully',\n      removedSuccessMessage: 'File removed successfully',\n      removedFailedMessage: 'Unable to remove file',\n      inProgress: 'Uploading',\n      readyToUploadMessage: 'Ready to upload',\n      abort: 'Abort',\n      remove: 'Remove',\n      cancel: 'Cancel',\n      delete: 'Delete file',\n      pauseUpload: 'File upload paused',\n      pause: 'Pause',\n      resume: 'Resume',\n      retry: 'Retry',\n      fileUploadCancel: 'File upload canceled',\n      invalidFileSelection: 'Invalid files selected',\n      totalFiles: 'Total files',\n      size: 'Size'\n    };\n    this.l10n = new L10n('uploader', this.localeText, this.locale);\n    this.preLocaleObj = getValue('currentLocale', this.l10n);\n    this.formRendered();\n    this.updateHTMLAttrToElement();\n    this.checkHTMLAttributes(false);\n    var ejInstance = getValue('ej2_instances', this.element);\n    /* istanbul ignore next */\n\n    if (this.element.tagName === 'EJS-UPLOADER') {\n      var inputElement = this.createElement('input', {\n        attrs: {\n          type: 'file'\n        }\n      });\n      var index = 0;\n\n      for (index; index < this.element.attributes.length; index++) {\n        inputElement.setAttribute(this.element.attributes[index].nodeName, this.element.attributes[index].nodeValue);\n        inputElement.innerHTML = this.element.innerHTML;\n      }\n\n      if (!inputElement.hasAttribute('name')) {\n        inputElement.setAttribute('name', 'UploadFiles');\n      }\n\n      this.element.appendChild(inputElement);\n      this.element = inputElement;\n      setValue('ej2_instances', ejInstance, this.element);\n    }\n    /* istanbul ignore next */\n\n\n    if (ejInstance[0].isPureReactComponent) {\n      if (!isNullOrUndefined(ejInstance[0].props.name)) {\n        this.element.setAttribute('name', ejInstance[0].props.name);\n      } else if (!isNullOrUndefined(ejInstance[0].props.id) && isNullOrUndefined(ejInstance[0].props.name)) {\n        this.element.setAttribute('name', ejInstance[0].props.id);\n      } else {\n        this.element.setAttribute('name', 'UploadFiles');\n      }\n    }\n\n    if (isNullOrUndefined(this.element.getAttribute('name'))) {\n      this.element.setAttribute('name', this.element.getAttribute('id'));\n    }\n\n    if (!this.element.hasAttribute('type')) {\n      this.element.setAttribute('type', 'file');\n    }\n\n    this.updateDirectoryAttributes();\n    this.keyConfigs = {\n      enter: 'enter'\n    };\n\n    if (this.element.hasAttribute('tabindex')) {\n      this.tabIndex = this.element.getAttribute('tabindex');\n    }\n\n    this.browserName = Browser.info.name;\n    this.uploaderName = this.element.getAttribute('name');\n  };\n\n  Uploader.prototype.formRendered = function () {\n    var parentEle = closest(this.element, 'form');\n\n    if (!isNullOrUndefined(parentEle)) {\n      for (; parentEle && parentEle !== document.documentElement; parentEle = parentEle.parentElement) {\n        if (parentEle.tagName === 'FORM') {\n          this.isForm = true;\n          this.formElement = parentEle;\n          parentEle.setAttribute('enctype', 'multipart/form-data');\n          parentEle.setAttribute('encoding', 'multipart/form-data');\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.getPersistData = function () {\n    return this.addOnPersist(['filesData']);\n  };\n  /**\n   * Return the module name of the component.\n   *\n   * @returns {string} Returns the component name.\n   */\n\n\n  Uploader.prototype.getModuleName = function () {\n    return 'uploader';\n  };\n\n  Uploader.prototype.updateDirectoryAttributes = function () {\n    if (this.directoryUpload) {\n      this.element.setAttribute('directory', 'true');\n      this.element.setAttribute('webkitdirectory', 'true');\n    } else {\n      this.element.removeAttribute('directory');\n      this.element.removeAttribute('webkitdirectory');\n    }\n  };\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  Uploader.prototype.render = function () {\n    this.renderBrowseButton();\n    this.initializeUpload();\n    this.updateHTMLAttrToWrapper();\n    this.wireEvents();\n    this.setMultipleSelection();\n    this.setExtensions(this.allowedExtensions);\n    this.setRTL();\n    this.renderPreLoadFiles();\n    this.setControlStatus();\n    this.setCSSClass();\n  };\n\n  Uploader.prototype.renderBrowseButton = function () {\n    this.browseButton = this.createElement('button', {\n      className: 'e-css e-btn',\n      attrs: {\n        'type': 'button'\n      }\n    });\n    this.browseButton.setAttribute('tabindex', this.tabIndex);\n\n    if (typeof this.buttons.browse === 'string') {\n      this.browseButton.textContent = this.buttons.browse === 'Browse...' ? this.localizedTexts('Browse') : this.buttons.browse;\n      this.browseButton.setAttribute('title', this.browseButton.innerText);\n    } else {\n      this.browseButton.appendChild(this.buttons.browse);\n    }\n\n    this.element.setAttribute('aria-label', 'Uploader');\n  };\n\n  Uploader.prototype.renderActionButtons = function () {\n    this.element.setAttribute('tabindex', '-1');\n    this.actionButtons = this.createElement('div', {\n      className: ACTION_BUTTONS\n    });\n    this.uploadButton = this.createElement('button', {\n      className: UPLOAD_BUTTONS,\n      attrs: {\n        'type': 'button',\n        'tabindex': this.btnTabIndex\n      }\n    });\n    this.clearButton = this.createElement('button', {\n      className: CLEAR_BUTTONS,\n      attrs: {\n        'type': 'button',\n        'tabindex': this.btnTabIndex\n      }\n    });\n    this.actionButtons.appendChild(this.clearButton);\n    this.actionButtons.appendChild(this.uploadButton);\n    this.renderButtonTemplates();\n    this.uploadWrapper.appendChild(this.actionButtons);\n    this.browseButton.blur();\n\n    if (!this.isPreloadFiles) {\n      this.uploadButton.focus();\n    }\n\n    this.wireActionButtonEvents();\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.serverActionButtonsEventBind = function (element) {\n    if (element && !this.isForm) {\n      this.browseButton.blur();\n      this.actionButtons = element;\n      this.uploadButton = this.actionButtons.querySelector('.e-file-upload-btn');\n      this.clearButton = this.actionButtons.querySelector('.e-file-clear-btn');\n      this.uploadButton.focus();\n      this.unwireActionButtonEvents();\n      this.wireActionButtonEvents();\n      this.checkActionButtonStatus();\n    }\n  };\n\n  Uploader.prototype.wireActionButtonEvents = function () {\n    EventHandler.add(this.uploadButton, 'click', this.uploadButtonClick, this);\n    EventHandler.add(this.clearButton, 'click', this.clearButtonClick, this);\n  };\n\n  Uploader.prototype.unwireActionButtonEvents = function () {\n    EventHandler.remove(this.uploadButton, 'click', this.uploadButtonClick);\n    EventHandler.remove(this.clearButton, 'click', this.clearButtonClick);\n  };\n\n  Uploader.prototype.removeActionButtons = function () {\n    if (this.actionButtons) {\n      this.unwireActionButtonEvents();\n      detach(this.actionButtons);\n      this.actionButtons = null;\n    }\n  };\n\n  Uploader.prototype.renderButtonTemplates = function () {\n    if (typeof this.buttons.browse === 'string') {\n      this.browseButton.textContent = this.buttons.browse === 'Browse...' ? this.localizedTexts('Browse') : this.buttons.browse;\n      this.browseButton.setAttribute('title', this.browseButton.textContent);\n    } else {\n      this.browseButton.innerHTML = '';\n      this.browseButton.appendChild(this.buttons.browse);\n    }\n\n    if (this.uploadButton) {\n      var uploadText = isNullOrUndefined(this.buttons.upload) ? 'Upload' : this.buttons.upload;\n      this.buttons.upload = uploadText;\n\n      if (typeof this.buttons.upload === 'string') {\n        this.uploadButton.textContent = this.buttons.upload === 'Upload' ? this.localizedTexts('Upload') : this.buttons.upload;\n        this.uploadButton.setAttribute('title', this.uploadButton.textContent);\n      } else {\n        this.uploadButton.innerHTML = '';\n        this.uploadButton.appendChild(this.buttons.upload);\n      }\n    }\n\n    if (this.clearButton) {\n      var clearText = isNullOrUndefined(this.buttons.clear) ? 'Clear' : this.buttons.clear;\n      this.buttons.clear = clearText;\n\n      if (typeof this.buttons.clear === 'string') {\n        this.clearButton.textContent = this.buttons.clear === 'Clear' ? this.localizedTexts('Clear') : this.buttons.clear;\n        this.clearButton.setAttribute('title', this.clearButton.textContent);\n      } else {\n        this.clearButton.innerHTML = '';\n        this.clearButton.appendChild(this.buttons.clear);\n      }\n    }\n  };\n\n  Uploader.prototype.initializeUpload = function () {\n    this.element.setAttribute('tabindex', '-1');\n    var inputWrapper = this.createElement('span', {\n      className: INPUT_WRAPPER\n    });\n    this.element.parentElement.insertBefore(inputWrapper, this.element);\n    this.dropAreaWrapper = this.createElement('div', {\n      className: DROP_WRAPPER\n    });\n    this.element.parentElement.insertBefore(this.dropAreaWrapper, this.element);\n    inputWrapper.appendChild(this.element);\n    this.dropAreaWrapper.appendChild(this.browseButton);\n    this.dropAreaWrapper.appendChild(inputWrapper);\n    this.uploadWrapper = this.createElement('div', {\n      className: CONTROL_WRAPPER\n    });\n    this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper, this.dropAreaWrapper);\n    this.uploadWrapper.appendChild(this.dropAreaWrapper);\n    this.setDropArea();\n  };\n\n  Uploader.prototype.renderPreLoadFiles = function () {\n    if (this.files.length) {\n      if (this.enablePersistence && this.filesData.length) {\n        this.createFileList(this.filesData);\n        return;\n      }\n\n      if (isNullOrUndefined(this.files[0].size)) {\n        return;\n      }\n\n      this.isPreloadFiles = true;\n      var files = [].slice.call(this.files);\n      var filesData = [];\n\n      if (!this.multiple) {\n        this.clearData();\n        files = [files[0]];\n      }\n\n      for (var _i = 0, files_1 = files; _i < files_1.length; _i++) {\n        var data = files_1[_i];\n        var fileData = {\n          name: data.name + '.' + data.type.split('.')[data.type.split('.').length - 1],\n          rawFile: '',\n          size: data.size,\n          status: this.localizedTexts('uploadSuccessMessage'),\n          type: data.type,\n          validationMessages: {\n            minSize: '',\n            maxSize: ''\n          },\n          statusCode: '2'\n        };\n        filesData.push(fileData);\n        this.filesData.push(fileData);\n      }\n\n      this.createFileList(filesData);\n\n      if (!this.autoUpload && this.listParent && !this.actionButtons && (!this.isForm || this.allowUpload()) && this.showFileList) {\n        this.renderActionButtons();\n      }\n\n      this.checkActionButtonStatus();\n\n      if (this.sequentialUpload) {\n        this.count = this.filesData.length - 1;\n      }\n\n      this.isPreloadFiles = false;\n    }\n  };\n\n  Uploader.prototype.checkActionButtonStatus = function () {\n    if (this.actionButtons) {\n      var length_1 = this.uploadWrapper.querySelectorAll('.' + VALIDATION_FAILS).length + this.uploadWrapper.querySelectorAll('.e-upload-fails:not(.e-upload-progress)').length + this.uploadWrapper.querySelectorAll('span.' + UPLOAD_SUCCESS).length + this.uploadWrapper.querySelectorAll('span.' + UPLOAD_INPROGRESS).length;\n\n      if (length_1 > 0 && length_1 === this.uploadWrapper.querySelectorAll('li').length) {\n        this.uploadButton.setAttribute('disabled', 'disabled');\n      } else {\n        this.uploadButton.removeAttribute('disabled');\n      }\n    }\n  };\n\n  Uploader.prototype.setDropArea = function () {\n    var dropTextArea = this.dropAreaWrapper.querySelector('.e-file-drop');\n\n    if (this.dropArea) {\n      this.dropZoneElement = typeof this.dropArea !== 'string' ? this.dropArea : select(this.dropArea, document);\n      var element = this.element;\n      var enableDropText = false;\n\n      while (element.parentNode) {\n        element = element.parentNode;\n\n        if (element === this.dropZoneElement) {\n          enableDropText = true;\n\n          if (!dropTextArea) {\n            this.createDropTextHint();\n          } else {\n            dropTextArea.innerHTML = this.localizedTexts('dropFilesHint');\n          }\n        }\n      }\n\n      if (!enableDropText && dropTextArea) {\n        remove(dropTextArea);\n      }\n    } else if (!isNullOrUndefined(this.uploaderOptions) && this.uploaderOptions.dropArea === undefined) {\n      this.createDropTextHint();\n      this.dropZoneElement = this.uploadWrapper;\n      this.setProperties({\n        dropArea: this.uploadWrapper\n      }, true);\n    }\n\n    this.bindDropEvents();\n  };\n\n  Uploader.prototype.updateDropArea = function () {\n    if (this.dropArea) {\n      this.setDropArea();\n    } else {\n      this.dropZoneElement = null;\n      var dropTextArea = this.dropAreaWrapper.querySelector('.e-file-drop');\n\n      if (dropTextArea) {\n        remove(dropTextArea);\n      }\n    }\n  };\n\n  Uploader.prototype.createDropTextHint = function () {\n    var fileDropArea = this.createElement('span', {\n      className: DROP_AREA\n    });\n    fileDropArea.innerHTML = this.localizedTexts('dropFilesHint');\n    this.dropAreaWrapper.appendChild(fileDropArea);\n  };\n\n  Uploader.prototype.updateHTMLAttrToElement = function () {\n    if (!isNullOrUndefined(this.htmlAttributes)) {\n      for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n        var pro = _a[_i];\n\n        if (wrapperAttr.indexOf(pro) < 0) {\n          this.element.setAttribute(pro, this.htmlAttributes[pro]);\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.updateHTMLAttrToWrapper = function () {\n    if (!isNullOrUndefined(this.htmlAttributes)) {\n      for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n        var pro = _a[_i];\n\n        if (wrapperAttr.indexOf(pro) > -1) {\n          if (pro === 'class') {\n            var updatedClassValues = this.htmlAttributes[pro].replace(/\\s+/g, ' ').trim();\n\n            if (updatedClassValues !== '') {\n              addClass([this.uploadWrapper], updatedClassValues.split(' '));\n            }\n          } else if (pro === 'style') {\n            var uploadStyle = this.uploadWrapper.getAttribute(pro);\n            uploadStyle = !isNullOrUndefined(uploadStyle) ? uploadStyle + this.htmlAttributes[pro] : this.htmlAttributes[pro];\n            this.uploadWrapper.setAttribute(pro, uploadStyle);\n          } else {\n            this.uploadWrapper.setAttribute(pro, this.htmlAttributes[pro]);\n          }\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.setMultipleSelection = function () {\n    if (this.multiple && !this.element.hasAttribute('multiple')) {\n      var newAttr = document.createAttribute('multiple');\n      newAttr.value = 'multiple';\n      this.element.setAttributeNode(newAttr);\n    } else if (!this.multiple) {\n      this.element.removeAttribute('multiple');\n    }\n  };\n\n  Uploader.prototype.checkAutoUpload = function (fileData) {\n    if (this.autoUpload) {\n      if (this.sequentialUpload) {\n        /* istanbul ignore next */\n        this.sequenceUpload(fileData);\n      } else {\n        this.upload(fileData);\n      }\n\n      this.removeActionButtons();\n    } else if (!this.actionButtons) {\n      this.renderActionButtons();\n    }\n\n    this.checkActionButtonStatus();\n  };\n\n  Uploader.prototype.sequenceUpload = function (fileData) {\n    if (this.filesData.length - fileData.length === 0 || this.filesData[this.filesData.length - fileData.length - 1].statusCode !== '1') {\n      ++this.count;\n      var isFileListCreated = this.showFileList ? false : true;\n\n      if (typeof this.filesData[this.count] === 'object') {\n        this.isFirstFileOnSelection = false;\n        this.upload(this.filesData[this.count], isFileListCreated);\n\n        if (this.filesData[this.count].statusCode === '0') {\n          this.sequenceUpload(fileData);\n        }\n      } else {\n        --this.count;\n      }\n    }\n  };\n\n  Uploader.prototype.setCSSClass = function (oldCSSClass) {\n    var updatedCssClassValue = this.cssClass;\n\n    if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n      updatedCssClassValue = this.cssClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    if (!isNullOrUndefined(this.cssClass) && updatedCssClassValue !== '') {\n      addClass([this.uploadWrapper], updatedCssClassValue.split(updatedCssClassValue.indexOf(',') > -1 ? ',' : ' '));\n    }\n\n    var updatedOldCssClass = oldCSSClass;\n\n    if (!isNullOrUndefined(oldCSSClass)) {\n      updatedOldCssClass = oldCSSClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    if (!isNullOrUndefined(oldCSSClass) && updatedOldCssClass !== '') {\n      removeClass([this.uploadWrapper], updatedOldCssClass.split(' '));\n    }\n  };\n\n  Uploader.prototype.wireEvents = function () {\n    EventHandler.add(this.browseButton, 'click', this.browseButtonClick, this);\n    EventHandler.add(this.element, 'change', this.onSelectFiles, this);\n    EventHandler.add(document, 'click', this.removeFocus, this);\n    this.keyboardModule = new KeyboardEvents(this.uploadWrapper, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n\n    if (this.isForm) {\n      EventHandler.add(this.formElement, 'reset', this.resetForm, this);\n    }\n  };\n\n  Uploader.prototype.unWireEvents = function () {\n    EventHandler.remove(this.browseButton, 'click', this.browseButtonClick);\n    EventHandler.remove(this.element, 'change', this.onSelectFiles);\n    EventHandler.remove(document, 'click', this.removeFocus);\n\n    if (this.isForm) {\n      EventHandler.remove(this.formElement, 'reset', this.resetForm);\n    }\n\n    if (this.keyboardModule) {\n      this.keyboardModule.destroy();\n    }\n  };\n\n  Uploader.prototype.resetForm = function () {\n    this.clearAll();\n  };\n\n  Uploader.prototype.keyActionHandler = function (e) {\n    var targetElement = e.target;\n\n    switch (e.action) {\n      case 'enter':\n        if (e.target === this.clearButton) {\n          this.clearButtonClick();\n        } else if (e.target === this.uploadButton) {\n          this.uploadButtonClick();\n        } else if (e.target === this.browseButton) {\n          this.browseButtonClick();\n        } else if (targetElement.classList.contains(PAUSE_UPLOAD)) {\n          var metaData = this.getCurrentMetaData(null, e);\n          metaData.file.statusCode = '4';\n          metaData.file.status = this.localizedTexts('pauseUpload');\n          this.abortUpload(metaData, false);\n        } else if (targetElement.classList.contains(RESUME_UPLOAD)) {\n          this.resumeUpload(this.getCurrentMetaData(null, e), e);\n        } else if (targetElement.classList.contains(RETRY_ICON)) {\n          var metaData = this.getCurrentMetaData(null, e);\n\n          if (!isNullOrUndefined(metaData)) {\n            metaData.file.statusCode = '1';\n            metaData.file.status = this.localizedTexts('readyToUploadMessage');\n            this.chunkUpload(metaData.file);\n          } else {\n            var target = e.target.parentElement;\n            var fileData = this.filesData[this.fileList.indexOf(target)];\n            this.retry(fileData);\n          }\n        } else {\n          this.removeFiles(e);\n\n          if (!targetElement.classList.contains(ABORT_ICON)) {\n            this.browseButton.focus();\n          }\n        }\n\n        e.preventDefault();\n        e.stopPropagation();\n        break;\n    }\n  };\n\n  Uploader.prototype.getCurrentMetaData = function (fileInfo, e) {\n    var fileData;\n    var targetMetaData;\n\n    if (isNullOrUndefined(fileInfo)) {\n      var target = e.target.parentElement;\n      fileData = this.filesData[this.fileList.indexOf(target)];\n    } else {\n      fileData = fileInfo;\n    }\n\n    for (var i = 0; i < this.uploadMetaData.length; i++) {\n      if (this.uploadMetaData[i].file.name === fileData.name) {\n        targetMetaData = this.uploadMetaData[i];\n      }\n    }\n\n    return targetMetaData;\n  };\n\n  Uploader.prototype.removeFocus = function () {\n    if (this.uploadWrapper && this.listParent && this.listParent.querySelector('.' + ICON_FOCUSED)) {\n      document.activeElement.blur();\n      this.listParent.querySelector('.' + ICON_FOCUSED).classList.remove(ICON_FOCUSED);\n    }\n  };\n\n  Uploader.prototype.browseButtonClick = function () {\n    this.element.click();\n  };\n\n  Uploader.prototype.uploadButtonClick = function () {\n    if (this.sequentialUpload) {\n      this.sequenceUpload(this.filesData);\n    } else {\n      this.upload(this.filesData);\n    }\n  };\n\n  Uploader.prototype.clearButtonClick = function () {\n    this.clearAll();\n    /* istanbul ignore next */\n\n    if (this.sequentialUpload) {\n      this.count = -1;\n    }\n\n    this.actionCompleteCount = 0;\n  };\n\n  Uploader.prototype.bindDropEvents = function () {\n    if (this.dropZoneElement) {\n      EventHandler.add(this.dropZoneElement, 'drop', this.dropElement, this);\n      EventHandler.add(this.dropZoneElement, 'dragover', this.dragHover, this);\n      EventHandler.add(this.dropZoneElement, 'dragleave', this.onDragLeave, this);\n      EventHandler.add(this.dropZoneElement, 'paste', this.onPasteFile, this);\n      EventHandler.add(this.dropZoneElement, 'dragenter', this.onDragEnter, this);\n    }\n  };\n\n  Uploader.prototype.unBindDropEvents = function () {\n    if (this.dropZoneElement) {\n      EventHandler.remove(this.dropZoneElement, 'drop', this.dropElement);\n      EventHandler.remove(this.dropZoneElement, 'dragover', this.dragHover);\n      EventHandler.remove(this.dropZoneElement, 'dragleave', this.onDragLeave);\n      EventHandler.remove(this.dropZoneElement, 'dragenter', this.onDragEnter);\n    }\n  };\n\n  Uploader.prototype.onDragEnter = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    this.dropZoneElement.classList.add(DRAG_HOVER);\n    this.dragCounter = this.dragCounter + 1;\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  Uploader.prototype.onDragLeave = function () {\n    if (!this.enabled) {\n      return;\n    }\n\n    this.dragCounter = this.dragCounter - 1;\n\n    if (!this.dragCounter) {\n      this.dropZoneElement.classList.remove(DRAG_HOVER);\n    }\n  };\n\n  Uploader.prototype.dragHover = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.dropEffect !== 'Default') {\n      e.dataTransfer.dropEffect = this.dropEffect.toLowerCase();\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.dropElement = function (e) {\n    this.dragCounter = 0;\n    this.dropZoneElement.classList.remove(DRAG_HOVER);\n    this.onSelectFiles(e);\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.onPasteFile = function (event) {\n    var item = event.clipboardData.items;\n\n    if (event.type == 'paste' && this.browserName !== 'msie' && this.browserName !== 'edge' && this.browserName !== 'safari') {\n      this.element.files = event.clipboardData.files;\n    }\n\n    if (item.length !== 1) {\n      return;\n    }\n\n    var pasteFile = [].slice.call(item)[0];\n\n    if (pasteFile.kind === 'file' && pasteFile.type.match('^image/')) {\n      this.renderSelectedFiles(event, [pasteFile.getAsFile()], false, true);\n    }\n  };\n\n  Uploader.prototype.getSelectedFiles = function (index) {\n    var data = [];\n    var liElement = this.fileList[index];\n    var allFiles = this.getFilesData();\n    var nameElements = +liElement.getAttribute('data-files-count');\n    var startIndex = 0;\n\n    for (var i = 0; i < index; i++) {\n      startIndex += +this.fileList[i].getAttribute('data-files-count');\n    }\n\n    for (var j = startIndex; j < startIndex + nameElements; j++) {\n      data.push(allFiles[j]);\n    }\n\n    return data;\n  };\n\n  Uploader.prototype.removeFiles = function (args) {\n    if (!this.enabled) {\n      return;\n    }\n\n    var selectedElement = args.target.parentElement;\n    var index = this.fileList.indexOf(selectedElement);\n    var liElement = this.fileList[index];\n    var formUpload = this.isFormUpload();\n    var fileData = formUpload ? this.getSelectedFiles(index) : this.getFilesInArray(this.filesData[index]);\n\n    if (isNullOrUndefined(fileData)) {\n      return;\n    }\n\n    if (args.target.classList.contains(ABORT_ICON) && !formUpload) {\n      fileData[0].statusCode = '5';\n\n      if (!isNullOrUndefined(liElement)) {\n        var spinnerTarget = liElement.querySelector('.' + ABORT_ICON);\n        createSpinner({\n          target: spinnerTarget,\n          width: '20px'\n        });\n        showSpinner(spinnerTarget);\n      }\n\n      if (this.sequentialUpload) {\n        /* istanbul ignore next */\n        this.uploadSequential();\n      }\n\n      if (!liElement.classList.contains(RESTRICT_RETRY)) {\n        this.checkActionComplete(true);\n      }\n    } else if (!closest(args.target, '.' + SPINNER_PANE)) {\n      this.remove(fileData, false, false, true, args);\n    }\n\n    this.element.value = '';\n    this.checkActionButtonStatus();\n  };\n\n  Uploader.prototype.removeFilesData = function (file, customTemplate) {\n    var index;\n\n    if (customTemplate) {\n      if (!this.showFileList) {\n        index = this.filesData.indexOf(file);\n        this.filesData.splice(index, 1);\n      }\n\n      return;\n    }\n\n    var selectedElement = this.getLiElement(file);\n\n    if (isNullOrUndefined(selectedElement)) {\n      return;\n    }\n\n    detach(selectedElement);\n    index = this.fileList.indexOf(selectedElement);\n    this.fileList.splice(index, 1);\n    this.filesData.splice(index, 1);\n\n    if (this.fileList.length === 0 && !isNullOrUndefined(this.listParent)) {\n      detach(this.listParent);\n      this.listParent = null;\n      this.removeActionButtons();\n    }\n\n    if (this.sequentialUpload) {\n      /* istanbul ignore next */\n      if (index <= this.count) {\n        --this.count;\n      }\n    }\n  };\n\n  Uploader.prototype.removeUploadedFile = function (file, eventArgs, removeDirectly, custom) {\n    var _this = this;\n\n    var selectedFiles = file;\n    var ajax = new Ajax(this.asyncSettings.removeUrl, 'POST', true, null);\n    ajax.emitError = false;\n    var formData = new FormData();\n\n    ajax.beforeSend = function (e) {\n      eventArgs.currentRequest = ajax.httpRequest;\n\n      if (!removeDirectly) {\n        _this.trigger('removing', eventArgs, function (eventArgs) {\n          if (eventArgs.cancel) {\n            e.cancel = true;\n          } else {\n            _this.removingEventCallback(eventArgs, formData, selectedFiles, file);\n          }\n        });\n      } else {\n        _this.removingEventCallback(eventArgs, formData, selectedFiles, file);\n      }\n    };\n\n    ajax.onLoad = function (e) {\n      _this.removeCompleted(e, selectedFiles, custom);\n\n      return {};\n    };\n    /* istanbul ignore next */\n\n\n    ajax.onError = function (e) {\n      _this.removeFailed(e, selectedFiles, custom);\n\n      return {};\n    };\n\n    ajax.send(formData);\n  };\n\n  Uploader.prototype.removingEventCallback = function (eventArgs, formData, selectedFiles, file) {\n    /* istanbul ignore next */\n    var name = this.element.getAttribute('name');\n    var liElement = this.getLiElement(file);\n\n    if (!isNullOrUndefined(liElement) && (!isNullOrUndefined(liElement.querySelector('.' + DELETE_ICON)) || !isNullOrUndefined(liElement.querySelector('.' + REMOVE_ICON)))) {\n      var spinnerTarget = liElement.querySelector('.' + DELETE_ICON) ? liElement.querySelector('.' + DELETE_ICON) : liElement.querySelector('.' + REMOVE_ICON);\n      createSpinner({\n        target: spinnerTarget,\n        width: '20px'\n      });\n      showSpinner(spinnerTarget);\n    }\n\n    if (eventArgs.postRawFile && !isNullOrUndefined(selectedFiles.rawFile) && selectedFiles.rawFile !== '') {\n      formData.append(name, selectedFiles.rawFile, selectedFiles.name);\n    } else {\n      formData.append(name, selectedFiles.name);\n    }\n\n    this.updateFormData(formData, eventArgs.customFormData);\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.updateFormData = function (formData, customData) {\n    if (customData.length > 0 && customData[0]) {\n      var _loop_1 = function (i) {\n        var data = customData[i]; // eslint-disable-next-line @typescript-eslint/tslint/config\n\n        var value = Object.keys(data).map(function (e) {\n          return data[e];\n        });\n        formData.append(Object.keys(data)[0], value);\n      };\n\n      for (var i = 0; i < customData.length; i++) {\n        _loop_1(i);\n      }\n    }\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.updateCustomheader = function (request, currentRequest) {\n    if (currentRequest.length > 0 && currentRequest[0]) {\n      var _loop_2 = function (i) {\n        var data = currentRequest[i]; // eslint-disable-next-line @typescript-eslint/tslint/config\n\n        var value = Object.keys(data).map(function (e) {\n          return data[e];\n        });\n        request.setRequestHeader(Object.keys(data)[0], value);\n      };\n\n      for (var i = 0; i < currentRequest.length; i++) {\n        _loop_2(i);\n      }\n    }\n  };\n\n  Uploader.prototype.removeCompleted = function (e, files, customTemplate) {\n    var response = e && e.currentTarget ? this.getResponse(e) : null;\n    var status = e.target;\n\n    if (status.readyState === 4 && status.status >= 200 && status.status <= 299) {\n      var args = {\n        e: e,\n        response: response,\n        operation: 'remove',\n        file: this.updateStatus(files, this.localizedTexts('removedSuccessMessage'), '2')\n      };\n      this.trigger('success', args);\n      this.removeFilesData(files, customTemplate);\n      var index = this.uploadedFilesData.indexOf(files);\n      this.uploadedFilesData.splice(index, 1);\n      this.trigger('change', {\n        files: this.uploadedFilesData\n      });\n    } else {\n      this.removeFailed(e, files, customTemplate);\n    }\n  };\n\n  Uploader.prototype.removeFailed = function (e, files, customTemplate) {\n    var response = e && e.currentTarget ? this.getResponse(e) : null;\n    var args = {\n      e: e,\n      response: response,\n      operation: 'remove',\n      file: this.updateStatus(files, this.localizedTexts('removedFailedMessage'), '0')\n    };\n\n    if (!customTemplate) {\n      var index = this.filesData.indexOf(files);\n      var rootElement = this.fileList[index];\n\n      if (rootElement) {\n        rootElement.classList.remove(UPLOAD_SUCCESS);\n        rootElement.classList.add(UPLOAD_FAILED);\n        var statusElement = rootElement.querySelector('.' + STATUS);\n\n        if (statusElement) {\n          statusElement.classList.remove(UPLOAD_SUCCESS);\n          statusElement.classList.add(UPLOAD_FAILED);\n        }\n      }\n\n      this.checkActionButtonStatus();\n    }\n\n    this.trigger('failure', args);\n    var liElement = this.getLiElement(files);\n    /* istanbul ignore next */\n\n    if (!isNullOrUndefined(liElement) && !isNullOrUndefined(liElement.querySelector('.' + DELETE_ICON))) {\n      var spinnerTarget = liElement.querySelector('.' + DELETE_ICON);\n      hideSpinner(spinnerTarget);\n      detach(liElement.querySelector('.e-spinner-pane'));\n    }\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.getFilesFromFolder = function (event) {\n    this.filesEntries = [];\n    var items = this.multiple ? event.dataTransfer.items : [event.dataTransfer.items[0]];\n    var validDirectoryUpload = this.checkDirectoryUpload(items);\n\n    if (!validDirectoryUpload) {\n      return;\n    }\n\n    var _loop_3 = function (i) {\n      var item = items[i].webkitGetAsEntry();\n\n      if (item.isFile) {\n        var files_2 = [];\n        item.file(function (fileObj) {\n          var path = item.fullPath;\n          files_2.push({\n            'path': path,\n            'file': fileObj\n          });\n        });\n        this_1.renderSelectedFiles(event, files_2, true);\n      } else if (item.isDirectory) {\n        this_1.traverseFileTree(item, event);\n      }\n    };\n\n    var this_1 = this;\n\n    for (var i = 0; i < items.length; i++) {\n      _loop_3(i);\n    }\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.checkDirectoryUpload = function (items) {\n    for (var i = 0; items && i < items.length; i++) {\n      var item = items[i].webkitGetAsEntry();\n\n      if (item.isDirectory) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n  /* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.traverseFileTree = function (item, event) {\n    /* eslint-enable @typescript-eslint/explicit-module-boundary-types */\n    if (item.isFile) {\n      this.filesEntries.push(item);\n    } else if (item.isDirectory) {\n      var directoryReader = item.createReader();\n      this.readFileFromDirectory(directoryReader, event);\n    }\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.readFileFromDirectory = function (directoryReader, event) {\n    var _this = this;\n\n    directoryReader.readEntries(function (entries) {\n      for (var i = 0; i < entries.length; i++) {\n        _this.traverseFileTree(entries[i], event);\n      }\n\n      _this.pushFilesEntries(event);\n\n      if (entries.length) {\n        _this.readFileFromDirectory(directoryReader);\n      }\n    });\n  };\n\n  Uploader.prototype.pushFilesEntries = function (event) {\n    var _this = this;\n\n    var files = [];\n\n    var _loop_4 = function (i) {\n      this_2.filesEntries[i].file(function (fileObj) {\n        if (_this.filesEntries.length) {\n          var path = _this.filesEntries[i].fullPath;\n          files.push({\n            'path': path,\n            'file': fileObj\n          });\n\n          if (i === _this.filesEntries.length - 1) {\n            _this.filesEntries = [];\n\n            _this.renderSelectedFiles(event, files, true);\n          }\n        }\n      });\n    };\n\n    var this_2 = this;\n\n    for (var i = 0; i < this.filesEntries.length; i++) {\n      _loop_4(i);\n    }\n  };\n\n  Uploader.prototype.onSelectFiles = function (args) {\n    if (!this.enabled) {\n      return;\n    }\n\n    var targetFiles;\n    /* istanbul ignore next */\n\n    if (args.type === 'drop') {\n      if (this.directoryUpload) {\n        this.getFilesFromFolder(args);\n      } else {\n        var files = this.sortFilesList = args.dataTransfer.files;\n\n        if (this.browserName !== 'msie' && this.browserName !== 'edge' && this.browserName !== 'safari') {\n          this.element.files = files;\n        }\n\n        if (files.length > 0) {\n          targetFiles = this.multiple ? this.sortFileList(files) : [files[0]];\n          this.renderSelectedFiles(args, targetFiles);\n        }\n      }\n    } else {\n      targetFiles = [].slice.call(args.target.files);\n      this.renderSelectedFiles(args, targetFiles);\n    }\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.getBase64 = function (file) {\n    return new Promise(function (resolve, reject) {\n      var fileReader = new FileReader();\n      fileReader.readAsDataURL(file);\n\n      fileReader.onload = function () {\n        return resolve(fileReader.result);\n      };\n\n      fileReader.onerror = function (error) {\n        return reject(error);\n      };\n    });\n  };\n  /* istanbul ignore next */\n\n  /* tslint:ignore */\n\n\n  Uploader.prototype.renderSelectedFiles = function (args, targetFiles, directory, paste) {\n    var _this = this;\n\n    this.base64String = [];\n    var eventArgs = {\n      event: args,\n      cancel: false,\n      filesData: [],\n      isModified: false,\n      modifiedFilesData: [],\n      progressInterval: '',\n      isCanceled: false,\n      currentRequest: null,\n      customFormData: null\n    };\n    /* istanbul ignore next */\n\n    if (targetFiles.length < 1) {\n      eventArgs.isCanceled = true;\n      this.trigger('selected', eventArgs);\n      return;\n    }\n\n    this.flag = true;\n    var fileData = [];\n\n    if (!this.multiple) {\n      this.clearData(true);\n      targetFiles = [targetFiles[0]];\n    }\n\n    for (var i = 0; i < targetFiles.length; i++) {\n      var file = directory ? targetFiles[i].file : targetFiles[i];\n      this.updateInitialFileDetails(args, targetFiles, file, i, fileData, directory, paste);\n    }\n\n    eventArgs.filesData = fileData;\n\n    if (this.allowedExtensions.indexOf('*') > -1) {\n      this.allTypes = true;\n    }\n\n    if (!this.allTypes) {\n      fileData = this.checkExtension(fileData);\n    }\n\n    this.trigger('selected', eventArgs, function (eventArgs) {\n      _this._internalRenderSelect(eventArgs, fileData);\n    });\n  };\n\n  Uploader.prototype.updateInitialFileDetails = function (args, // eslint-disable-next-line @typescript-eslint/indent\n  targetFiles, file, i, fileData, directory, paste) {\n    var fileName = directory ? targetFiles[i].path.substring(1, targetFiles[i].path.length) : paste ? getUniqueID(file.name.substring(0, file.name.lastIndexOf('.'))) + '.' + this.getFileType(file.name) : this.directoryUpload ? targetFiles[i].webkitRelativePath : file.name;\n    var fileDetails = {\n      name: fileName,\n      rawFile: file,\n      size: file.size,\n      status: this.localizedTexts('readyToUploadMessage'),\n      type: this.getFileType(file.name),\n      validationMessages: this.validatedFileSize(file.size),\n      statusCode: '1',\n      id: getUniqueID(file.name.substring(0, file.name.lastIndexOf('.'))) + '.' + this.getFileType(file.name)\n    };\n    /* istanbul ignore next */\n\n    if (paste) {\n      fileDetails.fileSource = 'paste';\n    }\n\n    fileDetails.status = fileDetails.validationMessages.minSize !== '' ? this.localizedTexts('invalidMinFileSize') : fileDetails.validationMessages.maxSize !== '' ? this.localizedTexts('invalidMaxFileSize') : fileDetails.status;\n\n    if (fileDetails.validationMessages.minSize !== '' || fileDetails.validationMessages.maxSize !== '') {\n      fileDetails.statusCode = '0';\n    }\n\n    fileData.push(fileDetails);\n  };\n\n  Uploader.prototype._internalRenderSelect = function (eventArgs, fileData) {\n    if (!eventArgs.cancel) {\n      /* istanbul ignore next */\n      this.selectedFiles = this.selectedFiles.concat(fileData);\n      this.btnTabIndex = this.disableKeyboardNavigation ? '-1' : '0';\n\n      if (this.showFileList) {\n        if (eventArgs.isModified && eventArgs.modifiedFilesData.length > 0) {\n          for (var j = 0; j < eventArgs.modifiedFilesData.length; j++) {\n            for (var k = 0; k < fileData.length; k++) {\n              if (eventArgs.modifiedFilesData[j].id === fileData[k].id) {\n                eventArgs.modifiedFilesData[j].rawFile = fileData[k].rawFile;\n              }\n            }\n          }\n\n          var dataFiles = this.allTypes ? eventArgs.modifiedFilesData : this.checkExtension(eventArgs.modifiedFilesData);\n          this.updateSortedFileList(dataFiles);\n          this.filesData = dataFiles;\n\n          if (!this.isForm || this.allowUpload()) {\n            this.checkAutoUpload(dataFiles);\n          }\n        } else {\n          this.createFileList(fileData, true);\n          this.filesData = this.filesData.concat(fileData);\n\n          if (!this.isForm || this.allowUpload()) {\n            this.checkAutoUpload(fileData);\n          }\n        }\n\n        if (!isNullOrUndefined(eventArgs.progressInterval) && eventArgs.progressInterval !== '') {\n          this.progressInterval = eventArgs.progressInterval;\n        }\n      } else {\n        this.filesData = this.filesData.concat(fileData);\n\n        if (this.autoUpload) {\n          this.upload(this.filesData, true);\n        }\n      }\n\n      this.raiseActionComplete();\n      this.isFirstFileOnSelection = true;\n    }\n  };\n\n  Uploader.prototype.allowUpload = function () {\n    var allowFormUpload = false;\n\n    if (this.isForm && !isNullOrUndefined(this.asyncSettings.saveUrl) && this.asyncSettings.saveUrl !== '') {\n      allowFormUpload = true;\n    }\n\n    return allowFormUpload;\n  };\n\n  Uploader.prototype.isFormUpload = function () {\n    var isFormUpload = false;\n\n    if (this.isForm && (isNullOrUndefined(this.asyncSettings.saveUrl) || this.asyncSettings.saveUrl === '') && (isNullOrUndefined(this.asyncSettings.removeUrl) || this.asyncSettings.removeUrl === '')) {\n      isFormUpload = true;\n    }\n\n    return isFormUpload;\n  };\n\n  Uploader.prototype.clearData = function (singleUpload) {\n    if (!isNullOrUndefined(this.listParent)) {\n      detach(this.listParent);\n      this.listParent = null;\n    }\n\n    if (this.browserName !== 'msie' && !singleUpload) {\n      this.element.value = '';\n    }\n\n    this.fileList = [];\n    this.filesData = [];\n    this.removeActionButtons();\n  };\n\n  Uploader.prototype.updateSortedFileList = function (filesData) {\n    var previousListClone = this.createElement('div', {\n      id: 'clonewrapper'\n    });\n    var added = -1;\n    var removedList;\n\n    if (this.listParent) {\n      for (var i = 0; i < this.listParent.querySelectorAll('li').length; i++) {\n        var liElement = this.listParent.querySelectorAll('li')[i];\n        previousListClone.appendChild(liElement.cloneNode(true));\n      }\n\n      removedList = this.listParent.querySelectorAll('li');\n\n      for (var _i = 0, removedList_1 = removedList; _i < removedList_1.length; _i++) {\n        var item = removedList_1[_i];\n        detach(item);\n      }\n\n      this.removeActionButtons();\n      var oldList = [].slice.call(previousListClone.childNodes);\n      detach(this.listParent);\n      this.listParent = null;\n      this.fileList = [];\n      this.createParentUL();\n\n      for (var index = 0; index < filesData.length; index++) {\n        for (var j = 0; j < this.filesData.length; j++) {\n          if (this.filesData[j].name === filesData[index].name) {\n            this.listParent.appendChild(oldList[j]);\n            EventHandler.add(oldList[j].querySelector('.e-icons'), 'click', this.removeFiles, this);\n            this.fileList.push(oldList[j]);\n            added = index;\n          }\n        }\n\n        if (added !== index) {\n          this.createFileList([filesData[index]]);\n        }\n      }\n    } else {\n      this.createFileList(filesData);\n    }\n  };\n\n  Uploader.prototype.isBlank = function (str) {\n    return !str || /^\\s*$/.test(str);\n  };\n\n  Uploader.prototype.checkExtension = function (files) {\n    var dropFiles = files;\n\n    if (!this.isBlank(this.allowedExtensions)) {\n      var allowedExtensions = [];\n      var extensions = this.allowedExtensions.split(',');\n\n      for (var _i = 0, extensions_1 = extensions; _i < extensions_1.length; _i++) {\n        var extension = extensions_1[_i];\n        allowedExtensions.push(extension.trim().toLocaleLowerCase());\n      }\n\n      for (var i = 0; i < files.length; i++) {\n        if (allowedExtensions.indexOf(('.' + files[i].type).toLocaleLowerCase()) === -1) {\n          files[i].status = this.localizedTexts('invalidFileType');\n          files[i].statusCode = '0';\n        }\n      }\n    }\n\n    return dropFiles;\n  };\n\n  Uploader.prototype.validatedFileSize = function (fileSize) {\n    var minSizeError = '';\n    var maxSizeError = '';\n\n    if (fileSize < this.minFileSize) {\n      minSizeError = this.localizedTexts('invalidMinFileSize');\n    } else if (fileSize > this.maxFileSize) {\n      maxSizeError = this.localizedTexts('invalidMaxFileSize');\n    } else {\n      minSizeError = '';\n      maxSizeError = '';\n    }\n\n    var errorMessage = {\n      minSize: minSizeError,\n      maxSize: maxSizeError\n    };\n    return errorMessage;\n  };\n\n  Uploader.prototype.isPreLoadFile = function (fileData) {\n    var isPreload = false;\n\n    for (var i = 0; i < this.files.length; i++) {\n      if (this.files[i].name === fileData.name.slice(0, fileData.name.lastIndexOf('.')) && this.files[i].type === fileData.type) {\n        isPreload = true;\n      }\n    }\n\n    return isPreload;\n  };\n\n  Uploader.prototype.createCustomfileList = function (fileData) {\n    this.createParentUL();\n\n    for (var _i = 0, fileData_1 = fileData; _i < fileData_1.length; _i++) {\n      var listItem = fileData_1[_i];\n      var listElement = this.createElement('li', {\n        className: FILE,\n        attrs: {\n          'data-file-name': listItem.name\n        }\n      });\n      this.uploadTemplateFn = this.templateComplier(this.template);\n      var liTempCompiler = this.uploadTemplateFn(listItem, this, 'template', this.element.id + 'Template', this.isStringTemplate, null, listElement);\n\n      if (liTempCompiler) {\n        var fromElements = [].slice.call(liTempCompiler);\n        append(fromElements, listElement);\n      }\n\n      var index = fileData.indexOf(listItem);\n      var eventArgs = {\n        element: listElement,\n        fileInfo: listItem,\n        index: index,\n        isPreload: this.isPreLoadFile(listItem)\n      };\n      var eventsArgs = {\n        element: listElement,\n        fileInfo: listItem,\n        index: index,\n        isPreload: this.isPreLoadFile(listItem)\n      };\n      this.trigger('rendering', eventArgs);\n      this.trigger('fileListRendering', eventsArgs);\n      this.listParent.appendChild(listElement);\n      this.fileList.push(listElement);\n    }\n\n    this.renderReactTemplates();\n  };\n\n  Uploader.prototype.createParentUL = function () {\n    if (isNullOrUndefined(this.listParent)) {\n      this.listParent = this.createElement('ul', {\n        className: LIST_PARENT\n      });\n      this.uploadWrapper.appendChild(this.listParent);\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Uploader.prototype.formFileList = function (fileData, files) {\n    var fileList = this.createElement('li', {\n      className: FILE\n    });\n    fileList.setAttribute('data-files-count', fileData.length + '');\n    var fileContainer = this.createElement('span', {\n      className: TEXT_CONTAINER\n    });\n    var statusMessage;\n\n    for (var _i = 0, fileData_2 = fileData; _i < fileData_2.length; _i++) {\n      var listItem = fileData_2[_i];\n      var fileNameEle = this.createElement('span', {\n        className: FILE_NAME\n      });\n      fileNameEle.innerHTML = this.getFileNameOnly(listItem.name);\n      var fileTypeEle = this.createElement('span', {\n        className: FILE_TYPE\n      });\n      var fileType = this.getFileType(listItem.name);\n      fileTypeEle.innerHTML = '.' + fileType;\n\n      if (!fileType) {\n        fileTypeEle.classList.add('e-hidden');\n      }\n\n      if (!this.enableRtl) {\n        fileContainer.appendChild(fileNameEle);\n        fileContainer.appendChild(fileTypeEle);\n      } else {\n        var rtlContainer = this.createElement('span', {\n          className: RTL_CONTAINER\n        });\n        rtlContainer.appendChild(fileTypeEle);\n        rtlContainer.appendChild(fileNameEle);\n        fileContainer.appendChild(rtlContainer);\n      }\n\n      this.truncateName(fileNameEle);\n      statusMessage = this.formValidateFileInfo(listItem, fileList);\n    }\n\n    fileList.appendChild(fileContainer);\n    this.setListToFileInfo(fileData, fileList);\n    var index = this.listParent.querySelectorAll('li').length;\n    var infoEle = this.createElement('span');\n\n    if (fileList.classList.contains(INVALID_FILE)) {\n      infoEle.classList.add(STATUS);\n      infoEle.classList.add(INVALID_FILE);\n      infoEle.innerText = fileData.length > 1 ? this.localizedTexts('invalidFileSelection') : statusMessage;\n    } else {\n      infoEle.classList.add(fileData.length > 1 ? INFORMATION : FILE_SIZE);\n      infoEle.innerText = fileData.length > 1 ? this.localizedTexts('totalFiles') + ': ' + fileData.length + ' , ' + this.localizedTexts('size') + ': ' + this.bytesToSize(this.getFileSize(fileData)) : this.bytesToSize(fileData[0].size);\n      this.createFormInput(fileData);\n    }\n\n    fileContainer.appendChild(infoEle);\n\n    if (isNullOrUndefined(fileList.querySelector('.e-icons'))) {\n      var iconElement = this.createElement('span', {\n        className: 'e-icons',\n        attrs: {\n          'tabindex': this.btnTabIndex\n        }\n      });\n      /* istanbul ignore next */\n\n      if (this.browserName === 'msie') {\n        iconElement.classList.add('e-msie');\n      }\n\n      iconElement.setAttribute('title', this.localizedTexts('remove'));\n      fileList.appendChild(fileContainer);\n      fileList.appendChild(iconElement);\n      EventHandler.add(iconElement, 'click', this.removeFiles, this);\n      iconElement.classList.add(REMOVE_ICON);\n    }\n\n    var eventArgs = {\n      element: fileList,\n      fileInfo: this.mergeFileInfo(fileData, fileList),\n      index: index,\n      isPreload: this.isPreLoadFile(this.mergeFileInfo(fileData, fileList))\n    };\n    var eventsArgs = {\n      element: fileList,\n      fileInfo: this.mergeFileInfo(fileData, fileList),\n      index: index,\n      isPreload: this.isPreLoadFile(this.mergeFileInfo(fileData, fileList))\n    };\n    this.trigger('rendering', eventArgs);\n    this.trigger('fileListRendering', eventsArgs);\n    this.listParent.appendChild(fileList);\n    this.fileList.push(fileList);\n  };\n\n  Uploader.prototype.formValidateFileInfo = function (listItem, fileList) {\n    var statusMessage = listItem.status;\n    var validationMessages = this.validatedFileSize(listItem.size);\n\n    if (validationMessages.minSize !== '' || validationMessages.maxSize !== '') {\n      this.addInvalidClass(fileList);\n      statusMessage = validationMessages.minSize !== '' ? this.localizedTexts('invalidMinFileSize') : validationMessages.maxSize !== '' ? this.localizedTexts('invalidMaxFileSize') : statusMessage;\n    }\n\n    var typeValidationMessage = this.checkExtension(this.getFilesInArray(listItem))[0].status;\n\n    if (typeValidationMessage === this.localizedTexts('invalidFileType')) {\n      this.addInvalidClass(fileList);\n      statusMessage = typeValidationMessage;\n    }\n\n    return statusMessage;\n  };\n\n  Uploader.prototype.addInvalidClass = function (fileList) {\n    fileList.classList.add(INVALID_FILE);\n  };\n\n  Uploader.prototype.createFormInput = function (fileData) {\n    if (this.browserName !== 'safari') {\n      var inputElement = this.element.cloneNode(true);\n      inputElement.classList.add(HIDDEN_INPUT);\n\n      for (var _i = 0, fileData_3 = fileData; _i < fileData_3.length; _i++) {\n        var listItem = fileData_3[_i];\n        listItem.input = inputElement;\n      }\n\n      inputElement.setAttribute('name', this.uploaderName);\n      this.uploadWrapper.querySelector('.' + INPUT_WRAPPER).appendChild(inputElement);\n\n      if (this.browserName !== 'msie' && this.browserName !== 'edge') {\n        this.element.value = '';\n      }\n    }\n  };\n\n  Uploader.prototype.getFileSize = function (fileData) {\n    var fileSize = 0;\n\n    for (var _i = 0, fileData_4 = fileData; _i < fileData_4.length; _i++) {\n      var file = fileData_4[_i];\n      fileSize += file.size;\n    }\n\n    return fileSize;\n  };\n\n  Uploader.prototype.mergeFileInfo = function (fileData, fileList) {\n    var result = {\n      name: '',\n      rawFile: '',\n      size: 0,\n      status: '',\n      type: '',\n      validationMessages: {\n        minSize: '',\n        maxSize: ''\n      },\n      statusCode: '1',\n      list: fileList\n    };\n    var fileNames = [];\n    var type = '';\n\n    for (var _i = 0, fileData_5 = fileData; _i < fileData_5.length; _i++) {\n      var listItem = fileData_5[_i];\n      fileNames.push(listItem.name);\n      type = listItem.type;\n    }\n\n    result.name = fileNames.join(', ');\n    result.size = this.getFileSize(fileData);\n    result.type = type;\n    result.status = this.statusForFormUpload(fileData, fileList);\n    return result;\n  };\n\n  Uploader.prototype.statusForFormUpload = function (fileData, fileList) {\n    var isValid = true;\n    var statusMessage;\n\n    for (var _i = 0, fileData_6 = fileData; _i < fileData_6.length; _i++) {\n      var listItem = fileData_6[_i];\n      statusMessage = listItem.status;\n      var validationMessages = this.validatedFileSize(listItem.size);\n\n      if (validationMessages.minSize !== '' || validationMessages.maxSize !== '') {\n        isValid = false;\n        statusMessage = validationMessages.minSize !== '' ? this.localizedTexts('invalidMinFileSize') : validationMessages.maxSize !== '' ? this.localizedTexts('invalidMaxFileSize') : statusMessage;\n      }\n\n      var typeValidationMessage = this.checkExtension(this.getFilesInArray(listItem))[0].status;\n\n      if (typeValidationMessage === this.localizedTexts('invalidFileType')) {\n        isValid = false;\n        statusMessage = typeValidationMessage;\n      }\n    }\n\n    if (!isValid) {\n      fileList.classList.add(INVALID_FILE);\n      statusMessage = fileData.length > 1 ? this.localizedTexts('invalidFileSelection') : statusMessage;\n    } else {\n      statusMessage = this.localizedTexts('totalFiles') + ': ' + fileData.length + ' , ' + this.localizedTexts('size') + ': ' + this.bytesToSize(this.getFileSize(fileData));\n    }\n\n    return statusMessage;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Uploader.prototype.formCustomFileList = function (fileData, files) {\n    this.createParentUL();\n    var fileList = this.createElement('li', {\n      className: FILE\n    });\n    fileList.setAttribute('data-files-count', fileData.length + '');\n    this.setListToFileInfo(fileData, fileList);\n    var result = this.mergeFileInfo(fileData, fileList);\n    fileList.setAttribute('data-file-name', result.name);\n    this.uploadTemplateFn = this.templateComplier(this.template);\n    var liTempCompiler = this.uploadTemplateFn(result, this, 'template', this.element.id + 'Template', this.isStringTemplate, null, fileList);\n\n    if (liTempCompiler) {\n      var fromElements = [].slice.call(liTempCompiler);\n      append(fromElements, fileList);\n    }\n\n    var index = this.listParent.querySelectorAll('li').length;\n\n    if (!fileList.classList.contains(INVALID_FILE)) {\n      this.createFormInput(fileData);\n    }\n\n    var eventArgs = {\n      element: fileList,\n      fileInfo: result,\n      index: index,\n      isPreload: this.isPreLoadFile(result)\n    };\n    var eventsArgs = {\n      element: fileList,\n      fileInfo: result,\n      index: index,\n      isPreload: this.isPreLoadFile(result)\n    };\n    this.trigger('rendering', eventArgs);\n    this.trigger('fileListRendering', eventsArgs);\n    this.listParent.appendChild(fileList);\n    this.fileList.push(fileList);\n    this.renderReactTemplates();\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Create the file list for specified files data.\n   *\n   * @param { FileInfo[] } fileData - Specifies the files data for file list creation.\n   * @returns {void}\n   */\n\n\n  Uploader.prototype.createFileList = function (fileData, isSelectedFile) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    this.createParentUL();\n\n    if (this.template !== '' && !isNullOrUndefined(this.template)) {\n      if (this.isFormUpload()) {\n        this.uploadWrapper.classList.add(FORM_UPLOAD);\n        this.formCustomFileList(fileData, this.element.files);\n      } else {\n        this.createCustomfileList(fileData);\n      }\n    } else if (this.isFormUpload()) {\n      this.uploadWrapper.classList.add(FORM_UPLOAD);\n      this.formFileList(fileData, this.element.files);\n    } else {\n      for (var _i = 0, fileData_7 = fileData; _i < fileData_7.length; _i++) {\n        var listItem = fileData_7[_i];\n        var liElement = this.createElement('li', {\n          className: FILE,\n          attrs: {\n            'data-file-name': listItem.name,\n            'data-files-count': '1'\n          }\n        });\n        var textContainer = this.createElement('span', {\n          className: TEXT_CONTAINER\n        });\n        var textElement = this.createElement('span', {\n          className: FILE_NAME,\n          attrs: {\n            'title': listItem.name\n          }\n        });\n        textElement.innerHTML = this.getFileNameOnly(listItem.name);\n        var fileExtension = this.createElement('span', {\n          className: FILE_TYPE\n        });\n        var fileType = this.getFileType(listItem.name);\n        fileExtension.innerHTML = '.' + fileType;\n\n        if (!fileType) {\n          fileExtension.classList.add('e-hidden');\n        }\n\n        if (!this.enableRtl) {\n          textContainer.appendChild(textElement);\n          textContainer.appendChild(fileExtension);\n        } else {\n          var rtlContainer = this.createElement('span', {\n            className: RTL_CONTAINER\n          });\n          rtlContainer.appendChild(fileExtension);\n          rtlContainer.appendChild(textElement);\n          textContainer.appendChild(rtlContainer);\n        }\n\n        var fileSize = this.createElement('span', {\n          className: FILE_SIZE\n        });\n        fileSize.innerHTML = this.bytesToSize(listItem.size);\n        textContainer.appendChild(fileSize);\n        var statusElement = this.createElement('span', {\n          className: STATUS\n        });\n        textContainer.appendChild(statusElement);\n        statusElement.innerHTML = listItem.status;\n        liElement.appendChild(textContainer);\n        var iconElement = this.createElement('span', {\n          className: ' e-icons',\n          attrs: {\n            'tabindex': this.btnTabIndex\n          }\n        });\n        /* istanbul ignore next */\n\n        if (this.browserName === 'msie') {\n          iconElement.classList.add('e-msie');\n        }\n\n        iconElement.setAttribute('title', this.localizedTexts('remove'));\n        liElement.appendChild(iconElement);\n        EventHandler.add(iconElement, 'click', this.removeFiles, this);\n\n        if (listItem.statusCode === '2') {\n          statusElement.classList.add(UPLOAD_SUCCESS);\n          iconElement.classList.add(DELETE_ICON);\n          iconElement.setAttribute('title', this.localizedTexts('delete'));\n        } else if (listItem.statusCode !== '1') {\n          statusElement.classList.remove(UPLOAD_SUCCESS);\n          statusElement.classList.add(VALIDATION_FAILS);\n        }\n\n        if (this.autoUpload && listItem.statusCode === '1' && this.asyncSettings.saveUrl !== '') {\n          statusElement.innerHTML = '';\n        }\n\n        if (!iconElement.classList.contains(DELETE_ICON)) {\n          iconElement.classList.add(REMOVE_ICON);\n        }\n\n        var index = fileData.indexOf(listItem);\n        var eventArgs = {\n          element: liElement,\n          fileInfo: listItem,\n          index: index,\n          isPreload: this.isPreLoadFile(listItem)\n        };\n        var eventsArgs = {\n          element: liElement,\n          fileInfo: listItem,\n          index: index,\n          isPreload: this.isPreLoadFile(listItem)\n        };\n        this.trigger('rendering', eventArgs);\n        this.trigger('fileListRendering', eventsArgs);\n        this.listParent.appendChild(liElement);\n        this.fileList.push(liElement);\n        this.truncateName(textElement);\n        var preventActionComplete = this.flag;\n\n        if (this.isPreLoadFile(listItem)) {\n          this.flag = false;\n          this.checkActionComplete(true);\n          this.flag = preventActionComplete;\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.getSlicedName = function (nameElement) {\n    var text = nameElement.textContent;\n    nameElement.dataset.tail = text.slice(text.length - 10);\n  };\n\n  Uploader.prototype.setListToFileInfo = function (fileData, fileList) {\n    for (var _i = 0, fileData_8 = fileData; _i < fileData_8.length; _i++) {\n      var listItem = fileData_8[_i];\n      listItem.list = fileList;\n    }\n  };\n\n  Uploader.prototype.truncateName = function (name) {\n    var nameElement = name;\n\n    if (this.browserName !== 'edge' && nameElement.offsetWidth < nameElement.scrollWidth) {\n      this.getSlicedName(nameElement);\n      /* istanbul ignore next */\n    } else if (nameElement.offsetWidth + 1 < nameElement.scrollWidth) {\n      this.getSlicedName(nameElement);\n    }\n  };\n\n  Uploader.prototype.getFileType = function (name) {\n    var extension;\n    var index = name.lastIndexOf('.');\n\n    if (index >= 0) {\n      extension = name.substring(index + 1);\n    }\n\n    return extension ? extension : '';\n  };\n\n  Uploader.prototype.getFileNameOnly = function (name) {\n    var type = this.getFileType(name);\n    var names = name.split('.' + type);\n    return type = names[0];\n  };\n\n  Uploader.prototype.setInitialAttributes = function () {\n    if (this.initialAttr.accept) {\n      this.element.setAttribute('accept', this.initialAttr.accept);\n    }\n\n    if (this.initialAttr.disabled) {\n      this.element.setAttribute('disabled', 'disabled');\n    }\n\n    if (this.initialAttr.multiple) {\n      var newAttr = document.createAttribute('multiple');\n      this.element.setAttributeNode(newAttr);\n    }\n  };\n\n  Uploader.prototype.filterfileList = function (files) {\n    var filterFiles = [];\n    var li;\n\n    for (var i = 0; i < files.length; i++) {\n      li = this.getLiElement(files[i]);\n\n      if (!li.classList.contains(UPLOAD_SUCCESS)) {\n        filterFiles.push(files[i]);\n      }\n    }\n\n    return filterFiles;\n  };\n\n  Uploader.prototype.updateStatus = function (files, status, statusCode, updateLiStatus) {\n    if (updateLiStatus === void 0) {\n      updateLiStatus = true;\n    }\n\n    if (!(status === '' || isNullOrUndefined(status)) && !(statusCode === '' || isNullOrUndefined(statusCode))) {\n      files.status = status;\n      files.statusCode = statusCode;\n    }\n\n    if (updateLiStatus) {\n      var li = this.getLiElement(files);\n\n      if (!isNullOrUndefined(li)) {\n        if (!isNullOrUndefined(li.querySelector('.' + STATUS)) && !(status === '' || isNullOrUndefined(status))) {\n          li.querySelector('.' + STATUS).textContent = status;\n        }\n      }\n    }\n\n    return files;\n  };\n\n  Uploader.prototype.getLiElement = function (files) {\n    var index;\n\n    for (var i = 0; i < this.filesData.length; i++) {\n      if (!isNullOrUndefined(files) && (!isNullOrUndefined(this.filesData[i].id) && !isNullOrUndefined(files.id) ? this.filesData[i].name === files.name && this.filesData[i].id === files.id : this.filesData[i].name === files.name)) {\n        index = i;\n      }\n    }\n\n    return this.fileList[index];\n  };\n\n  Uploader.prototype.createProgressBar = function (liElement) {\n    var progressbarWrapper = this.createElement('span', {\n      className: PROGRESS_WRAPPER\n    });\n    var progressBar = this.createElement('progressbar', {\n      className: PROGRESSBAR,\n      attrs: {\n        value: '0',\n        max: '100'\n      }\n    });\n    var progressbarInnerWrapper = this.createElement('span', {\n      className: PROGRESS_INNER_WRAPPER\n    });\n    progressBar.setAttribute('style', 'width: 0%');\n    var progressbarText = this.createElement('span', {\n      className: PROGRESSBAR_TEXT\n    });\n    progressbarText.textContent = '0%';\n    progressbarInnerWrapper.appendChild(progressBar);\n    progressbarWrapper.appendChild(progressbarInnerWrapper);\n    progressbarWrapper.appendChild(progressbarText);\n    liElement.querySelector('.' + TEXT_CONTAINER).appendChild(progressbarWrapper);\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.updateProgressbar = function (e, li) {\n    if (!isNaN(Math.round(e.loaded / e.total * 100)) && !isNullOrUndefined(li.querySelector('.' + PROGRESSBAR))) {\n      if (!isNullOrUndefined(this.progressInterval) && this.progressInterval !== '') {\n        var value = Math.round(e.loaded / e.total * 100) % parseInt(this.progressInterval, 10);\n\n        if (value === 0 || value === 100) {\n          this.changeProgressValue(li, Math.round(e.loaded / e.total * 100).toString() + '%');\n        }\n      } else {\n        this.changeProgressValue(li, Math.round(e.loaded / e.total * 100).toString() + '%');\n      }\n    }\n  };\n\n  Uploader.prototype.changeProgressValue = function (li, progressValue) {\n    li.querySelector('.' + PROGRESSBAR).setAttribute('style', 'width:' + progressValue);\n    li.querySelector('.' + PROGRESSBAR_TEXT).textContent = progressValue;\n  };\n\n  Uploader.prototype.uploadInProgress = function (e, files, customUI, request) {\n    var li = this.getLiElement(files);\n\n    if (isNullOrUndefined(li) && !customUI) {\n      return;\n    }\n\n    if (!isNullOrUndefined(li)) {\n      /* istanbul ignore next */\n      if (files.statusCode === '5') {\n        this.cancelUploadingFile(files, e, request, li);\n      }\n\n      if (!(li.querySelectorAll('.' + PROGRESS_WRAPPER).length > 0) && li.querySelector('.' + STATUS)) {\n        li.querySelector('.' + STATUS).classList.add(UPLOAD_INPROGRESS);\n        this.createProgressBar(li);\n        this.updateProgressBarClasses(li, UPLOAD_INPROGRESS);\n        li.querySelector('.' + STATUS).classList.remove(UPLOAD_FAILED);\n      }\n\n      this.updateProgressbar(e, li);\n      var iconEle = li.querySelector('.' + REMOVE_ICON);\n\n      if (!isNullOrUndefined(iconEle)) {\n        iconEle.classList.add(ABORT_ICON, UPLOAD_INPROGRESS);\n        iconEle.setAttribute('title', this.localizedTexts('abort'));\n        iconEle.classList.remove(REMOVE_ICON);\n      }\n    } else {\n      this.cancelUploadingFile(files, e, request);\n    }\n\n    var args = {\n      e: e,\n      operation: 'upload',\n      file: this.updateStatus(files, this.localizedTexts('inProgress'), '3')\n    };\n    this.trigger('progress', args);\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.cancelUploadingFile = function (files, e, request, li) {\n    var _this = this;\n\n    if (files.statusCode === '5') {\n      var eventArgs = {\n        event: e,\n        fileData: files,\n        cancel: false,\n        customFormData: []\n      };\n      this.trigger('canceling', eventArgs, function (eventArgs) {\n        if (eventArgs.cancel) {\n          files.statusCode = '3';\n\n          if (!isNullOrUndefined(li)) {\n            var spinnerTarget = li.querySelector('.' + ABORT_ICON);\n\n            if (!isNullOrUndefined(spinnerTarget)) {\n              hideSpinner(spinnerTarget);\n              detach(li.querySelector('.e-spinner-pane'));\n            }\n          }\n        } else {\n          request.emitError = false;\n          request.httpRequest.abort();\n          var formData = new FormData();\n\n          if (files.statusCode === '5') {\n            var name_1 = _this.element.getAttribute('name');\n\n            formData.append(name_1, files.name);\n            formData.append('cancel-uploading', files.name);\n\n            _this.updateFormData(formData, eventArgs.customFormData);\n\n            var ajax = new Ajax(_this.asyncSettings.removeUrl, 'POST', true, null);\n            ajax.emitError = false;\n\n            ajax.onLoad = function (e) {\n              _this.removecanceledFile(e, files);\n\n              return {};\n            };\n\n            ajax.send(formData);\n          }\n        }\n      });\n    }\n  };\n\n  Uploader.prototype.removecanceledFile = function (e, file) {\n    var liElement = this.getLiElement(file);\n\n    if (isNullOrUndefined(liElement) || liElement.querySelector('.' + RETRY_ICON) || isNullOrUndefined(liElement.querySelector('.' + ABORT_ICON))) {\n      return;\n    }\n\n    this.updateStatus(file, this.localizedTexts('fileUploadCancel'), '5');\n    this.renderFailureState(e, file, liElement);\n    var spinnerTarget = liElement.querySelector('.' + REMOVE_ICON);\n\n    if (!isNullOrUndefined(liElement)) {\n      hideSpinner(spinnerTarget);\n\n      if (!isNullOrUndefined(liElement.querySelector('.e-spinner-pane'))) {\n        detach(liElement.querySelector('.e-spinner-pane'));\n      }\n    }\n\n    var requestResponse = e && e.currentTarget ? this.getResponse(e) : null;\n    var args = {\n      event: e,\n      response: requestResponse,\n      operation: 'cancel',\n      file: file\n    };\n    this.trigger('success', args);\n  };\n\n  Uploader.prototype.renderFailureState = function (e, file, liElement) {\n    var _this = this;\n\n    this.updateProgressBarClasses(liElement, UPLOAD_FAILED);\n    this.removeProgressbar(liElement, 'failure');\n\n    if (!isNullOrUndefined(liElement.querySelector('.e-file-status'))) {\n      liElement.querySelector('.e-file-status').classList.add(UPLOAD_FAILED);\n    }\n\n    var deleteIcon = liElement.querySelector('.' + ABORT_ICON);\n\n    if (isNullOrUndefined(deleteIcon)) {\n      return;\n    }\n\n    deleteIcon.classList.remove(ABORT_ICON, UPLOAD_INPROGRESS);\n    deleteIcon.classList.add(REMOVE_ICON);\n    deleteIcon.setAttribute('title', this.localizedTexts('remove'));\n    this.pauseButton = this.createElement('span', {\n      className: 'e-icons e-file-reload-btn',\n      attrs: {\n        'tabindex': this.btnTabIndex\n      }\n    });\n    deleteIcon.parentElement.insertBefore(this.pauseButton, deleteIcon);\n    this.pauseButton.setAttribute('title', this.localizedTexts('retry'));\n    var retryElement = liElement.querySelector('.' + RETRY_ICON);\n    /* istanbul ignore next */\n\n    retryElement.addEventListener('click', function (e) {\n      _this.reloadcanceledFile(e, file, liElement, false);\n    }, false);\n  };\n\n  Uploader.prototype.reloadcanceledFile = function (e, file, liElement, custom) {\n    file.statusCode = '1';\n    file.status = this.localizedTexts('readyToUploadMessage');\n\n    if (!custom) {\n      if (!isNullOrUndefined(liElement.querySelector('.' + STATUS))) {\n        liElement.querySelector('.' + STATUS).classList.remove(UPLOAD_FAILED);\n      }\n\n      if (!isNullOrUndefined(liElement.querySelector('.' + RETRY_ICON))) {\n        detach(liElement.querySelector('.' + RETRY_ICON));\n      }\n\n      this.pauseButton = null;\n    }\n    /* istanbul ignore next */\n\n\n    liElement.classList.add(RESTRICT_RETRY);\n    this.upload([file]);\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.uploadComplete = function (e, file, customUI) {\n    var status = e.target;\n\n    if (status.readyState === 4 && status.status >= 200 && status.status <= 299) {\n      var li = this.getLiElement(file);\n\n      if (isNullOrUndefined(li) && (!customUI || isNullOrUndefined(customUI))) {\n        return;\n      }\n\n      if (!isNullOrUndefined(li)) {\n        this.updateProgressBarClasses(li, UPLOAD_SUCCESS);\n        this.removeProgressbar(li, 'success');\n        var iconEle = li.querySelector('.' + ABORT_ICON);\n\n        if (!isNullOrUndefined(iconEle)) {\n          iconEle.classList.add(DELETE_ICON);\n          iconEle.setAttribute('title', this.localizedTexts('delete'));\n          iconEle.classList.remove(ABORT_ICON);\n          iconEle.classList.remove(UPLOAD_INPROGRESS);\n        }\n      }\n\n      this.raiseSuccessEvent(e, file);\n    } else {\n      this.uploadFailed(e, file);\n    }\n  };\n\n  Uploader.prototype.getResponse = function (e) {\n    var target = e.currentTarget;\n    var response = {\n      readyState: target.readyState,\n      statusCode: target.status,\n      statusText: target.statusText,\n      headers: target.getAllResponseHeaders(),\n      withCredentials: target.withCredentials\n    };\n    return response;\n  };\n\n  Uploader.prototype.raiseSuccessEvent = function (e, file) {\n    var _this = this;\n\n    var response = e && e.currentTarget ? this.getResponse(e) : null;\n    var statusMessage = this.localizedTexts('uploadSuccessMessage');\n    var args = {\n      e: e,\n      response: response,\n      operation: 'upload',\n      file: this.updateStatus(file, statusMessage, '2', false),\n      statusText: statusMessage\n    };\n    var liElement = this.getLiElement(file);\n\n    if (!isNullOrUndefined(liElement)) {\n      var spinnerEle = liElement.querySelector('.' + SPINNER_PANE);\n\n      if (!isNullOrUndefined(spinnerEle)) {\n        hideSpinner(liElement);\n        detach(spinnerEle);\n      }\n    }\n\n    this.trigger('success', args, function (args) {\n      _this.updateStatus(file, args.statusText, '2');\n\n      _this.uploadedFilesData.push(file);\n\n      _this.trigger('change', {\n        file: _this.uploadedFilesData\n      });\n\n      _this.checkActionButtonStatus();\n\n      if (_this.fileList.length > 0) {\n        if (!_this.getLiElement(file).classList.contains(RESTRICT_RETRY)) {\n          _this.uploadSequential();\n\n          _this.checkActionComplete(true);\n        } else {\n          /* istanbul ignore next */\n          _this.getLiElement(file).classList.remove(RESTRICT_RETRY);\n        }\n      }\n    });\n  };\n\n  Uploader.prototype.uploadFailed = function (e, file) {\n    var _this = this;\n\n    var li = this.getLiElement(file);\n    var response = e && e.currentTarget ? this.getResponse(e) : null;\n    var statusMessage = this.localizedTexts('uploadFailedMessage');\n    var args = {\n      e: e,\n      response: response,\n      operation: 'upload',\n      file: this.updateStatus(file, statusMessage, '0', false),\n      statusText: statusMessage\n    };\n\n    if (!isNullOrUndefined(li)) {\n      this.renderFailureState(e, file, li);\n    }\n\n    this.trigger('failure', args, function (args) {\n      _this.updateStatus(file, args.statusText, '0');\n\n      _this.checkActionButtonStatus();\n\n      _this.uploadSequential();\n\n      _this.checkActionComplete(true);\n    });\n  };\n\n  Uploader.prototype.uploadSequential = function () {\n    if (this.sequentialUpload) {\n      if (this.autoUpload) {\n        /* istanbul ignore next */\n        this.checkAutoUpload(this.filesData);\n      } else {\n        this.uploadButtonClick();\n      }\n    }\n  };\n\n  Uploader.prototype.checkActionComplete = function (increment) {\n    if (increment) {\n      ++this.actionCompleteCount;\n    } else {\n      --this.actionCompleteCount;\n    }\n\n    this.raiseActionComplete();\n  };\n\n  Uploader.prototype.raiseActionComplete = function () {\n    if (this.filesData.length === this.actionCompleteCount && this.flag) {\n      this.flag = false;\n      var eventArgs = {\n        fileData: []\n      };\n      eventArgs.fileData = this.getSelectedFileStatus(this.selectedFiles);\n      this.trigger('actionComplete', eventArgs);\n    }\n  };\n\n  Uploader.prototype.getSelectedFileStatus = function (selectedFiles) {\n    var matchFiles = [];\n    var matchFilesIndex = 0;\n\n    for (var selectFileIndex = 0; selectFileIndex < selectedFiles.length; selectFileIndex++) {\n      var selectedFileData = selectedFiles[selectFileIndex];\n\n      for (var fileDataIndex = 0; fileDataIndex < this.filesData.length; fileDataIndex++) {\n        if (this.filesData[fileDataIndex].name === selectedFileData.name) {\n          matchFiles[matchFilesIndex] = this.filesData[fileDataIndex];\n          ++matchFilesIndex;\n        }\n      }\n    }\n\n    return matchFiles;\n  };\n\n  Uploader.prototype.updateProgressBarClasses = function (li, className) {\n    var progressBar = li.querySelector('.' + PROGRESSBAR);\n\n    if (!isNullOrUndefined(progressBar)) {\n      progressBar.classList.add(className);\n    }\n  };\n\n  Uploader.prototype.removeProgressbar = function (li, callType) {\n    var _this = this;\n\n    if (!isNullOrUndefined(li.querySelector('.' + PROGRESS_WRAPPER))) {\n      this.progressAnimation = new Animation({\n        duration: 1250\n      });\n      this.progressAnimation.animate(li.querySelector('.' + PROGRESS_WRAPPER), {\n        name: 'FadeOut'\n      });\n      this.progressAnimation.animate(li.querySelector('.' + PROGRESSBAR_TEXT), {\n        name: 'FadeOut'\n      });\n      setTimeout(function () {\n        _this.animateProgressBar(li, callType);\n      }, 750);\n    }\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.animateProgressBar = function (li, callType) {\n    if (callType === 'success') {\n      li.classList.add(UPLOAD_SUCCESS);\n\n      if (!isNullOrUndefined(li.querySelector('.' + STATUS))) {\n        li.querySelector('.' + STATUS).classList.remove(UPLOAD_INPROGRESS);\n        this.progressAnimation.animate(li.querySelector('.' + STATUS), {\n          name: 'FadeIn'\n        });\n        li.querySelector('.' + STATUS).classList.add(UPLOAD_SUCCESS);\n      }\n    } else {\n      if (!isNullOrUndefined(li.querySelector('.' + STATUS))) {\n        li.querySelector('.' + STATUS).classList.remove(UPLOAD_INPROGRESS);\n        this.progressAnimation.animate(li.querySelector('.' + STATUS), {\n          name: 'FadeIn'\n        });\n        li.querySelector('.' + STATUS).classList.add(UPLOAD_FAILED);\n      }\n    }\n\n    if (li.querySelector('.' + PROGRESS_WRAPPER)) {\n      detach(li.querySelector('.' + PROGRESS_WRAPPER));\n    }\n  };\n\n  Uploader.prototype.setExtensions = function (extensions) {\n    if (extensions !== '' && !isNullOrUndefined(extensions)) {\n      this.element.setAttribute('accept', extensions);\n    } else {\n      this.element.removeAttribute('accept');\n    }\n  };\n\n  Uploader.prototype.templateComplier = function (uploadTemplate) {\n    if (uploadTemplate) {\n      try {\n        if (selectAll(uploadTemplate, document).length) {\n          return compile(select(uploadTemplate, document).innerHTML.trim());\n        } else {\n          return compile(uploadTemplate);\n        }\n      } catch (exception) {\n        return compile(uploadTemplate);\n      }\n    }\n\n    return undefined;\n  };\n\n  Uploader.prototype.setRTL = function () {\n    if (this.enableRtl) {\n      addClass([this.uploadWrapper], RTL);\n    } else {\n      removeClass([this.uploadWrapper], RTL);\n    }\n  };\n\n  Uploader.prototype.localizedTexts = function (localeText) {\n    this.l10n.setLocale(this.locale);\n    return this.l10n.getConstant(localeText);\n  };\n\n  Uploader.prototype.setControlStatus = function () {\n    if (!this.enabled) {\n      this.uploadWrapper.classList.add(DISABLED);\n      this.element.setAttribute('disabled', 'disabled');\n      this.browseButton.setAttribute('disabled', 'disabled');\n\n      if (!isNullOrUndefined(this.clearButton)) {\n        this.clearButton.setAttribute('disabled', 'disabled');\n      }\n\n      if (!isNullOrUndefined(this.uploadButton)) {\n        this.uploadButton.setAttribute('disabled', 'disabled');\n      }\n    } else {\n      if (this.uploadWrapper.classList.contains(DISABLED)) {\n        this.uploadWrapper.classList.remove(DISABLED);\n      }\n\n      if (!isNullOrUndefined(this.browseButton) && this.element.hasAttribute('disabled')) {\n        this.element.removeAttribute('disabled');\n        this.browseButton.removeAttribute('disabled');\n      }\n\n      if (!isNullOrUndefined(this.clearButton) && this.clearButton.hasAttribute('disabled')) {\n        this.clearButton.removeAttribute('disabled');\n      }\n\n      if (!isNullOrUndefined(this.uploadButton) && this.uploadButton.hasAttribute('disabled')) {\n        this.uploadButton.hasAttribute('disabled');\n      }\n    }\n  };\n\n  Uploader.prototype.checkHTMLAttributes = function (isDynamic) {\n    var attributes = isDynamic ? isNullOrUndefined(this.htmlAttributes) ? [] : Object.keys(this.htmlAttributes) : ['accept', 'multiple', 'disabled'];\n\n    for (var _i = 0, attributes_1 = attributes; _i < attributes_1.length; _i++) {\n      var prop = attributes_1[_i];\n\n      if (!isNullOrUndefined(this.element.getAttribute(prop))) {\n        switch (prop) {\n          case 'accept':\n            if (isNullOrUndefined(this.uploaderOptions) || this.uploaderOptions['allowedExtensions'] === undefined || isDynamic) {\n              this.setProperties({\n                allowedExtensions: this.element.getAttribute('accept')\n              }, !isDynamic);\n              this.initialAttr.accept = this.allowedExtensions;\n            }\n\n            break;\n\n          case 'multiple':\n            if (isNullOrUndefined(this.uploaderOptions) || this.uploaderOptions['multiple'] === undefined || isDynamic) {\n              var isMutiple = this.element.getAttribute(prop) === 'multiple' || this.element.getAttribute(prop) === '' || this.element.getAttribute(prop) === 'true' ? true : false;\n              this.setProperties({\n                multiple: isMutiple\n              }, !isDynamic);\n              this.initialAttr.multiple = true;\n            }\n\n            break;\n\n          case 'disabled':\n            if (isNullOrUndefined(this.uploaderOptions) || this.uploaderOptions['enabled'] === undefined || isDynamic) {\n              var isDisabled = this.element.getAttribute(prop) === 'disabled' || this.element.getAttribute(prop) === '' || this.element.getAttribute(prop) === 'true' ? false : true;\n              this.setProperties({\n                enabled: isDisabled\n              }, !isDynamic);\n              this.initialAttr.disabled = true;\n            }\n\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.chunkUpload = function (file, custom, fileIndex) {\n    var start = 0;\n    var end = Math.min(this.asyncSettings.chunkSize, file.size);\n    var index = 0;\n    var blob = file.rawFile.slice(start, end);\n    var metaData = {\n      chunkIndex: index,\n      blob: blob,\n      file: file,\n      start: start,\n      end: end,\n      retryCount: 0,\n      request: null\n    };\n    this.sendRequest(file, metaData, custom, fileIndex);\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Uploader.prototype.sendRequest = function (file, metaData, custom, fileIndex) {\n    var _this = this;\n\n    var formData = new FormData();\n    var blob = file.rawFile.slice(metaData.start, metaData.end);\n    formData.append('chunkFile', blob, file.name);\n    formData.append(this.uploaderName, blob, file.name);\n    formData.append('chunk-index', metaData.chunkIndex.toString());\n    formData.append('chunkIndex', metaData.chunkIndex.toString());\n    var totalChunk = Math.max(Math.ceil(file.size / this.asyncSettings.chunkSize), 1);\n    formData.append('total-chunk', totalChunk.toString());\n    formData.append('totalChunk', totalChunk.toString());\n    var ajax = new Ajax({\n      url: this.asyncSettings.saveUrl,\n      type: 'POST',\n      async: true,\n      contentType: null\n    });\n    ajax.emitError = false;\n\n    ajax.onLoad = function (e) {\n      _this.chunkUploadComplete(e, metaData, custom);\n\n      return {};\n    };\n\n    ajax.onUploadProgress = function (e) {\n      _this.chunkUploadInProgress(e, metaData, custom);\n\n      return {};\n    };\n\n    var eventArgs = {\n      fileData: file,\n      customFormData: [],\n      cancel: false,\n      chunkSize: this.asyncSettings.chunkSize === 0 ? null : this.asyncSettings.chunkSize\n    };\n\n    ajax.beforeSend = function (e) {\n      eventArgs.currentRequest = ajax.httpRequest;\n      eventArgs.currentChunkIndex = metaData.chunkIndex;\n\n      if (eventArgs.currentChunkIndex === 0) {\n        // This event is currently not required but to avoid breaking changes for previous customer, we have included.\n        _this.trigger('uploading', eventArgs, function (eventArgs) {\n          _this.uploadingEventCallback(formData, eventArgs, e, file);\n        });\n      } else {\n        _this.trigger('chunkUploading', eventArgs, function (eventArgs) {\n          _this.uploadingEventCallback(formData, eventArgs, e, file);\n        });\n      }\n    };\n    /* istanbul ignore next */\n\n\n    ajax.onError = function (e) {\n      _this.chunkUploadFailed(e, metaData, custom);\n\n      return {};\n    };\n\n    ajax.send(formData);\n    metaData.request = ajax;\n  };\n\n  Uploader.prototype.uploadingEventCallback = function (formData, eventArgs, e, file) {\n    if (eventArgs.cancel) {\n      this.eventCancelByArgs(e, eventArgs, file);\n    } else {\n      this.updateFormData(formData, eventArgs.customFormData);\n    }\n  };\n\n  Uploader.prototype.eventCancelByArgs = function (e, eventArgs, file) {\n    var _this = this;\n\n    e.cancel = true;\n\n    if (eventArgs.fileData.statusCode === '5') {\n      return;\n    }\n\n    eventArgs.fileData.statusCode = '5';\n    eventArgs.fileData.status = this.localizedTexts('fileUploadCancel');\n    var liElement = this.getLiElement(eventArgs.fileData);\n\n    if (liElement) {\n      if (!isNullOrUndefined(liElement.querySelector('.' + STATUS))) {\n        liElement.querySelector('.' + STATUS).innerHTML = this.localizedTexts('fileUploadCancel');\n        liElement.querySelector('.' + STATUS).classList.add(UPLOAD_FAILED);\n      }\n\n      this.pauseButton = this.createElement('span', {\n        className: 'e-icons e-file-reload-btn',\n        attrs: {\n          'tabindex': this.btnTabIndex\n        }\n      });\n      var removeIcon = liElement.querySelector('.' + REMOVE_ICON);\n\n      if (removeIcon) {\n        removeIcon.parentElement.insertBefore(this.pauseButton, removeIcon);\n      }\n\n      this.pauseButton.setAttribute('title', this.localizedTexts('retry'));\n      /* istanbul ignore next */\n\n      this.pauseButton.addEventListener('click', function (e) {\n        _this.reloadcanceledFile(e, file, liElement);\n      }, false);\n      this.checkActionButtonStatus();\n    }\n  };\n\n  Uploader.prototype.checkChunkUpload = function () {\n    return this.asyncSettings.chunkSize <= 0 || isNullOrUndefined(this.asyncSettings.chunkSize) ? false : true;\n  };\n\n  Uploader.prototype.chunkUploadComplete = function (e, metaData, custom) {\n    var _this = this;\n\n    var response = e.target;\n    var liElement;\n\n    if (response.readyState === 4 && response.status >= 200 && response.status < 300) {\n      var requestResponse = e && e.currentTarget ? this.getResponse(e) : null;\n      var totalChunk = Math.max(Math.ceil(metaData.file.size / this.asyncSettings.chunkSize), 1);\n      var eventArgs = {\n        event: e,\n        file: metaData.file,\n        chunkIndex: metaData.chunkIndex,\n        totalChunk: totalChunk,\n        chunkSize: this.asyncSettings.chunkSize,\n        response: requestResponse\n      };\n      this.trigger('chunkSuccess', eventArgs);\n\n      if (isNullOrUndefined(custom) || !custom) {\n        liElement = this.getLiElement(metaData.file);\n      }\n\n      this.updateMetaData(metaData);\n\n      if (metaData.end === metaData.file.size) {\n        metaData.file.statusCode = '3';\n      }\n\n      if (metaData.file.statusCode === '5') {\n        var eventArgs_1 = {\n          event: e,\n          fileData: metaData.file,\n          cancel: false,\n          customFormData: []\n        };\n        this.trigger('canceling', eventArgs_1, function (eventArgs) {\n          /* istanbul ignore next */\n          if (eventArgs.cancel) {\n            metaData.file.statusCode = '3';\n            var spinnerTarget = liElement.querySelector('.' + ABORT_ICON);\n\n            if (!isNullOrUndefined(liElement) && !isNullOrUndefined(spinnerTarget)) {\n              hideSpinner(spinnerTarget);\n              detach(liElement.querySelector('.e-spinner-pane'));\n            }\n\n            _this.sendNextRequest(metaData);\n          } else {\n            metaData.request.emitError = false;\n            response.abort();\n            var formData = new FormData();\n\n            var name_2 = _this.element.getAttribute('name');\n\n            formData.append(name_2, metaData.file.name);\n            formData.append('cancel-uploading', metaData.file.name);\n            formData.append('cancelUploading', metaData.file.name);\n\n            _this.updateFormData(formData, eventArgs.customFormData);\n\n            var ajax = new Ajax(_this.asyncSettings.removeUrl, 'POST', true, null);\n            ajax.emitError = false;\n\n            ajax.onLoad = function (e) {\n              _this.removeChunkFile(e, metaData, custom);\n\n              return {};\n            };\n\n            ajax.send(formData);\n          }\n        });\n      } else {\n        if (totalChunk - 1 === metaData.chunkIndex && totalChunk > metaData.chunkIndex) {\n          var index = this.pausedData.indexOf(metaData);\n\n          if (index >= 0) {\n            this.pausedData.splice(index, 1);\n          }\n\n          if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) || !custom) && liElement) {\n            if (liElement && !isNullOrUndefined(liElement.querySelector('.' + PAUSE_UPLOAD))) {\n              detach(liElement.querySelector('.' + PAUSE_UPLOAD));\n            }\n\n            this.removeChunkProgressBar(metaData);\n          }\n\n          this.raiseSuccessEvent(e, metaData.file);\n          return;\n        }\n\n        if (metaData.file.statusCode !== '4') {\n          this.sendNextRequest(metaData);\n        }\n      }\n    } else {\n      this.chunkUploadFailed(e, metaData);\n    }\n  };\n\n  Uploader.prototype.sendNextRequest = function (metaData) {\n    metaData.start = metaData.end;\n    metaData.end += this.asyncSettings.chunkSize;\n    metaData.end = Math.min(metaData.end, metaData.file.size);\n    metaData.chunkIndex += 1;\n    this.sendRequest(metaData.file, metaData);\n  };\n\n  Uploader.prototype.removeChunkFile = function (e, metaData, custom) {\n    if (isNullOrUndefined(this.template) && isNullOrUndefined(custom) && !custom) {\n      var liElement = this.getLiElement(metaData.file);\n      var deleteIcon = liElement.querySelector('.' + ABORT_ICON);\n      var spinnerTarget = deleteIcon;\n      this.updateStatus(metaData.file, this.localizedTexts('fileUploadCancel'), '5');\n      this.updateProgressBarClasses(liElement, UPLOAD_FAILED);\n      this.removeProgressbar(liElement, 'failure');\n      deleteIcon && deleteIcon.classList.remove(ABORT_ICON);\n      deleteIcon && deleteIcon.classList.add(REMOVE_ICON);\n      deleteIcon && deleteIcon.setAttribute('title', this.localizedTexts('remove'));\n      var pauseIcon = liElement.querySelector('.' + PAUSE_UPLOAD);\n      pauseIcon && pauseIcon.classList.add(RETRY_ICON);\n      pauseIcon && pauseIcon.classList.remove(PAUSE_UPLOAD);\n      pauseIcon && pauseIcon.setAttribute('title', this.localizedTexts('retry'));\n\n      if (!isNullOrUndefined(liElement) && !isNullOrUndefined(deleteIcon) && !isNullOrUndefined(liElement.querySelector('.e-spinner-pane'))) {\n        hideSpinner(spinnerTarget);\n        detach(liElement.querySelector('.e-spinner-pane'));\n      }\n    }\n  };\n\n  Uploader.prototype.pauseUpload = function (metaData, e, custom) {\n    metaData.file.statusCode = '4';\n    metaData.file.status = this.localizedTexts('pause');\n    this.updateMetaData(metaData);\n    var eventArgs = {\n      event: e ? e : null,\n      file: metaData.file,\n      chunkIndex: metaData.chunkIndex,\n      chunkCount: Math.round(metaData.file.size / this.asyncSettings.chunkSize),\n      chunkSize: this.asyncSettings.chunkSize\n    };\n    this.abortUpload(metaData, custom, eventArgs);\n  };\n\n  Uploader.prototype.abortUpload = function (metaData, custom, eventArgs) {\n    if (metaData.file.statusCode !== '4') {\n      metaData.request.emitError = false;\n      metaData.request.httpRequest.abort();\n    }\n\n    var liElement = this.getLiElement(metaData.file);\n\n    if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) || !custom)) {\n      var targetElement = liElement.querySelector('.' + PAUSE_UPLOAD);\n      targetElement.classList.remove(PAUSE_UPLOAD);\n      targetElement.classList.add(RESUME_UPLOAD);\n      targetElement.setAttribute('title', this.localizedTexts('resume'));\n      targetElement.nextElementSibling.classList.add(REMOVE_ICON);\n      targetElement.nextElementSibling.classList.remove(ABORT_ICON);\n      targetElement.nextElementSibling.setAttribute('title', this.localizedTexts('remove'));\n    }\n\n    for (var i = 0; i < this.pausedData.length; i++) {\n      if (this.pausedData[i].file.name === metaData.file.name) {\n        this.pausedData.splice(i, 1);\n      }\n    }\n\n    this.pausedData.push(metaData);\n    this.trigger('pausing', eventArgs);\n  };\n\n  Uploader.prototype.resumeUpload = function (metaData, e, custom) {\n    var liElement = this.getLiElement(metaData.file);\n    var targetElement;\n\n    if (!isNullOrUndefined(liElement)) {\n      targetElement = liElement.querySelector('.' + RESUME_UPLOAD);\n    }\n\n    if (!isNullOrUndefined(targetElement) && (isNullOrUndefined(custom) || !custom)) {\n      targetElement.classList.remove(RESUME_UPLOAD);\n      targetElement.classList.add(PAUSE_UPLOAD);\n      targetElement.setAttribute('title', this.localizedTexts('pause'));\n      targetElement.nextElementSibling.classList.remove(REMOVE_ICON);\n      targetElement.nextElementSibling.classList.add(ABORT_ICON);\n      targetElement.nextElementSibling.setAttribute('title', this.localizedTexts('abort'));\n    }\n\n    metaData.file.status = this.localizedTexts('inProgress');\n    metaData.file.statusCode = '3';\n    this.updateMetaData(metaData);\n    var eventArgs = {\n      event: e ? e : null,\n      file: metaData.file,\n      chunkIndex: metaData.chunkIndex,\n      chunkCount: Math.round(metaData.file.size / this.asyncSettings.chunkSize),\n      chunkSize: this.asyncSettings.chunkSize\n    };\n    this.trigger('resuming', eventArgs);\n\n    for (var i = 0; i < this.pausedData.length; i++) {\n      if (this.pausedData[i].end === this.pausedData[i].file.size) {\n        this.chunkUploadComplete(e, metaData, custom);\n      } else {\n        if (this.pausedData[i].file.name === metaData.file.name) {\n          this.pausedData[i].start = this.pausedData[i].end;\n          this.pausedData[i].end = this.pausedData[i].end + this.asyncSettings.chunkSize;\n          this.pausedData[i].end = Math.min(this.pausedData[i].end, this.pausedData[i].file.size);\n          this.pausedData[i].chunkIndex = this.pausedData[i].chunkIndex + 1;\n          this.sendRequest(this.pausedData[i].file, this.pausedData[i], custom);\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.updateMetaData = function (metaData) {\n    if (this.uploadMetaData.indexOf(metaData) === -1) {\n      this.uploadMetaData.push(metaData);\n    } else {\n      this.uploadMetaData.splice(this.uploadMetaData.indexOf(metaData), 1);\n      this.uploadMetaData.push(metaData);\n    }\n  };\n\n  Uploader.prototype.removeChunkProgressBar = function (metaData) {\n    var liElement = this.getLiElement(metaData.file);\n\n    if (!isNullOrUndefined(liElement)) {\n      this.updateProgressBarClasses(liElement, UPLOAD_SUCCESS);\n      this.removeProgressbar(liElement, 'success');\n      var cancelButton = liElement.querySelector('.' + ABORT_ICON);\n\n      if (!isNullOrUndefined(cancelButton)) {\n        cancelButton.classList.add(DELETE_ICON);\n        cancelButton.setAttribute('title', this.localizedTexts('delete'));\n        cancelButton.classList.remove(ABORT_ICON, UPLOAD_INPROGRESS);\n      }\n    }\n  };\n\n  Uploader.prototype.chunkUploadFailed = function (e, metaData, custom) {\n    var _this = this;\n\n    var chunkCount = Math.max(Math.ceil(metaData.file.size / this.asyncSettings.chunkSize), 1);\n    var liElement;\n\n    if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) || !custom)) {\n      liElement = this.getLiElement(metaData.file);\n    }\n\n    var requestResponse = e && e.currentTarget ? this.getResponse(e) : null;\n    var eventArgs = {\n      event: e,\n      file: metaData.file,\n      chunkIndex: metaData.chunkIndex,\n      totalChunk: chunkCount,\n      chunkSize: this.asyncSettings.chunkSize,\n      cancel: false,\n      response: requestResponse\n    };\n    this.trigger('chunkFailure', eventArgs, function (eventArgs) {\n      // To prevent triggering of failure event\n      if (!eventArgs.cancel) {\n        if (metaData.retryCount < _this.asyncSettings.retryCount) {\n          setTimeout(function () {\n            _this.retryRequest(liElement, metaData, custom);\n          }, _this.asyncSettings.retryAfterDelay);\n        } else {\n          if (!isNullOrUndefined(liElement)) {\n            var pauseButton = liElement.querySelector('.' + PAUSE_UPLOAD) ? liElement.querySelector('.' + PAUSE_UPLOAD) : liElement.querySelector('.' + RESUME_UPLOAD);\n\n            if (!isNullOrUndefined(pauseButton)) {\n              pauseButton.classList.add(RETRY_ICON);\n              pauseButton.classList.remove(PAUSE_UPLOAD, RESUME_UPLOAD);\n            }\n\n            _this.updateProgressBarClasses(liElement, UPLOAD_FAILED);\n\n            _this.removeProgressbar(liElement, 'failure');\n\n            liElement.querySelector('.e-icons').classList.remove(UPLOAD_INPROGRESS);\n            var iconElement = liElement.querySelector('.' + ABORT_ICON) ? liElement.querySelector('.' + ABORT_ICON) : liElement.querySelector('.' + REMOVE_ICON);\n            iconElement.classList.remove(ABORT_ICON);\n\n            if (!isNullOrUndefined(liElement.querySelector('.' + PAUSE_UPLOAD))) {\n              detach(liElement.querySelector('.' + PAUSE_UPLOAD));\n            }\n\n            if (metaData.start > 0) {\n              iconElement.classList.add(DELETE_ICON);\n              iconElement.setAttribute('title', _this.localizedTexts('delete'));\n            } else {\n              iconElement.classList.add(REMOVE_ICON);\n              iconElement.setAttribute('title', _this.localizedTexts('remove'));\n            }\n          }\n\n          metaData.retryCount = 0;\n          var file_1 = metaData.file;\n\n          var failureMessage = _this.localizedTexts('uploadFailedMessage');\n\n          var args = {\n            e: e,\n            response: requestResponse,\n            operation: 'upload',\n            file: _this.updateStatus(file_1, failureMessage, '0', false),\n            statusText: failureMessage\n          };\n\n          _this.trigger('failure', args, function (args) {\n            _this.updateStatus(file_1, args.statusText, '0');\n\n            _this.uploadSequential();\n\n            _this.checkActionComplete(true);\n          });\n        }\n      }\n    });\n  };\n\n  Uploader.prototype.retryRequest = function (liElement, metaData, custom) {\n    if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) || !custom) && liElement) {\n      this.updateProgressBarClasses(liElement, UPLOAD_FAILED);\n    }\n\n    metaData.retryCount += 1;\n    this.sendRequest(metaData.file, metaData);\n  };\n\n  Uploader.prototype.checkPausePlayAction = function (e) {\n    var targetElement = e.target;\n    var selectedElement = e.target.parentElement;\n    var index = this.fileList.indexOf(selectedElement);\n    var fileData = this.filesData[index];\n    var metaData = this.getCurrentMetaData(fileData);\n\n    if (targetElement.classList.contains(PAUSE_UPLOAD)) {\n      /* istanbul ignore next */\n      this.pauseUpload(metaData, e);\n    } else if (targetElement.classList.contains(RESUME_UPLOAD)) {\n      /* istanbul ignore next */\n      this.resumeUpload(metaData, e);\n    } else if (targetElement.classList.contains(RETRY_ICON)) {\n      if (metaData.file.status === this.localizedTexts('fileUploadCancel')) {\n        this.retryUpload(metaData, false);\n      } else {\n        this.retryUpload(metaData, true);\n      }\n    }\n  };\n\n  Uploader.prototype.retryUpload = function (metaData, fromcanceledStage) {\n    if (fromcanceledStage) {\n      metaData.end = metaData.end + this.asyncSettings.chunkSize;\n      metaData.start = metaData.start + this.asyncSettings.chunkSize;\n      this.sendRequest(metaData.file, metaData);\n    } else {\n      metaData.file.statusCode = '1';\n      metaData.file.status = this.localizedTexts('readyToUploadMessage');\n      this.chunkUpload(metaData.file);\n    }\n    /* istanbul ignore next */\n\n\n    this.getLiElement(metaData.file).classList.add(RESTRICT_RETRY);\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Uploader.prototype.chunkUploadInProgress = function (e, metaData, custom) {\n    var _this = this;\n\n    if (metaData.file.statusCode === '4') {\n      return;\n    }\n\n    if (metaData.file.statusCode !== '4' && metaData.file.statusCode !== '5') {\n      metaData.file.statusCode = '3';\n      metaData.file.status = this.localizedTexts('inProgress');\n    }\n\n    this.updateMetaData(metaData);\n    var liElement = this.getLiElement(metaData.file);\n\n    if (isNullOrUndefined(liElement)) {\n      return;\n    }\n\n    var retryElement = liElement.querySelector('.' + RETRY_ICON);\n\n    if (!isNullOrUndefined(retryElement)) {\n      retryElement.classList.add(PAUSE_UPLOAD);\n      retryElement.setAttribute('title', this.localizedTexts('pause'));\n      retryElement.classList.remove(RETRY_ICON);\n    }\n\n    if (!isNullOrUndefined(liElement)) {\n      if (!(liElement.querySelectorAll('.' + PROGRESS_WRAPPER).length > 0)) {\n        var statusElement = liElement.querySelector('.' + STATUS);\n\n        if (isNullOrUndefined(this.template)) {\n          statusElement.classList.add(UPLOAD_INPROGRESS);\n          statusElement.classList.remove(UPLOAD_FAILED);\n          this.createProgressBar(liElement);\n          this.updateProgressBarClasses(liElement, UPLOAD_INPROGRESS);\n        }\n\n        var clearIcon = liElement.querySelector('.' + REMOVE_ICON) ? liElement.querySelector('.' + REMOVE_ICON) : liElement.querySelector('.' + DELETE_ICON);\n\n        if (!isNullOrUndefined(clearIcon)) {\n          clearIcon.classList.add(ABORT_ICON);\n          clearIcon.setAttribute('title', this.localizedTexts('abort'));\n          clearIcon.classList.remove(REMOVE_ICON);\n        }\n      }\n\n      if (!isNaN(Math.round(e.loaded / e.total * 100)) && isNullOrUndefined(this.template) && metaData.file.statusCode !== '4') {\n        var progressVal = void 0;\n        var totalChunks = Math.ceil(metaData.file.size / this.asyncSettings.chunkSize) - 1;\n\n        if (this.asyncSettings.chunkSize && totalChunks) {\n          progressVal = Math.round(metaData.chunkIndex / totalChunks * 100);\n          this.changeProgressValue(liElement, progressVal.toString() + '%');\n        }\n      }\n\n      if (metaData.chunkIndex === 0) {\n        this.checkActionButtonStatus();\n      }\n    }\n\n    if (isNullOrUndefined(liElement.querySelector('.' + PAUSE_UPLOAD)) && isNullOrUndefined(this.template) && isNullOrUndefined(liElement.querySelector('.' + DELETE_ICON))) {\n      this.pauseButton = this.createElement('span', {\n        className: 'e-icons e-file-pause-btn',\n        attrs: {\n          'tabindex': this.btnTabIndex\n        }\n      });\n\n      if (this.browserName === 'msie') {\n        this.pauseButton.classList.add('e-msie');\n      }\n\n      var abortIcon = liElement.querySelector('.' + ABORT_ICON);\n      abortIcon.parentElement.insertBefore(this.pauseButton, abortIcon);\n      this.pauseButton.setAttribute('title', this.localizedTexts('pause'));\n      this.pauseButton.addEventListener('click', function (e) {\n        _this.checkPausePlayAction(e);\n      }, false);\n    }\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * It is used to convert bytes value into kilobytes or megabytes depending on the size based\n   * on [binary prefix](https://en.wikipedia.org/wiki/Binary_prefix).\n   *\n   * @param { number } bytes - Specifies the file size in bytes.\n   * @returns {string}\n   */\n\n\n  Uploader.prototype.bytesToSize = function (bytes) {\n    var i = -1;\n\n    if (!bytes) {\n      return '0.0 KB';\n    }\n\n    do {\n      bytes = bytes / 1024;\n      i++;\n    } while (bytes > 99);\n\n    if (i >= 2) {\n      bytes = bytes * 1024;\n      i = 1;\n    }\n\n    return Math.max(bytes, 0).toFixed(1) + ' ' + ['KB', 'MB'][i];\n  };\n  /**\n   * Allows you to sort the file data alphabetically based on its file name clearly.\n   *\n   * @param { FileList } filesData - specifies the files data for upload.\n   * @returns {File[]}\n   */\n\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.sortFileList = function (filesData) {\n    filesData = filesData ? filesData : this.sortFilesList;\n    var files = filesData;\n    var fileNames = [];\n\n    for (var i = 0; i < files.length; i++) {\n      fileNames.push(files[i].name);\n    }\n\n    var sortedFileNames = fileNames.sort();\n    var sortedFilesData = [];\n\n    for (var _i = 0, sortedFileNames_1 = sortedFileNames; _i < sortedFileNames_1.length; _i++) {\n      var name_3 = sortedFileNames_1[_i];\n\n      for (var i = 0; i < files.length; i++) {\n        if (name_3 === files[i].name) {\n          sortedFilesData.push(files[i]);\n        }\n      }\n    }\n\n    return sortedFilesData;\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n\n\n  Uploader.prototype.destroy = function () {\n    this.element.value = null;\n    this.clearTemplate();\n    this.clearAll();\n    this.unWireEvents();\n    this.unBindDropEvents();\n\n    if (this.multiple) {\n      this.element.removeAttribute('multiple');\n    }\n\n    if (!this.enabled) {\n      this.element.removeAttribute('disabled');\n    }\n\n    this.element.removeAttribute('accept');\n    this.setInitialAttributes();\n    var attributes = ['aria-label', 'directory', 'webkitdirectory', 'tabindex'];\n\n    for (var _i = 0, attributes_2 = attributes; _i < attributes_2.length; _i++) {\n      var key = attributes_2[_i];\n      this.element.removeAttribute(key);\n    }\n\n    if (!isNullOrUndefined(this.uploadWrapper)) {\n      this.uploadWrapper.parentElement.appendChild(this.element);\n      detach(this.uploadWrapper);\n    }\n\n    this.uploadWrapper = null;\n\n    _super.prototype.destroy.call(this);\n  };\n  /**\n   * Allows you to call the upload process manually by calling save URL action.\n   * To process the selected files (added in upload queue), pass an empty argument otherwise\n   * upload the specific file based on its argument.\n   *\n   * @param { FileInfo | FileInfo[] } files - Specifies the files data for upload.\n   * @param {boolean} custom - Specifies whether the uploader is rendered with custom file list.\n   * @returns {void}\n   */\n\n\n  Uploader.prototype.upload = function (files, custom) {\n    var _this = this;\n\n    files = files ? files : this.filesData;\n\n    if (this.sequentialUpload && (this.isFirstFileOnSelection || custom)) {\n      this.sequenceUpload(files);\n    } else {\n      var uploadFiles_1 = this.getFilesInArray(files);\n      var eventArgs = {\n        customFormData: [],\n        currentRequest: null,\n        cancel: false\n      };\n      this.trigger('beforeUpload', eventArgs, function (eventArgs) {\n        if (!eventArgs.cancel) {\n          _this.uploadFiles(uploadFiles_1, custom);\n        }\n      });\n    }\n  };\n\n  Uploader.prototype.getFilesInArray = function (files) {\n    var uploadFiles = [];\n\n    if (files instanceof Array) {\n      uploadFiles = files;\n    } else {\n      uploadFiles.push(files);\n    }\n\n    return uploadFiles;\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.serverReadFileBase64 = function (fileIndex, position, totalCount) {\n    var _this = this;\n\n    return new Promise(function (resolve, reject) {\n      var file = _this.fileStreams[fileIndex].rawFile;\n\n      try {\n        var reader = new FileReader();\n\n        reader.onload = function (args) {\n          return function () {\n            try {\n              var contents = args.result;\n              var data = contents ? contents.split(';base64,')[1] : null;\n              resolve(data);\n            } catch (e) {\n              reject(e);\n            }\n          };\n        }(reader);\n\n        reader.readAsDataURL(file.slice(position, position + totalCount));\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.uploadFileCount = function (ele) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    var files = this.filesData;\n\n    if (!files || files.length === 0) {\n      return -1;\n    }\n\n    var result = files.length;\n    return result;\n  };\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.getFileRead = function (index, ele) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    var files = this.filesData;\n\n    if (!files || files.length === 0) {\n      return -1;\n    }\n\n    var file = files[index];\n    var fileCount = this.newFileRef++;\n    this.fileStreams[fileCount] = file;\n    return fileCount;\n  };\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.getFileInfo = function (index, ele) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    var files = this.filesData;\n\n    if (!files || files.length === 0) {\n      return null;\n    }\n\n    var file = files[index];\n\n    if (!file) {\n      return null;\n    }\n\n    return this.filesData[index];\n  };\n\n  Uploader.prototype.uploadFiles = function (files, custom) {\n    var selectedFiles = [];\n\n    if (this.asyncSettings.saveUrl === '' || isNullOrUndefined(this.asyncSettings.saveUrl)) {\n      return;\n    }\n\n    if (!custom || isNullOrUndefined(custom)) {\n      if (!this.multiple) {\n        var file = [];\n        file.push(files[0]);\n        selectedFiles = this.filterfileList(file);\n      } else {\n        selectedFiles = this.filterfileList(files);\n      }\n    } else {\n      selectedFiles = files;\n    }\n\n    for (var i = 0; i < selectedFiles.length; i++) {\n      this.uploadFilesRequest(selectedFiles, i, custom);\n    }\n  };\n\n  Uploader.prototype.uploadFilesRequest = function (selectedFiles, i, custom) {\n    var _this = this;\n\n    var cloneFiles = [];\n    var chunkEnabled = this.checkChunkUpload();\n    var ajax = new Ajax(this.asyncSettings.saveUrl, 'POST', true, null);\n    ajax.emitError = false;\n    var getFileData;\n    var eventArgs = {\n      fileData: selectedFiles[i],\n      customFormData: [],\n      cancel: false\n    };\n    var formData = new FormData();\n\n    ajax.beforeSend = function (e) {\n      eventArgs.currentRequest = ajax.httpRequest;\n\n      _this.trigger('uploading', eventArgs, function (eventArgs) {\n        /* istanbul ignore next */\n        if (eventArgs.cancel) {\n          _this.eventCancelByArgs(e, eventArgs, selectedFiles[i]);\n        }\n\n        _this.updateFormData(formData, eventArgs.customFormData);\n      });\n    };\n\n    if (selectedFiles[i].statusCode === '1') {\n      var name_4 = this.element.getAttribute('name');\n      formData.append(name_4, selectedFiles[i].rawFile, selectedFiles[i].name);\n\n      if (chunkEnabled && selectedFiles[i].size > this.asyncSettings.chunkSize) {\n        this.chunkUpload(selectedFiles[i], custom, i);\n      } else {\n        ajax.onLoad = function (e) {\n          if (eventArgs.cancel) {\n            return {};\n          } else {\n            _this.uploadComplete(e, selectedFiles[i], custom);\n\n            return {};\n          }\n        };\n\n        ajax.onUploadProgress = function (e) {\n          if (eventArgs.cancel) {\n            return {};\n          } else {\n            _this.uploadInProgress(e, selectedFiles[i], custom, ajax);\n\n            return {};\n          }\n        };\n        /* istanbul ignore next */\n\n\n        ajax.onError = function (e) {\n          _this.uploadFailed(e, selectedFiles[i]);\n\n          return {};\n        };\n\n        ajax.send(formData);\n      }\n    }\n  };\n\n  Uploader.prototype.spliceFiles = function (liIndex) {\n    var liElement = this.fileList[liIndex];\n    var allFiles = this.getFilesData();\n    var nameElements = +liElement.getAttribute('data-files-count');\n    var startIndex = 0;\n\n    for (var i = 0; i < liIndex; i++) {\n      startIndex += +this.fileList[i].getAttribute('data-files-count');\n    }\n\n    var endIndex = startIndex + nameElements - 1;\n\n    for (var j = endIndex; j >= startIndex; j--) {\n      allFiles.splice(j, 1);\n    }\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Remove the uploaded file from server manually by calling the remove URL action.\n   * If you pass an empty argument to this method, the complete file list can be cleared,\n   * otherwise remove the specific file based on its argument (file_data).\n   *\n   * @param { FileInfo | FileInfo[] } fileData - specifies the files data to remove from file list/server.\n   * @param { boolean } customTemplate - Set true if the component rendering with customize template.\n   * @param { boolean } removeDirectly - Set true if files remove without removing event.\n   * @param { boolean } postRawFile - Set false, to post file name only to the remove action.\n   * @returns {void}\n   */\n\n\n  Uploader.prototype.remove = function (fileData, customTemplate, removeDirectly, postRawFile, args) {\n    var _this = this;\n\n    if (isNullOrUndefined(postRawFile)) {\n      postRawFile = true;\n    }\n\n    var eventArgs = {\n      event: args,\n      cancel: false,\n      filesData: [],\n      customFormData: [],\n      postRawFile: postRawFile,\n      currentRequest: null\n    };\n    var beforeEventArgs = {\n      cancel: false,\n      customFormData: [],\n      currentRequest: null\n    };\n    this.trigger('beforeRemove', beforeEventArgs, function (beforeEventArgs) {\n      if (!beforeEventArgs.cancel) {\n        if (_this.isFormUpload()) {\n          eventArgs.filesData = fileData;\n\n          _this.trigger('removing', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel) {\n              var removingFiles = _this.getFilesInArray(fileData);\n\n              var isLiRemoved = false;\n              var liIndex = void 0;\n\n              for (var _i = 0, removingFiles_1 = removingFiles; _i < removingFiles_1.length; _i++) {\n                var data = removingFiles_1[_i];\n\n                if (!isLiRemoved) {\n                  liIndex = _this.fileList.indexOf(data.list);\n                }\n\n                if (liIndex > -1) {\n                  var inputElement = !isNullOrUndefined(data.input) ? data.input : null;\n\n                  if (inputElement) {\n                    detach(inputElement);\n                  }\n\n                  _this.spliceFiles(liIndex);\n\n                  detach(_this.fileList[liIndex]);\n\n                  _this.fileList.splice(liIndex, 1);\n\n                  isLiRemoved = true;\n                  liIndex = -1;\n                }\n              }\n            }\n          });\n        } else if (_this.isForm && (isNullOrUndefined(_this.asyncSettings.removeUrl) || _this.asyncSettings.removeUrl === '')) {\n          eventArgs.filesData = _this.getFilesData();\n\n          _this.trigger('removing', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel) {\n              _this.clearAll();\n            }\n          });\n        } else {\n          var removeFiles = [];\n          fileData = !isNullOrUndefined(fileData) ? fileData : _this.filesData;\n\n          if (fileData instanceof Array) {\n            removeFiles = fileData;\n          } else {\n            removeFiles.push(fileData);\n          }\n\n          eventArgs.filesData = removeFiles;\n          var removeUrl = _this.asyncSettings.removeUrl;\n          var validUrl = removeUrl === '' || isNullOrUndefined(removeUrl) ? false : true;\n\n          var _loop_5 = function (files) {\n            var fileUploadedIndex = _this.uploadedFilesData.indexOf(files);\n\n            if ((files.statusCode === '2' || files.statusCode === '4' || files.statusCode === '0' && fileUploadedIndex !== -1) && validUrl) {\n              _this.removeUploadedFile(files, eventArgs, removeDirectly, customTemplate);\n            } else {\n              if (!removeDirectly) {\n                _this.trigger('removing', eventArgs, function (eventArgs) {\n                  if (!eventArgs.cancel) {\n                    _this.removeFilesData(files, customTemplate);\n                  }\n                });\n              } else {\n                _this.removeFilesData(files, customTemplate);\n              }\n            }\n\n            if (args && !args.target.classList.contains(REMOVE_ICON)) {\n              _this.checkActionComplete(false);\n            }\n          };\n\n          for (var _i = 0, removeFiles_1 = removeFiles; _i < removeFiles_1.length; _i++) {\n            var files = removeFiles_1[_i];\n\n            _loop_5(files);\n          }\n        }\n      }\n    });\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Clear all the file entries from list that can be uploaded files or added in upload queue.\n   *\n   * @returns {void}\n   */\n\n\n  Uploader.prototype.clearAll = function () {\n    var _this = this;\n\n    if (isNullOrUndefined(this.listParent)) {\n      if (this.browserName !== 'msie') {\n        this.element.value = '';\n      }\n\n      this.filesData = [];\n      return;\n    }\n\n    var eventArgs = {\n      cancel: false,\n      filesData: this.filesData\n    };\n    this.trigger('clearing', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        _this.clearData();\n\n        _this.actionCompleteCount = 0;\n        _this.count = -1;\n      }\n    });\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Get the data of files which are shown in file list.\n   *\n   * @param { number } index - specifies the file list item(li) index.\n   * @returns {FileInfo[]}\n   */\n\n\n  Uploader.prototype.getFilesData = function (index) {\n    if (isNullOrUndefined(index)) {\n      return this.filesData;\n    } else {\n      return this.getSelectedFiles(index);\n    }\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Pauses the in-progress chunked upload based on the file data.\n   *\n   * @param { FileInfo | FileInfo[] } fileData - specifies the files data to pause from uploading.\n   * @param { boolean } custom - Set true if used custom UI.\n   * @returns {void}\n   */\n\n\n  Uploader.prototype.pause = function (fileData, custom) {\n    fileData = fileData ? fileData : this.filesData;\n    var fileDataFiles = this.getFilesInArray(fileData);\n    this.pauseUploading(fileDataFiles, custom);\n  };\n\n  Uploader.prototype.pauseUploading = function (fileData, custom) {\n    var files = this.getFiles(fileData);\n\n    for (var i = 0; i < files.length; i++) {\n      if (files[i].statusCode === '3') {\n        this.pauseUpload(this.getCurrentMetaData(files[i], null), null, custom);\n      }\n    }\n  };\n\n  Uploader.prototype.getFiles = function (fileData) {\n    var files = [];\n\n    if (!isNullOrUndefined(fileData) && !(fileData instanceof Array)) {\n      files.push(fileData);\n    } else {\n      files = fileData;\n    }\n\n    return files;\n  };\n  /**\n   * Resumes the chunked upload that is previously paused based on the file data.\n   *\n   * @param { FileInfo | FileInfo[] } fileData - specifies the files data to resume the paused file.\n   * @param { boolean } custom - Set true if used custom UI.\n   * @returns {void}\n   */\n\n\n  Uploader.prototype.resume = function (fileData, custom) {\n    fileData = fileData ? fileData : this.filesData;\n    var fileDataFiles = this.getFilesInArray(fileData);\n    this.resumeFiles(fileDataFiles, custom);\n  };\n\n  Uploader.prototype.resumeFiles = function (fileData, custom) {\n    var files = this.getFiles(fileData);\n\n    for (var i = 0; i < files.length; i++) {\n      if (files[i].statusCode === '4') {\n        this.resumeUpload(this.getCurrentMetaData(files[i], null), null, custom);\n      }\n    }\n  };\n  /**\n   * Retries the canceled or failed file upload based on the file data.\n   *\n   * @param { FileInfo | FileInfo[] } fileData - specifies the files data to retry the canceled or failed file.\n   * @param { boolean } fromcanceledStage - Set true to retry from canceled stage and set false to retry from initial stage.\n   * @param {boolean} custom -Specifies whether the uploader is rendered with custom file list.\n   * @returns {void}\n   */\n\n\n  Uploader.prototype.retry = function (fileData, fromcanceledStage, custom) {\n    fileData = fileData ? fileData : this.filesData;\n    var fileDataFiles = this.getFilesInArray(fileData);\n\n    if (this.sequentialUpload && this.isFirstFileOnSelection) {\n      this.isFirstFileOnSelection = false;\n    }\n\n    this.retryFailedFiles(fileDataFiles, fromcanceledStage, custom);\n  };\n\n  Uploader.prototype.retryFailedFiles = function (fileData, fromcanceledStage, custom) {\n    var files = this.getFiles(fileData);\n\n    for (var i = 0; i < files.length; i++) {\n      if (files[i].statusCode === '5' || files[i].statusCode === '0') {\n        if (this.asyncSettings.chunkSize > 0) {\n          this.retryUpload(this.getCurrentMetaData(files[i], null), fromcanceledStage);\n        } else {\n          var liElement = void 0;\n\n          if (!custom) {\n            liElement = this.fileList[this.filesData.indexOf(files[i])];\n          }\n\n          this.reloadcanceledFile(null, files[i], liElement, custom);\n        }\n      }\n    }\n  };\n  /**\n   * Stops the in-progress chunked upload based on the file data.\n   * When the file upload is canceled, the partially uploaded file is removed from server.\n   *\n   * @param { FileInfo | FileInfo[] } fileData - specifies the files data to cancel the progressing file.\n   * @returns {void}\n   */\n\n\n  Uploader.prototype.cancel = function (fileData) {\n    fileData = fileData ? fileData : this.filesData;\n    var cancelingFiles = this.getFilesInArray(fileData);\n    this.cancelUpload(cancelingFiles);\n  };\n\n  Uploader.prototype.cancelUpload = function (fileData) {\n    var files = this.getFiles(fileData);\n\n    if (this.asyncSettings.chunkSize > 0) {\n      for (var i = 0; i < files.length; i++) {\n        if (files[i].statusCode === '3') {\n          var metaData = this.getCurrentMetaData(files[i], null);\n          metaData.file.statusCode = '5';\n          metaData.file.status = this.localizedTexts('fileUploadCancel');\n          this.updateMetaData(metaData);\n          this.showHideUploadSpinner(files[i]);\n        }\n      }\n    } else {\n      for (var i = 0; i < files.length; i++) {\n        if (files[i].statusCode === '3') {\n          files[i].statusCode = '5';\n          files[i].status = this.localizedTexts('fileUploadCancel');\n          this.showHideUploadSpinner(files[i]);\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.showHideUploadSpinner = function (files) {\n    var liElement = this.getLiElement(files);\n\n    if (!isNullOrUndefined(liElement) && isNullOrUndefined(this.template)) {\n      var spinnerTarget = liElement.querySelector('.' + ABORT_ICON);\n      createSpinner({\n        target: spinnerTarget,\n        width: '20px'\n      });\n      showSpinner(spinnerTarget);\n    }\n  };\n\n  __decorate([Complex({\n    saveUrl: '',\n    removeUrl: ''\n  }, AsyncSettings)], Uploader.prototype, \"asyncSettings\", void 0);\n\n  __decorate([Property(false)], Uploader.prototype, \"sequentialUpload\", void 0);\n\n  __decorate([Property({})], Uploader.prototype, \"htmlAttributes\", void 0);\n\n  __decorate([Property('')], Uploader.prototype, \"cssClass\", void 0);\n\n  __decorate([Property(true)], Uploader.prototype, \"enabled\", void 0);\n\n  __decorate([Property(null)], Uploader.prototype, \"template\", void 0);\n\n  __decorate([Property(true)], Uploader.prototype, \"multiple\", void 0);\n\n  __decorate([Property(true)], Uploader.prototype, \"autoUpload\", void 0);\n\n  __decorate([Complex({}, ButtonsProps)], Uploader.prototype, \"buttons\", void 0);\n\n  __decorate([Property('')], Uploader.prototype, \"allowedExtensions\", void 0);\n\n  __decorate([Property(0)], Uploader.prototype, \"minFileSize\", void 0);\n\n  __decorate([Property(30000000)], Uploader.prototype, \"maxFileSize\", void 0);\n\n  __decorate([Property(null)], Uploader.prototype, \"dropArea\", void 0);\n\n  __decorate([Collection([{}], FilesProp)], Uploader.prototype, \"files\", void 0);\n\n  __decorate([Property(true)], Uploader.prototype, \"showFileList\", void 0);\n\n  __decorate([Property(false)], Uploader.prototype, \"directoryUpload\", void 0);\n\n  __decorate([Property('Default')], Uploader.prototype, \"dropEffect\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"created\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"actionComplete\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"rendering\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"beforeUpload\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"fileListRendering\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"selected\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"uploading\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"success\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"failure\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"removing\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"beforeRemove\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"clearing\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"progress\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"change\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"chunkSuccess\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"chunkFailure\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"chunkUploading\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"canceling\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"pausing\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"resuming\", void 0);\n\n  Uploader = __decorate([NotifyPropertyChanges], Uploader);\n  return Uploader;\n}(Component);\n\nexport { Uploader };\n/* eslint-enable @typescript-eslint/no-explicit-any */","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Component","Property","Event","EventHandler","L10n","compile","isNullOrUndefined","NotifyPropertyChanges","detach","append","Animation","addClass","removeClass","KeyboardEvents","setValue","getValue","ChildProperty","Collection","Complex","Browser","Ajax","getUniqueID","closest","remove","createSpinner","showSpinner","hideSpinner","select","selectAll","CONTROL_WRAPPER","INPUT_WRAPPER","DROP_AREA","DROP_WRAPPER","LIST_PARENT","FILE","STATUS","ACTION_BUTTONS","UPLOAD_BUTTONS","CLEAR_BUTTONS","FILE_NAME","FILE_TYPE","FILE_SIZE","REMOVE_ICON","DELETE_ICON","SPINNER_PANE","ABORT_ICON","RETRY_ICON","DRAG_HOVER","PROGRESS_WRAPPER","PROGRESSBAR","PROGRESSBAR_TEXT","UPLOAD_INPROGRESS","UPLOAD_SUCCESS","UPLOAD_FAILED","TEXT_CONTAINER","VALIDATION_FAILS","RTL","DISABLED","RTL_CONTAINER","ICON_FOCUSED","PROGRESS_INNER_WRAPPER","PAUSE_UPLOAD","RESUME_UPLOAD","RESTRICT_RETRY","wrapperAttr","FORM_UPLOAD","HIDDEN_INPUT","INVALID_FILE","INFORMATION","FilesProp","_super","apply","ButtonsProps","AsyncSettings","Uploader","options","element","_this","call","initialAttr","accept","multiple","disabled","uploadedFilesData","base64String","isForm","allTypes","pausedData","uploadMetaData","tabIndex","btnTabIndex","disableKeyboardNavigation","count","actionCompleteCount","flag","selectedFiles","uploaderName","fileStreams","newFileRef","isFirstFileOnSelection","dragCounter","fileList","filesData","uploaderOptions","onPropertyChanged","newProp","oldProp","_i","_a","keys","prop","setExtensions","allowedExtensions","clearAll","setControlStatus","setMultipleSelection","setRTL","reRenderFileList","buttons","browse","clear","upload","renderButtonTemplates","unBindDropEvents","updateDropArea","updateHTMLAttrToElement","updateHTMLAttrToWrapper","checkHTMLAttributes","renderPreLoadFiles","updateDirectoryAttributes","l10n","setLocale","locale","setLocalizedTexts","preLocaleObj","setCSSClass","cssClass","template","browseButton","innerText","localizedTexts","setAttribute","uploadWrapper","querySelector","innerHTML","updateFileList","getKeyValue","val","keyValue","status","classList","contains","autoUpload","uploadButton","clearButton","listParent","createFileList","actionButtons","removeActionButtons","renderActionButtons","checkActionButtonStatus","preRender","localeText","Browse","Clear","Upload","dropFilesHint","invalidMaxFileSize","invalidMinFileSize","invalidFileType","uploadFailedMessage","uploadSuccessMessage","removedSuccessMessage","removedFailedMessage","inProgress","readyToUploadMessage","abort","cancel","delete","pauseUpload","pause","resume","retry","fileUploadCancel","invalidFileSelection","totalFiles","size","formRendered","ejInstance","tagName","inputElement","createElement","attrs","type","index","attributes","nodeName","nodeValue","hasAttribute","appendChild","isPureReactComponent","props","name","id","getAttribute","keyConfigs","enter","browserName","info","parentEle","document","documentElement","parentElement","formElement","getPersistData","addOnPersist","getModuleName","directoryUpload","removeAttribute","render","renderBrowseButton","initializeUpload","wireEvents","className","textContent","blur","isPreloadFiles","focus","wireActionButtonEvents","serverActionButtonsEventBind","unwireActionButtonEvents","add","uploadButtonClick","clearButtonClick","uploadText","clearText","inputWrapper","insertBefore","dropAreaWrapper","setDropArea","files","enablePersistence","slice","clearData","files_1","data","fileData","split","rawFile","validationMessages","minSize","maxSize","statusCode","push","allowUpload","showFileList","sequentialUpload","length_1","querySelectorAll","dropTextArea","dropArea","dropZoneElement","enableDropText","parentNode","createDropTextHint","undefined","setProperties","bindDropEvents","fileDropArea","htmlAttributes","pro","indexOf","updatedClassValues","replace","trim","uploadStyle","newAttr","createAttribute","value","setAttributeNode","checkAutoUpload","sequenceUpload","isFileListCreated","oldCSSClass","updatedCssClassValue","updatedOldCssClass","browseButtonClick","onSelectFiles","removeFocus","keyboardModule","keyAction","keyActionHandler","bind","eventName","resetForm","unWireEvents","destroy","e","targetElement","action","metaData","getCurrentMetaData","file","abortUpload","resumeUpload","chunkUpload","removeFiles","preventDefault","stopPropagation","fileInfo","targetMetaData","activeElement","click","dropElement","dragHover","onDragLeave","onPasteFile","onDragEnter","enabled","dropEffect","dataTransfer","toLowerCase","event","item","clipboardData","items","pasteFile","kind","match","renderSelectedFiles","getAsFile","getSelectedFiles","liElement","allFiles","getFilesData","nameElements","startIndex","j","args","selectedElement","formUpload","isFormUpload","getFilesInArray","spinnerTarget","width","uploadSequential","checkActionComplete","removeFilesData","customTemplate","splice","getLiElement","removeUploadedFile","eventArgs","removeDirectly","custom","ajax","asyncSettings","removeUrl","emitError","formData","FormData","beforeSend","currentRequest","httpRequest","trigger","removingEventCallback","onLoad","removeCompleted","onError","removeFailed","send","postRawFile","updateFormData","customFormData","customData","_loop_1","map","updateCustomheader","request","_loop_2","setRequestHeader","response","currentTarget","getResponse","readyState","operation","updateStatus","rootElement","statusElement","getFilesFromFolder","filesEntries","validDirectoryUpload","checkDirectoryUpload","_loop_3","webkitGetAsEntry","isFile","files_2","fileObj","path","fullPath","this_1","isDirectory","traverseFileTree","directoryReader","createReader","readFileFromDirectory","readEntries","entries","pushFilesEntries","_loop_4","this_2","targetFiles","sortFilesList","sortFileList","getBase64","Promise","resolve","reject","fileReader","FileReader","readAsDataURL","onload","result","onerror","error","directory","paste","isModified","modifiedFilesData","progressInterval","isCanceled","updateInitialFileDetails","checkExtension","_internalRenderSelect","fileName","substring","lastIndexOf","getFileType","webkitRelativePath","fileDetails","validatedFileSize","fileSource","concat","k","dataFiles","updateSortedFileList","raiseActionComplete","allowFormUpload","saveUrl","singleUpload","previousListClone","added","removedList","cloneNode","removedList_1","oldList","childNodes","createParentUL","isBlank","str","test","dropFiles","extensions","extensions_1","extension","toLocaleLowerCase","fileSize","minSizeError","maxSizeError","minFileSize","maxFileSize","errorMessage","isPreLoadFile","isPreload","createCustomfileList","fileData_1","listItem","listElement","uploadTemplateFn","templateComplier","liTempCompiler","isStringTemplate","fromElements","eventsArgs","renderReactTemplates","formFileList","fileContainer","statusMessage","fileData_2","fileNameEle","getFileNameOnly","fileTypeEle","fileType","enableRtl","rtlContainer","truncateName","formValidateFileInfo","setListToFileInfo","infoEle","bytesToSize","getFileSize","createFormInput","iconElement","mergeFileInfo","addInvalidClass","typeValidationMessage","fileData_3","input","fileData_4","list","fileNames","fileData_5","join","statusForFormUpload","isValid","fileData_6","formCustomFileList","isSelectedFile","fileData_7","textContainer","textElement","fileExtension","preventActionComplete","getSlicedName","nameElement","text","dataset","tail","fileData_8","offsetWidth","scrollWidth","names","setInitialAttributes","filterfileList","filterFiles","li","updateLiStatus","createProgressBar","progressbarWrapper","progressBar","max","progressbarInnerWrapper","progressbarText","updateProgressbar","isNaN","Math","round","loaded","total","parseInt","changeProgressValue","toString","progressValue","uploadInProgress","customUI","cancelUploadingFile","updateProgressBarClasses","iconEle","name_1","removecanceledFile","renderFailureState","requestResponse","removeProgressbar","deleteIcon","pauseButton","retryElement","addEventListener","reloadcanceledFile","uploadComplete","raiseSuccessEvent","uploadFailed","statusText","headers","getAllResponseHeaders","withCredentials","spinnerEle","increment","getSelectedFileStatus","matchFiles","matchFilesIndex","selectFileIndex","selectedFileData","fileDataIndex","callType","progressAnimation","duration","animate","setTimeout","animateProgressBar","uploadTemplate","exception","getConstant","isDynamic","attributes_1","isMutiple","isDisabled","fileIndex","start","end","min","chunkSize","blob","chunkIndex","retryCount","sendRequest","totalChunk","ceil","url","async","contentType","chunkUploadComplete","onUploadProgress","chunkUploadInProgress","currentChunkIndex","uploadingEventCallback","chunkUploadFailed","eventCancelByArgs","removeIcon","checkChunkUpload","updateMetaData","eventArgs_1","sendNextRequest","name_2","removeChunkFile","removeChunkProgressBar","pauseIcon","chunkCount","nextElementSibling","cancelButton","retryRequest","retryAfterDelay","file_1","failureMessage","checkPausePlayAction","retryUpload","fromcanceledStage","clearIcon","progressVal","totalChunks","abortIcon","bytes","toFixed","sortedFileNames","sort","sortedFilesData","sortedFileNames_1","name_3","clearTemplate","attributes_2","uploadFiles_1","uploadFiles","serverReadFileBase64","position","totalCount","reader","contents","uploadFileCount","ele","getFileRead","fileCount","getFileInfo","uploadFilesRequest","cloneFiles","chunkEnabled","getFileData","name_4","spliceFiles","liIndex","endIndex","beforeEventArgs","removingFiles","isLiRemoved","removingFiles_1","validUrl","_loop_5","fileUploadedIndex","removeFiles_1","fileDataFiles","pauseUploading","getFiles","resumeFiles","retryFailedFiles","cancelingFiles","cancelUpload","showHideUploadSpinner"],"sources":["C:/Users/leezh/Documents/Coding/Orbital Test/Orbital-Duty-Planner/node_modules/@syncfusion/ej2-inputs/src/uploader/uploader.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Component, Property, Event, EventHandler, L10n, compile, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, detach, append, Animation } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, KeyboardEvents, setValue, getValue, ChildProperty } from '@syncfusion/ej2-base';\nimport { Collection, Complex, Browser, Ajax, getUniqueID, closest, remove } from '@syncfusion/ej2-base';\nimport { createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { select, selectAll } from '@syncfusion/ej2-base';\nvar CONTROL_WRAPPER = 'e-upload e-control-wrapper';\nvar INPUT_WRAPPER = 'e-file-select';\nvar DROP_AREA = 'e-file-drop';\nvar DROP_WRAPPER = 'e-file-select-wrap';\nvar LIST_PARENT = 'e-upload-files';\nvar FILE = 'e-upload-file-list';\nvar STATUS = 'e-file-status';\nvar ACTION_BUTTONS = 'e-upload-actions';\nvar UPLOAD_BUTTONS = 'e-file-upload-btn e-css e-btn e-flat e-primary';\nvar CLEAR_BUTTONS = 'e-file-clear-btn e-css e-btn e-flat';\nvar FILE_NAME = 'e-file-name';\nvar FILE_TYPE = 'e-file-type';\nvar FILE_SIZE = 'e-file-size';\nvar REMOVE_ICON = 'e-file-remove-btn';\nvar DELETE_ICON = 'e-file-delete-btn';\nvar SPINNER_PANE = 'e-spinner-pane';\nvar ABORT_ICON = 'e-file-abort-btn';\nvar RETRY_ICON = 'e-file-reload-btn';\nvar DRAG_HOVER = 'e-upload-drag-hover';\nvar PROGRESS_WRAPPER = 'e-upload-progress-wrap';\nvar PROGRESSBAR = 'e-upload-progress-bar';\nvar PROGRESSBAR_TEXT = 'e-progress-bar-text';\nvar UPLOAD_INPROGRESS = 'e-upload-progress';\nvar UPLOAD_SUCCESS = 'e-upload-success';\nvar UPLOAD_FAILED = 'e-upload-fails';\nvar TEXT_CONTAINER = 'e-file-container';\nvar VALIDATION_FAILS = 'e-validation-fails';\nvar RTL = 'e-rtl';\nvar DISABLED = 'e-disabled';\nvar RTL_CONTAINER = 'e-rtl-container';\nvar ICON_FOCUSED = 'e-clear-icon-focus';\nvar PROGRESS_INNER_WRAPPER = 'e-progress-inner-wrap';\nvar PAUSE_UPLOAD = 'e-file-pause-btn';\nvar RESUME_UPLOAD = 'e-file-play-btn';\nvar RESTRICT_RETRY = 'e-restrict-retry';\nvar wrapperAttr = ['title', 'style', 'class'];\nvar FORM_UPLOAD = 'e-form-upload';\nvar HIDDEN_INPUT = 'e-hidden-file-input';\nvar INVALID_FILE = 'e-file-invalid';\nvar INFORMATION = 'e-file-information';\nvar FilesProp = /** @class */ (function (_super) {\n    __extends(FilesProp, _super);\n    function FilesProp() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], FilesProp.prototype, \"name\", void 0);\n    __decorate([\n        Property(null)\n    ], FilesProp.prototype, \"size\", void 0);\n    __decorate([\n        Property('')\n    ], FilesProp.prototype, \"type\", void 0);\n    return FilesProp;\n}(ChildProperty));\nexport { FilesProp };\nvar ButtonsProps = /** @class */ (function (_super) {\n    __extends(ButtonsProps, _super);\n    function ButtonsProps() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Browse...')\n    ], ButtonsProps.prototype, \"browse\", void 0);\n    __decorate([\n        Property('Upload')\n    ], ButtonsProps.prototype, \"upload\", void 0);\n    __decorate([\n        Property('Clear')\n    ], ButtonsProps.prototype, \"clear\", void 0);\n    return ButtonsProps;\n}(ChildProperty));\nexport { ButtonsProps };\nvar AsyncSettings = /** @class */ (function (_super) {\n    __extends(AsyncSettings, _super);\n    function AsyncSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], AsyncSettings.prototype, \"saveUrl\", void 0);\n    __decorate([\n        Property('')\n    ], AsyncSettings.prototype, \"removeUrl\", void 0);\n    __decorate([\n        Property(0)\n    ], AsyncSettings.prototype, \"chunkSize\", void 0);\n    __decorate([\n        Property(3)\n    ], AsyncSettings.prototype, \"retryCount\", void 0);\n    __decorate([\n        Property(500)\n    ], AsyncSettings.prototype, \"retryAfterDelay\", void 0);\n    return AsyncSettings;\n}(ChildProperty));\nexport { AsyncSettings };\n/**\n * The uploader component allows to upload images, documents, and other files from local to server.\n * ```html\n * <input type='file' name='images[]' id='upload'/>\n * ```\n * ```typescript\n * <script>\n *   var uploadObj = new Uploader();\n *   uploadObj.appendTo('#upload');\n * </script>\n * ```\n */\nvar Uploader = /** @class */ (function (_super) {\n    __extends(Uploader, _super);\n    /**\n     * Triggers when change the Uploader value.\n     *\n     * @param {UploaderModel} options - Specifies the Uploader model.\n     * @param {string | HTMLInputElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function Uploader(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.initialAttr = { accept: null, multiple: false, disabled: false };\n        _this.uploadedFilesData = [];\n        _this.base64String = [];\n        _this.isForm = false;\n        _this.allTypes = false;\n        _this.pausedData = [];\n        _this.uploadMetaData = [];\n        _this.tabIndex = '0';\n        _this.btnTabIndex = '0';\n        _this.disableKeyboardNavigation = false;\n        _this.count = -1;\n        _this.actionCompleteCount = 0;\n        _this.flag = true;\n        _this.selectedFiles = [];\n        _this.uploaderName = 'UploadFiles';\n        _this.fileStreams = [];\n        _this.newFileRef = 0;\n        _this.isFirstFileOnSelection = false;\n        _this.dragCounter = 0;\n        /**\n         * Get the file item(li) which are shown in file list.\n         *\n         * @private\n         */\n        _this.fileList = [];\n        /**\n         * Get the data of files which are shown in file list.\n         *\n         * @private\n         */\n        _this.filesData = [];\n        _this.uploaderOptions = options;\n        return _this;\n    }\n    /**\n     * Calls internally if any of the property value is changed.\n     *\n     * @param {UploaderModel} newProp - Returns the dynamic property value of the component.\n     * @param {UploaderModel} oldProp - Returns the previous property value of the component.\n     * @returns {void}\n     * @private\n     */\n    Uploader.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'allowedExtensions':\n                    this.setExtensions(this.allowedExtensions);\n                    this.clearAll();\n                    break;\n                case 'enabled':\n                    this.setControlStatus();\n                    break;\n                case 'multiple':\n                    this.setMultipleSelection();\n                    break;\n                case 'enableRtl':\n                    this.setRTL();\n                    this.reRenderFileList();\n                    break;\n                case 'buttons':\n                    this.buttons.browse = isNullOrUndefined(this.buttons.browse) ? '' : this.buttons.browse;\n                    this.buttons.clear = isNullOrUndefined(this.buttons.clear) ? '' : this.buttons.clear;\n                    this.buttons.upload = isNullOrUndefined(this.buttons.upload) ? '' : this.buttons.upload;\n                    this.renderButtonTemplates();\n                    break;\n                case 'dropArea':\n                    this.unBindDropEvents();\n                    this.updateDropArea();\n                    break;\n                case 'htmlAttributes':\n                    this.updateHTMLAttrToElement();\n                    this.updateHTMLAttrToWrapper();\n                    this.checkHTMLAttributes(true);\n                    break;\n                case 'files':\n                    this.renderPreLoadFiles();\n                    break;\n                case 'directoryUpload':\n                    this.updateDirectoryAttributes();\n                    break;\n                case 'template':\n                    this.clearAll();\n                    break;\n                case 'minFileSize':\n                case 'maxFileSize':\n                case 'autoUpload':\n                    this.clearAll();\n                    break;\n                case 'sequentialUpload':\n                    this.clearAll();\n                    break;\n                case 'locale':\n                    this.l10n.setLocale(this.locale);\n                    this.setLocalizedTexts();\n                    this.preLocaleObj = getValue('currentLocale', this.l10n);\n                    break;\n                case 'cssClass':\n                    this.setCSSClass(oldProp.cssClass);\n                    break;\n            }\n        }\n    };\n    Uploader.prototype.setLocalizedTexts = function () {\n        if (isNullOrUndefined(this.template)) {\n            if (typeof (this.buttons.browse) === 'string') {\n                this.browseButton.innerText = (this.buttons.browse === 'Browse...') ?\n                    this.localizedTexts('Browse') : this.buttons.browse;\n                this.browseButton.setAttribute('title', this.browseButton.innerText);\n                if (this.uploadWrapper && !isNullOrUndefined(this.uploadWrapper.querySelector('.' + DROP_AREA))) {\n                    this.uploadWrapper.querySelector('.' + DROP_AREA).innerHTML = this.localizedTexts('dropFilesHint');\n                }\n            }\n            this.updateFileList();\n        }\n    };\n    Uploader.prototype.getKeyValue = function (val) {\n        var keyValue;\n        for (var _i = 0, _a = Object.keys(this.preLocaleObj); _i < _a.length; _i++) {\n            var key = _a[_i];\n            if (this.preLocaleObj[key] === val) {\n                keyValue = key;\n            }\n        }\n        return keyValue;\n    };\n    Uploader.prototype.updateFileList = function () {\n        var element;\n        /* istanbul ignore next */\n        if (this.fileList.length > 0 && !isNullOrUndefined(this.uploadWrapper.querySelector('.' + LIST_PARENT))) {\n            for (var i = 0; i < this.fileList.length; i++) {\n                element = this.fileList[i].querySelector('.e-file-status');\n                element.innerHTML = this.localizedTexts(this.getKeyValue(this.filesData[i].status));\n                this.filesData[i].status = this.localizedTexts(this.getKeyValue(this.filesData[i].status));\n                if (this.fileList[i].classList.contains(UPLOAD_SUCCESS)) {\n                    this.fileList[i].querySelector('.e-icons').setAttribute('title', this.localizedTexts('delete'));\n                }\n                if (this.fileList[i].querySelector('.e-file-play-btn')) {\n                    this.fileList[i].querySelector('.e-icons').setAttribute('title', this.localizedTexts('resume'));\n                }\n                if (this.fileList[i].querySelector('.e-file-remove-btn')) {\n                    this.fileList[i].querySelector('.e-icons').setAttribute('title', this.localizedTexts('remove'));\n                }\n                if (this.fileList[i].querySelector('.e-file-reload-btn')) {\n                    this.fileList[i].querySelector('.e-icons').setAttribute('title', this.localizedTexts('retry'));\n                }\n                if (!this.autoUpload) {\n                    this.uploadButton.innerText = (this.buttons.upload === 'Upload') ?\n                        this.localizedTexts('Upload') : this.buttons.upload;\n                    this.uploadButton.setAttribute('title', this.localizedTexts('Upload'));\n                    this.clearButton.innerText = (this.buttons.clear === 'Clear') ?\n                        this.localizedTexts('Clear') : this.buttons.clear;\n                    this.clearButton.setAttribute('title', this.localizedTexts('Clear'));\n                }\n            }\n        }\n    };\n    Uploader.prototype.reRenderFileList = function () {\n        if (this.listParent) {\n            detach(this.listParent);\n            this.listParent = null;\n            this.fileList = [];\n            this.createFileList(this.filesData);\n            if (this.actionButtons) {\n                this.removeActionButtons();\n                this.renderActionButtons();\n                this.checkActionButtonStatus();\n            }\n        }\n    };\n    Uploader.prototype.preRender = function () {\n        this.localeText = { Browse: 'Browse...', Clear: 'Clear', Upload: 'Upload',\n            dropFilesHint: 'Or drop files here', invalidMaxFileSize: 'File size is too large',\n            invalidMinFileSize: 'File size is too small', invalidFileType: 'File type is not allowed',\n            uploadFailedMessage: 'File failed to upload', uploadSuccessMessage: 'File uploaded successfully',\n            removedSuccessMessage: 'File removed successfully', removedFailedMessage: 'Unable to remove file', inProgress: 'Uploading',\n            readyToUploadMessage: 'Ready to upload', abort: 'Abort', remove: 'Remove', cancel: 'Cancel', delete: 'Delete file',\n            pauseUpload: 'File upload paused', pause: 'Pause', resume: 'Resume', retry: 'Retry',\n            fileUploadCancel: 'File upload canceled', invalidFileSelection: 'Invalid files selected', totalFiles: 'Total files',\n            size: 'Size'\n        };\n        this.l10n = new L10n('uploader', this.localeText, this.locale);\n        this.preLocaleObj = getValue('currentLocale', this.l10n);\n        this.formRendered();\n        this.updateHTMLAttrToElement();\n        this.checkHTMLAttributes(false);\n        var ejInstance = getValue('ej2_instances', this.element);\n        /* istanbul ignore next */\n        if (this.element.tagName === 'EJS-UPLOADER') {\n            var inputElement = this.createElement('input', { attrs: { type: 'file' } });\n            var index = 0;\n            for (index; index < this.element.attributes.length; index++) {\n                inputElement.setAttribute(this.element.attributes[index].nodeName, this.element.attributes[index].nodeValue);\n                inputElement.innerHTML = this.element.innerHTML;\n            }\n            if (!inputElement.hasAttribute('name')) {\n                inputElement.setAttribute('name', 'UploadFiles');\n            }\n            this.element.appendChild(inputElement);\n            this.element = inputElement;\n            setValue('ej2_instances', ejInstance, this.element);\n        }\n        /* istanbul ignore next */\n        if (ejInstance[0].isPureReactComponent) {\n            if (!isNullOrUndefined(ejInstance[0].props.name)) {\n                this.element.setAttribute('name', ejInstance[0].props.name);\n            }\n            else if (!isNullOrUndefined(ejInstance[0].props.id) && isNullOrUndefined(ejInstance[0].props.name)) {\n                this.element.setAttribute('name', ejInstance[0].props.id);\n            }\n            else {\n                this.element.setAttribute('name', 'UploadFiles');\n            }\n        }\n        if (isNullOrUndefined(this.element.getAttribute('name'))) {\n            this.element.setAttribute('name', this.element.getAttribute('id'));\n        }\n        if (!this.element.hasAttribute('type')) {\n            this.element.setAttribute('type', 'file');\n        }\n        this.updateDirectoryAttributes();\n        this.keyConfigs = {\n            enter: 'enter'\n        };\n        if (this.element.hasAttribute('tabindex')) {\n            this.tabIndex = this.element.getAttribute('tabindex');\n        }\n        this.browserName = Browser.info.name;\n        this.uploaderName = this.element.getAttribute('name');\n    };\n    Uploader.prototype.formRendered = function () {\n        var parentEle = closest(this.element, 'form');\n        if (!isNullOrUndefined(parentEle)) {\n            for (; parentEle && parentEle !== document.documentElement; parentEle = parentEle.parentElement) {\n                if (parentEle.tagName === 'FORM') {\n                    this.isForm = true;\n                    this.formElement = parentEle;\n                    parentEle.setAttribute('enctype', 'multipart/form-data');\n                    parentEle.setAttribute('encoding', 'multipart/form-data');\n                }\n            }\n        }\n    };\n    Uploader.prototype.getPersistData = function () {\n        return this.addOnPersist(['filesData']);\n    };\n    /**\n     * Return the module name of the component.\n     *\n     * @returns {string} Returns the component name.\n     */\n    Uploader.prototype.getModuleName = function () {\n        return 'uploader';\n    };\n    Uploader.prototype.updateDirectoryAttributes = function () {\n        if (this.directoryUpload) {\n            this.element.setAttribute('directory', 'true');\n            this.element.setAttribute('webkitdirectory', 'true');\n        }\n        else {\n            this.element.removeAttribute('directory');\n            this.element.removeAttribute('webkitdirectory');\n        }\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    Uploader.prototype.render = function () {\n        this.renderBrowseButton();\n        this.initializeUpload();\n        this.updateHTMLAttrToWrapper();\n        this.wireEvents();\n        this.setMultipleSelection();\n        this.setExtensions(this.allowedExtensions);\n        this.setRTL();\n        this.renderPreLoadFiles();\n        this.setControlStatus();\n        this.setCSSClass();\n    };\n    Uploader.prototype.renderBrowseButton = function () {\n        this.browseButton = this.createElement('button', { className: 'e-css e-btn', attrs: { 'type': 'button' } });\n        this.browseButton.setAttribute('tabindex', this.tabIndex);\n        if (typeof (this.buttons.browse) === 'string') {\n            this.browseButton.textContent = (this.buttons.browse === 'Browse...') ?\n                this.localizedTexts('Browse') : this.buttons.browse;\n            this.browseButton.setAttribute('title', this.browseButton.innerText);\n        }\n        else {\n            this.browseButton.appendChild(this.buttons.browse);\n        }\n        this.element.setAttribute('aria-label', 'Uploader');\n    };\n    Uploader.prototype.renderActionButtons = function () {\n        this.element.setAttribute('tabindex', '-1');\n        this.actionButtons = this.createElement('div', { className: ACTION_BUTTONS });\n        this.uploadButton = this.createElement('button', { className: UPLOAD_BUTTONS,\n            attrs: { 'type': 'button', 'tabindex': this.btnTabIndex } });\n        this.clearButton = this.createElement('button', { className: CLEAR_BUTTONS,\n            attrs: { 'type': 'button', 'tabindex': this.btnTabIndex } });\n        this.actionButtons.appendChild(this.clearButton);\n        this.actionButtons.appendChild(this.uploadButton);\n        this.renderButtonTemplates();\n        this.uploadWrapper.appendChild(this.actionButtons);\n        this.browseButton.blur();\n        if (!this.isPreloadFiles) {\n            this.uploadButton.focus();\n        }\n        this.wireActionButtonEvents();\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.serverActionButtonsEventBind = function (element) {\n        if (element && !this.isForm) {\n            this.browseButton.blur();\n            this.actionButtons = element;\n            this.uploadButton = this.actionButtons.querySelector('.e-file-upload-btn');\n            this.clearButton = this.actionButtons.querySelector('.e-file-clear-btn');\n            this.uploadButton.focus();\n            this.unwireActionButtonEvents();\n            this.wireActionButtonEvents();\n            this.checkActionButtonStatus();\n        }\n    };\n    Uploader.prototype.wireActionButtonEvents = function () {\n        EventHandler.add(this.uploadButton, 'click', this.uploadButtonClick, this);\n        EventHandler.add(this.clearButton, 'click', this.clearButtonClick, this);\n    };\n    Uploader.prototype.unwireActionButtonEvents = function () {\n        EventHandler.remove(this.uploadButton, 'click', this.uploadButtonClick);\n        EventHandler.remove(this.clearButton, 'click', this.clearButtonClick);\n    };\n    Uploader.prototype.removeActionButtons = function () {\n        if (this.actionButtons) {\n            this.unwireActionButtonEvents();\n            detach(this.actionButtons);\n            this.actionButtons = null;\n        }\n    };\n    Uploader.prototype.renderButtonTemplates = function () {\n        if (typeof (this.buttons.browse) === 'string') {\n            this.browseButton.textContent = (this.buttons.browse === 'Browse...') ?\n                this.localizedTexts('Browse') : this.buttons.browse;\n            this.browseButton.setAttribute('title', this.browseButton.textContent);\n        }\n        else {\n            this.browseButton.innerHTML = '';\n            this.browseButton.appendChild(this.buttons.browse);\n        }\n        if (this.uploadButton) {\n            var uploadText = isNullOrUndefined(this.buttons.upload) ? 'Upload' : this.buttons.upload;\n            this.buttons.upload = uploadText;\n            if (typeof (this.buttons.upload) === 'string') {\n                this.uploadButton.textContent = (this.buttons.upload === 'Upload') ?\n                    this.localizedTexts('Upload') : this.buttons.upload;\n                this.uploadButton.setAttribute('title', this.uploadButton.textContent);\n            }\n            else {\n                this.uploadButton.innerHTML = '';\n                this.uploadButton.appendChild(this.buttons.upload);\n            }\n        }\n        if (this.clearButton) {\n            var clearText = isNullOrUndefined(this.buttons.clear) ? 'Clear' : this.buttons.clear;\n            this.buttons.clear = clearText;\n            if (typeof (this.buttons.clear) === 'string') {\n                this.clearButton.textContent = (this.buttons.clear === 'Clear') ?\n                    this.localizedTexts('Clear') : this.buttons.clear;\n                this.clearButton.setAttribute('title', this.clearButton.textContent);\n            }\n            else {\n                this.clearButton.innerHTML = '';\n                this.clearButton.appendChild(this.buttons.clear);\n            }\n        }\n    };\n    Uploader.prototype.initializeUpload = function () {\n        this.element.setAttribute('tabindex', '-1');\n        var inputWrapper = this.createElement('span', { className: INPUT_WRAPPER });\n        this.element.parentElement.insertBefore(inputWrapper, this.element);\n        this.dropAreaWrapper = this.createElement('div', { className: DROP_WRAPPER });\n        this.element.parentElement.insertBefore(this.dropAreaWrapper, this.element);\n        inputWrapper.appendChild(this.element);\n        this.dropAreaWrapper.appendChild(this.browseButton);\n        this.dropAreaWrapper.appendChild(inputWrapper);\n        this.uploadWrapper = this.createElement('div', { className: CONTROL_WRAPPER });\n        this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper, this.dropAreaWrapper);\n        this.uploadWrapper.appendChild(this.dropAreaWrapper);\n        this.setDropArea();\n    };\n    Uploader.prototype.renderPreLoadFiles = function () {\n        if (this.files.length) {\n            if (this.enablePersistence && this.filesData.length) {\n                this.createFileList(this.filesData);\n                return;\n            }\n            if (isNullOrUndefined(this.files[0].size)) {\n                return;\n            }\n            this.isPreloadFiles = true;\n            var files = [].slice.call(this.files);\n            var filesData = [];\n            if (!this.multiple) {\n                this.clearData();\n                files = [files[0]];\n            }\n            for (var _i = 0, files_1 = files; _i < files_1.length; _i++) {\n                var data = files_1[_i];\n                var fileData = {\n                    name: data.name + '.' + data.type.split('.')[data.type.split('.').length - 1],\n                    rawFile: '',\n                    size: data.size,\n                    status: this.localizedTexts('uploadSuccessMessage'),\n                    type: data.type,\n                    validationMessages: { minSize: '', maxSize: '' },\n                    statusCode: '2'\n                };\n                filesData.push(fileData);\n                this.filesData.push(fileData);\n            }\n            this.createFileList(filesData);\n            if (!this.autoUpload && this.listParent && !this.actionButtons && (!this.isForm || this.allowUpload()) && this.showFileList) {\n                this.renderActionButtons();\n            }\n            this.checkActionButtonStatus();\n            if (this.sequentialUpload) {\n                this.count = this.filesData.length - 1;\n            }\n            this.isPreloadFiles = false;\n        }\n    };\n    Uploader.prototype.checkActionButtonStatus = function () {\n        if (this.actionButtons) {\n            var length_1 = this.uploadWrapper.querySelectorAll('.' + VALIDATION_FAILS).length +\n                this.uploadWrapper.querySelectorAll('.e-upload-fails:not(.e-upload-progress)').length +\n                this.uploadWrapper.querySelectorAll('span.' + UPLOAD_SUCCESS).length +\n                this.uploadWrapper.querySelectorAll('span.' + UPLOAD_INPROGRESS).length;\n            if (length_1 > 0 && length_1 === this.uploadWrapper.querySelectorAll('li').length) {\n                this.uploadButton.setAttribute('disabled', 'disabled');\n            }\n            else {\n                this.uploadButton.removeAttribute('disabled');\n            }\n        }\n    };\n    Uploader.prototype.setDropArea = function () {\n        var dropTextArea = this.dropAreaWrapper.querySelector('.e-file-drop');\n        if (this.dropArea) {\n            this.dropZoneElement = (typeof (this.dropArea) !== 'string') ? this.dropArea :\n                select(this.dropArea, document);\n            var element = this.element;\n            var enableDropText = false;\n            while (element.parentNode) {\n                element = element.parentNode;\n                if (element === this.dropZoneElement) {\n                    enableDropText = true;\n                    if (!dropTextArea) {\n                        this.createDropTextHint();\n                    }\n                    else {\n                        dropTextArea.innerHTML = this.localizedTexts('dropFilesHint');\n                    }\n                }\n            }\n            if (!enableDropText && dropTextArea) {\n                remove(dropTextArea);\n            }\n        }\n        else if (!isNullOrUndefined(this.uploaderOptions) && this.uploaderOptions.dropArea === undefined) {\n            this.createDropTextHint();\n            this.dropZoneElement = this.uploadWrapper;\n            this.setProperties({ dropArea: this.uploadWrapper }, true);\n        }\n        this.bindDropEvents();\n    };\n    Uploader.prototype.updateDropArea = function () {\n        if (this.dropArea) {\n            this.setDropArea();\n        }\n        else {\n            this.dropZoneElement = null;\n            var dropTextArea = this.dropAreaWrapper.querySelector('.e-file-drop');\n            if (dropTextArea) {\n                remove(dropTextArea);\n            }\n        }\n    };\n    Uploader.prototype.createDropTextHint = function () {\n        var fileDropArea = this.createElement('span', { className: DROP_AREA });\n        fileDropArea.innerHTML = this.localizedTexts('dropFilesHint');\n        this.dropAreaWrapper.appendChild(fileDropArea);\n    };\n    Uploader.prototype.updateHTMLAttrToElement = function () {\n        if (!isNullOrUndefined(this.htmlAttributes)) {\n            for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n                var pro = _a[_i];\n                if (wrapperAttr.indexOf(pro) < 0) {\n                    this.element.setAttribute(pro, this.htmlAttributes[pro]);\n                }\n            }\n        }\n    };\n    Uploader.prototype.updateHTMLAttrToWrapper = function () {\n        if (!isNullOrUndefined(this.htmlAttributes)) {\n            for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n                var pro = _a[_i];\n                if (wrapperAttr.indexOf(pro) > -1) {\n                    if (pro === 'class') {\n                        var updatedClassValues = (this.htmlAttributes[pro].replace(/\\s+/g, ' ')).trim();\n                        if (updatedClassValues !== '') {\n                            addClass([this.uploadWrapper], updatedClassValues.split(' '));\n                        }\n                    }\n                    else if (pro === 'style') {\n                        var uploadStyle = this.uploadWrapper.getAttribute(pro);\n                        uploadStyle = !isNullOrUndefined(uploadStyle) ? (uploadStyle + this.htmlAttributes[pro]) :\n                            this.htmlAttributes[pro];\n                        this.uploadWrapper.setAttribute(pro, uploadStyle);\n                    }\n                    else {\n                        this.uploadWrapper.setAttribute(pro, this.htmlAttributes[pro]);\n                    }\n                }\n            }\n        }\n    };\n    Uploader.prototype.setMultipleSelection = function () {\n        if (this.multiple && !this.element.hasAttribute('multiple')) {\n            var newAttr = document.createAttribute('multiple');\n            newAttr.value = 'multiple';\n            this.element.setAttributeNode(newAttr);\n        }\n        else if (!this.multiple) {\n            this.element.removeAttribute('multiple');\n        }\n    };\n    Uploader.prototype.checkAutoUpload = function (fileData) {\n        if (this.autoUpload) {\n            if (this.sequentialUpload) {\n                /* istanbul ignore next */\n                this.sequenceUpload(fileData);\n            }\n            else {\n                this.upload(fileData);\n            }\n            this.removeActionButtons();\n        }\n        else if (!this.actionButtons) {\n            this.renderActionButtons();\n        }\n        this.checkActionButtonStatus();\n    };\n    Uploader.prototype.sequenceUpload = function (fileData) {\n        if (this.filesData.length - fileData.length === 0 ||\n            this.filesData[(this.filesData.length - fileData.length - 1)].statusCode !== '1') {\n            ++this.count;\n            var isFileListCreated = this.showFileList ? false : true;\n            if (typeof this.filesData[this.count] === 'object') {\n                this.isFirstFileOnSelection = false;\n                this.upload(this.filesData[this.count], isFileListCreated);\n                if (this.filesData[this.count].statusCode === '0') {\n                    this.sequenceUpload(fileData);\n                }\n            }\n            else {\n                --this.count;\n            }\n        }\n    };\n    Uploader.prototype.setCSSClass = function (oldCSSClass) {\n        var updatedCssClassValue = this.cssClass;\n        if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n            updatedCssClassValue = (this.cssClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(this.cssClass) && updatedCssClassValue !== '') {\n            addClass([this.uploadWrapper], updatedCssClassValue.split(updatedCssClassValue.indexOf(',') > -1 ? ',' : ' '));\n        }\n        var updatedOldCssClass = oldCSSClass;\n        if (!isNullOrUndefined(oldCSSClass)) {\n            updatedOldCssClass = (oldCSSClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(oldCSSClass) && updatedOldCssClass !== '') {\n            removeClass([this.uploadWrapper], updatedOldCssClass.split(' '));\n        }\n    };\n    Uploader.prototype.wireEvents = function () {\n        EventHandler.add(this.browseButton, 'click', this.browseButtonClick, this);\n        EventHandler.add(this.element, 'change', this.onSelectFiles, this);\n        EventHandler.add(document, 'click', this.removeFocus, this);\n        this.keyboardModule = new KeyboardEvents(this.uploadWrapper, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        if (this.isForm) {\n            EventHandler.add(this.formElement, 'reset', this.resetForm, this);\n        }\n    };\n    Uploader.prototype.unWireEvents = function () {\n        EventHandler.remove(this.browseButton, 'click', this.browseButtonClick);\n        EventHandler.remove(this.element, 'change', this.onSelectFiles);\n        EventHandler.remove(document, 'click', this.removeFocus);\n        if (this.isForm) {\n            EventHandler.remove(this.formElement, 'reset', this.resetForm);\n        }\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n        }\n    };\n    Uploader.prototype.resetForm = function () {\n        this.clearAll();\n    };\n    Uploader.prototype.keyActionHandler = function (e) {\n        var targetElement = e.target;\n        switch (e.action) {\n            case 'enter':\n                if (e.target === this.clearButton) {\n                    this.clearButtonClick();\n                }\n                else if (e.target === this.uploadButton) {\n                    this.uploadButtonClick();\n                }\n                else if (e.target === this.browseButton) {\n                    this.browseButtonClick();\n                }\n                else if (targetElement.classList.contains(PAUSE_UPLOAD)) {\n                    var metaData = this.getCurrentMetaData(null, e);\n                    metaData.file.statusCode = '4';\n                    metaData.file.status = this.localizedTexts('pauseUpload');\n                    this.abortUpload(metaData, false);\n                }\n                else if (targetElement.classList.contains(RESUME_UPLOAD)) {\n                    this.resumeUpload(this.getCurrentMetaData(null, e), e);\n                }\n                else if (targetElement.classList.contains(RETRY_ICON)) {\n                    var metaData = this.getCurrentMetaData(null, e);\n                    if (!isNullOrUndefined(metaData)) {\n                        metaData.file.statusCode = '1';\n                        metaData.file.status = this.localizedTexts('readyToUploadMessage');\n                        this.chunkUpload(metaData.file);\n                    }\n                    else {\n                        var target = e.target.parentElement;\n                        var fileData = this.filesData[this.fileList.indexOf(target)];\n                        this.retry(fileData);\n                    }\n                }\n                else {\n                    this.removeFiles(e);\n                    if (!targetElement.classList.contains(ABORT_ICON)) {\n                        this.browseButton.focus();\n                    }\n                }\n                e.preventDefault();\n                e.stopPropagation();\n                break;\n        }\n    };\n    Uploader.prototype.getCurrentMetaData = function (fileInfo, e) {\n        var fileData;\n        var targetMetaData;\n        if (isNullOrUndefined(fileInfo)) {\n            var target = e.target.parentElement;\n            fileData = this.filesData[this.fileList.indexOf(target)];\n        }\n        else {\n            fileData = fileInfo;\n        }\n        for (var i = 0; i < this.uploadMetaData.length; i++) {\n            if (this.uploadMetaData[i].file.name === fileData.name) {\n                targetMetaData = this.uploadMetaData[i];\n            }\n        }\n        return targetMetaData;\n    };\n    Uploader.prototype.removeFocus = function () {\n        if (this.uploadWrapper && this.listParent && this.listParent.querySelector('.' + ICON_FOCUSED)) {\n            document.activeElement.blur();\n            this.listParent.querySelector('.' + ICON_FOCUSED).classList.remove(ICON_FOCUSED);\n        }\n    };\n    Uploader.prototype.browseButtonClick = function () {\n        this.element.click();\n    };\n    Uploader.prototype.uploadButtonClick = function () {\n        if (this.sequentialUpload) {\n            this.sequenceUpload(this.filesData);\n        }\n        else {\n            this.upload(this.filesData);\n        }\n    };\n    Uploader.prototype.clearButtonClick = function () {\n        this.clearAll();\n        /* istanbul ignore next */\n        if (this.sequentialUpload) {\n            this.count = -1;\n        }\n        this.actionCompleteCount = 0;\n    };\n    Uploader.prototype.bindDropEvents = function () {\n        if (this.dropZoneElement) {\n            EventHandler.add(this.dropZoneElement, 'drop', this.dropElement, this);\n            EventHandler.add(this.dropZoneElement, 'dragover', this.dragHover, this);\n            EventHandler.add(this.dropZoneElement, 'dragleave', this.onDragLeave, this);\n            EventHandler.add(this.dropZoneElement, 'paste', this.onPasteFile, this);\n            EventHandler.add(this.dropZoneElement, 'dragenter', this.onDragEnter, this);\n        }\n    };\n    Uploader.prototype.unBindDropEvents = function () {\n        if (this.dropZoneElement) {\n            EventHandler.remove(this.dropZoneElement, 'drop', this.dropElement);\n            EventHandler.remove(this.dropZoneElement, 'dragover', this.dragHover);\n            EventHandler.remove(this.dropZoneElement, 'dragleave', this.onDragLeave);\n            EventHandler.remove(this.dropZoneElement, 'dragenter', this.onDragEnter);\n        }\n    };\n    Uploader.prototype.onDragEnter = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        this.dropZoneElement.classList.add(DRAG_HOVER);\n        this.dragCounter = this.dragCounter + 1;\n        e.preventDefault();\n        e.stopPropagation();\n    };\n    Uploader.prototype.onDragLeave = function () {\n        if (!this.enabled) {\n            return;\n        }\n        this.dragCounter = this.dragCounter - 1;\n        if (!this.dragCounter) {\n            this.dropZoneElement.classList.remove(DRAG_HOVER);\n        }\n    };\n    Uploader.prototype.dragHover = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.dropEffect !== 'Default') {\n            e.dataTransfer.dropEffect = this.dropEffect.toLowerCase();\n        }\n        e.preventDefault();\n        e.stopPropagation();\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.dropElement = function (e) {\n        this.dragCounter = 0;\n        this.dropZoneElement.classList.remove(DRAG_HOVER);\n        this.onSelectFiles(e);\n        e.preventDefault();\n        e.stopPropagation();\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.onPasteFile = function (event) {\n        var item = event.clipboardData.items;\n        if (event.type == 'paste' && this.browserName !== 'msie' && this.browserName !== 'edge' && this.browserName !== 'safari') {\n            this.element.files = event.clipboardData.files;\n        }\n        if (item.length !== 1) {\n            return;\n        }\n        var pasteFile = [].slice.call(item)[0];\n        if ((pasteFile.kind === 'file') && pasteFile.type.match('^image/')) {\n            this.renderSelectedFiles(event, [pasteFile.getAsFile()], false, true);\n        }\n    };\n    Uploader.prototype.getSelectedFiles = function (index) {\n        var data = [];\n        var liElement = this.fileList[index];\n        var allFiles = this.getFilesData();\n        var nameElements = +liElement.getAttribute('data-files-count');\n        var startIndex = 0;\n        for (var i = 0; i < index; i++) {\n            startIndex += (+this.fileList[i].getAttribute('data-files-count'));\n        }\n        for (var j = startIndex; j < (startIndex + nameElements); j++) {\n            data.push(allFiles[j]);\n        }\n        return data;\n    };\n    Uploader.prototype.removeFiles = function (args) {\n        if (!this.enabled) {\n            return;\n        }\n        var selectedElement = args.target.parentElement;\n        var index = this.fileList.indexOf(selectedElement);\n        var liElement = this.fileList[index];\n        var formUpload = this.isFormUpload();\n        var fileData = formUpload ? this.getSelectedFiles(index) : this.getFilesInArray(this.filesData[index]);\n        if (isNullOrUndefined(fileData)) {\n            return;\n        }\n        if (args.target.classList.contains(ABORT_ICON) && !formUpload) {\n            fileData[0].statusCode = '5';\n            if (!isNullOrUndefined(liElement)) {\n                var spinnerTarget = liElement.querySelector('.' + ABORT_ICON);\n                createSpinner({ target: spinnerTarget, width: '20px' });\n                showSpinner(spinnerTarget);\n            }\n            if (this.sequentialUpload) {\n                /* istanbul ignore next */\n                this.uploadSequential();\n            }\n            if (!(liElement.classList.contains(RESTRICT_RETRY))) {\n                this.checkActionComplete(true);\n            }\n        }\n        else if (!closest(args.target, '.' + SPINNER_PANE)) {\n            this.remove(fileData, false, false, true, args);\n        }\n        this.element.value = '';\n        this.checkActionButtonStatus();\n    };\n    Uploader.prototype.removeFilesData = function (file, customTemplate) {\n        var index;\n        if (customTemplate) {\n            if (!this.showFileList) {\n                index = this.filesData.indexOf(file);\n                this.filesData.splice(index, 1);\n            }\n            return;\n        }\n        var selectedElement = this.getLiElement(file);\n        if (isNullOrUndefined(selectedElement)) {\n            return;\n        }\n        detach(selectedElement);\n        index = this.fileList.indexOf(selectedElement);\n        this.fileList.splice(index, 1);\n        this.filesData.splice(index, 1);\n        if (this.fileList.length === 0 && !isNullOrUndefined(this.listParent)) {\n            detach(this.listParent);\n            this.listParent = null;\n            this.removeActionButtons();\n        }\n        if (this.sequentialUpload) {\n            /* istanbul ignore next */\n            if (index <= this.count) {\n                --this.count;\n            }\n        }\n    };\n    Uploader.prototype.removeUploadedFile = function (file, eventArgs, removeDirectly, custom) {\n        var _this = this;\n        var selectedFiles = file;\n        var ajax = new Ajax(this.asyncSettings.removeUrl, 'POST', true, null);\n        ajax.emitError = false;\n        var formData = new FormData();\n        ajax.beforeSend = function (e) {\n            eventArgs.currentRequest = ajax.httpRequest;\n            if (!removeDirectly) {\n                _this.trigger('removing', eventArgs, function (eventArgs) {\n                    if (eventArgs.cancel) {\n                        e.cancel = true;\n                    }\n                    else {\n                        _this.removingEventCallback(eventArgs, formData, selectedFiles, file);\n                    }\n                });\n            }\n            else {\n                _this.removingEventCallback(eventArgs, formData, selectedFiles, file);\n            }\n        };\n        ajax.onLoad = function (e) {\n            _this.removeCompleted(e, selectedFiles, custom);\n            return {};\n        };\n        /* istanbul ignore next */\n        ajax.onError = function (e) {\n            _this.removeFailed(e, selectedFiles, custom);\n            return {};\n        };\n        ajax.send(formData);\n    };\n    Uploader.prototype.removingEventCallback = function (eventArgs, formData, selectedFiles, file) {\n        /* istanbul ignore next */\n        var name = this.element.getAttribute('name');\n        var liElement = this.getLiElement(file);\n        if (!isNullOrUndefined(liElement) && (!isNullOrUndefined(liElement.querySelector('.' + DELETE_ICON)) ||\n            !isNullOrUndefined(liElement.querySelector('.' + REMOVE_ICON)))) {\n            var spinnerTarget = liElement.querySelector('.' + DELETE_ICON) ?\n                liElement.querySelector('.' + DELETE_ICON) :\n                liElement.querySelector('.' + REMOVE_ICON);\n            createSpinner({ target: spinnerTarget, width: '20px' });\n            showSpinner(spinnerTarget);\n        }\n        if (eventArgs.postRawFile && !isNullOrUndefined(selectedFiles.rawFile) && selectedFiles.rawFile !== '') {\n            formData.append(name, selectedFiles.rawFile, selectedFiles.name);\n        }\n        else {\n            formData.append(name, selectedFiles.name);\n        }\n        this.updateFormData(formData, eventArgs.customFormData);\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.updateFormData = function (formData, customData) {\n        if (customData.length > 0 && customData[0]) {\n            var _loop_1 = function (i) {\n                var data = customData[i];\n                // eslint-disable-next-line @typescript-eslint/tslint/config\n                var value = Object.keys(data).map(function (e) {\n                    return data[e];\n                });\n                formData.append(Object.keys(data)[0], value);\n            };\n            for (var i = 0; i < customData.length; i++) {\n                _loop_1(i);\n            }\n        }\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.updateCustomheader = function (request, currentRequest) {\n        if (currentRequest.length > 0 && currentRequest[0]) {\n            var _loop_2 = function (i) {\n                var data = currentRequest[i];\n                // eslint-disable-next-line @typescript-eslint/tslint/config\n                var value = Object.keys(data).map(function (e) {\n                    return data[e];\n                });\n                request.setRequestHeader(Object.keys(data)[0], value);\n            };\n            for (var i = 0; i < currentRequest.length; i++) {\n                _loop_2(i);\n            }\n        }\n    };\n    Uploader.prototype.removeCompleted = function (e, files, customTemplate) {\n        var response = e && e.currentTarget ? this.getResponse(e) : null;\n        var status = e.target;\n        if (status.readyState === 4 && status.status >= 200 && status.status <= 299) {\n            var args = {\n                e: e, response: response, operation: 'remove', file: this.updateStatus(files, this.localizedTexts('removedSuccessMessage'), '2')\n            };\n            this.trigger('success', args);\n            this.removeFilesData(files, customTemplate);\n            var index = this.uploadedFilesData.indexOf(files);\n            this.uploadedFilesData.splice(index, 1);\n            this.trigger('change', { files: this.uploadedFilesData });\n        }\n        else {\n            this.removeFailed(e, files, customTemplate);\n        }\n    };\n    Uploader.prototype.removeFailed = function (e, files, customTemplate) {\n        var response = e && e.currentTarget ? this.getResponse(e) : null;\n        var args = {\n            e: e, response: response, operation: 'remove', file: this.updateStatus(files, this.localizedTexts('removedFailedMessage'), '0')\n        };\n        if (!customTemplate) {\n            var index = this.filesData.indexOf(files);\n            var rootElement = this.fileList[index];\n            if (rootElement) {\n                rootElement.classList.remove(UPLOAD_SUCCESS);\n                rootElement.classList.add(UPLOAD_FAILED);\n                var statusElement = rootElement.querySelector('.' + STATUS);\n                if (statusElement) {\n                    statusElement.classList.remove(UPLOAD_SUCCESS);\n                    statusElement.classList.add(UPLOAD_FAILED);\n                }\n            }\n            this.checkActionButtonStatus();\n        }\n        this.trigger('failure', args);\n        var liElement = this.getLiElement(files);\n        /* istanbul ignore next */\n        if (!isNullOrUndefined(liElement) && !isNullOrUndefined(liElement.querySelector('.' + DELETE_ICON))) {\n            var spinnerTarget = liElement.querySelector('.' + DELETE_ICON);\n            hideSpinner(spinnerTarget);\n            detach(liElement.querySelector('.e-spinner-pane'));\n        }\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.getFilesFromFolder = function (event) {\n        this.filesEntries = [];\n        var items = this.multiple ?\n            event.dataTransfer.items : [event.dataTransfer.items[0]];\n        var validDirectoryUpload = this.checkDirectoryUpload(items);\n        if (!validDirectoryUpload) {\n            return;\n        }\n        var _loop_3 = function (i) {\n            var item = items[i].webkitGetAsEntry();\n            if (item.isFile) {\n                var files_2 = [];\n                (item).file(function (fileObj) {\n                    var path = item.fullPath;\n                    files_2.push({ 'path': path, 'file': fileObj });\n                });\n                this_1.renderSelectedFiles(event, files_2, true);\n            }\n            else if (item.isDirectory) {\n                this_1.traverseFileTree(item, event);\n            }\n        };\n        var this_1 = this;\n        for (var i = 0; i < items.length; i++) {\n            _loop_3(i);\n        }\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.checkDirectoryUpload = function (items) {\n        for (var i = 0; items && i < items.length; i++) {\n            var item = items[i].webkitGetAsEntry();\n            if (item.isDirectory) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n    /* istanbul ignore next */\n    Uploader.prototype.traverseFileTree = function (item, event) {\n        /* eslint-enable @typescript-eslint/explicit-module-boundary-types */\n        if (item.isFile) {\n            this.filesEntries.push(item);\n        }\n        else if (item.isDirectory) {\n            var directoryReader = item.createReader();\n            this.readFileFromDirectory(directoryReader, event);\n        }\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.readFileFromDirectory = function (directoryReader, event) {\n        var _this = this;\n        directoryReader.readEntries(function (entries) {\n            for (var i = 0; i < entries.length; i++) {\n                _this.traverseFileTree(entries[i], event);\n            }\n            _this.pushFilesEntries(event);\n            if (entries.length) {\n                _this.readFileFromDirectory(directoryReader);\n            }\n        });\n    };\n    Uploader.prototype.pushFilesEntries = function (event) {\n        var _this = this;\n        var files = [];\n        var _loop_4 = function (i) {\n            this_2.filesEntries[i].file(function (fileObj) {\n                if (_this.filesEntries.length) {\n                    var path = _this.filesEntries[i].fullPath;\n                    files.push({ 'path': path, 'file': fileObj });\n                    if (i === _this.filesEntries.length - 1) {\n                        _this.filesEntries = [];\n                        _this.renderSelectedFiles(event, files, true);\n                    }\n                }\n            });\n        };\n        var this_2 = this;\n        for (var i = 0; i < this.filesEntries.length; i++) {\n            _loop_4(i);\n        }\n    };\n    Uploader.prototype.onSelectFiles = function (args) {\n        if (!this.enabled) {\n            return;\n        }\n        var targetFiles;\n        /* istanbul ignore next */\n        if (args.type === 'drop') {\n            if (this.directoryUpload) {\n                this.getFilesFromFolder(args);\n            }\n            else {\n                var files = this.sortFilesList = args.dataTransfer.files;\n                if (this.browserName !== 'msie' && this.browserName !== 'edge' && this.browserName !== 'safari') {\n                    this.element.files = files;\n                }\n                if (files.length > 0) {\n                    targetFiles = this.multiple ? this.sortFileList(files) : [files[0]];\n                    this.renderSelectedFiles(args, targetFiles);\n                }\n            }\n        }\n        else {\n            targetFiles = [].slice.call(args.target.files);\n            this.renderSelectedFiles(args, targetFiles);\n        }\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.getBase64 = function (file) {\n        return new Promise(function (resolve, reject) {\n            var fileReader = new FileReader();\n            fileReader.readAsDataURL(file);\n            fileReader.onload = function () { return resolve(fileReader.result); };\n            fileReader.onerror = function (error) { return reject(error); };\n        });\n    };\n    /* istanbul ignore next */\n    /* tslint:ignore */\n    Uploader.prototype.renderSelectedFiles = function (args, targetFiles, directory, paste) {\n        var _this = this;\n        this.base64String = [];\n        var eventArgs = {\n            event: args,\n            cancel: false,\n            filesData: [],\n            isModified: false,\n            modifiedFilesData: [],\n            progressInterval: '',\n            isCanceled: false,\n            currentRequest: null,\n            customFormData: null\n        };\n        /* istanbul ignore next */\n        if (targetFiles.length < 1) {\n            eventArgs.isCanceled = true;\n            this.trigger('selected', eventArgs);\n            return;\n        }\n        this.flag = true;\n        var fileData = [];\n        if (!this.multiple) {\n            this.clearData(true);\n            targetFiles = [targetFiles[0]];\n        }\n        for (var i = 0; i < targetFiles.length; i++) {\n            var file = directory ? targetFiles[i].file : targetFiles[i];\n            this.updateInitialFileDetails(args, targetFiles, file, i, fileData, directory, paste);\n        }\n        eventArgs.filesData = fileData;\n        if (this.allowedExtensions.indexOf('*') > -1) {\n            this.allTypes = true;\n        }\n        if (!this.allTypes) {\n            fileData = this.checkExtension(fileData);\n        }\n        this.trigger('selected', eventArgs, function (eventArgs) {\n            _this._internalRenderSelect(eventArgs, fileData);\n        });\n    };\n    Uploader.prototype.updateInitialFileDetails = function (args, \n    // eslint-disable-next-line @typescript-eslint/indent\n    targetFiles, file, i, fileData, directory, paste) {\n        var fileName = directory ? targetFiles[i].path.substring(1, targetFiles[i].path.length) : paste ?\n            getUniqueID(file.name.substring(0, file.name.lastIndexOf('.'))) + '.' + this.getFileType(file.name) :\n            this.directoryUpload ? targetFiles[i].webkitRelativePath : file.name;\n        var fileDetails = {\n            name: fileName,\n            rawFile: file,\n            size: file.size,\n            status: this.localizedTexts('readyToUploadMessage'),\n            type: this.getFileType(file.name),\n            validationMessages: this.validatedFileSize(file.size),\n            statusCode: '1',\n            id: getUniqueID(file.name.substring(0, file.name.lastIndexOf('.'))) + '.' + this.getFileType(file.name)\n        };\n        /* istanbul ignore next */\n        if (paste) {\n            fileDetails.fileSource = 'paste';\n        }\n        fileDetails.status = fileDetails.validationMessages.minSize !== '' ? this.localizedTexts('invalidMinFileSize') :\n            fileDetails.validationMessages.maxSize !== '' ? this.localizedTexts('invalidMaxFileSize') : fileDetails.status;\n        if (fileDetails.validationMessages.minSize !== '' || fileDetails.validationMessages.maxSize !== '') {\n            fileDetails.statusCode = '0';\n        }\n        fileData.push(fileDetails);\n    };\n    Uploader.prototype._internalRenderSelect = function (eventArgs, fileData) {\n        if (!eventArgs.cancel) {\n            /* istanbul ignore next */\n            this.selectedFiles = this.selectedFiles.concat(fileData);\n            this.btnTabIndex = this.disableKeyboardNavigation ? '-1' : '0';\n            if (this.showFileList) {\n                if (eventArgs.isModified && eventArgs.modifiedFilesData.length > 0) {\n                    for (var j = 0; j < eventArgs.modifiedFilesData.length; j++) {\n                        for (var k = 0; k < fileData.length; k++) {\n                            if (eventArgs.modifiedFilesData[j].id === fileData[k].id) {\n                                eventArgs.modifiedFilesData[j].rawFile = fileData[k].rawFile;\n                            }\n                        }\n                    }\n                    var dataFiles = this.allTypes ? eventArgs.modifiedFilesData :\n                        this.checkExtension(eventArgs.modifiedFilesData);\n                    this.updateSortedFileList(dataFiles);\n                    this.filesData = dataFiles;\n                    if (!this.isForm || this.allowUpload()) {\n                        this.checkAutoUpload(dataFiles);\n                    }\n                }\n                else {\n                    this.createFileList(fileData, true);\n                    this.filesData = this.filesData.concat(fileData);\n                    if (!this.isForm || this.allowUpload()) {\n                        this.checkAutoUpload(fileData);\n                    }\n                }\n                if (!isNullOrUndefined(eventArgs.progressInterval) && eventArgs.progressInterval !== '') {\n                    this.progressInterval = eventArgs.progressInterval;\n                }\n            }\n            else {\n                this.filesData = this.filesData.concat(fileData);\n                if (this.autoUpload) {\n                    this.upload(this.filesData, true);\n                }\n            }\n            this.raiseActionComplete();\n            this.isFirstFileOnSelection = true;\n        }\n    };\n    Uploader.prototype.allowUpload = function () {\n        var allowFormUpload = false;\n        if (this.isForm && (!isNullOrUndefined(this.asyncSettings.saveUrl) && this.asyncSettings.saveUrl !== '')) {\n            allowFormUpload = true;\n        }\n        return allowFormUpload;\n    };\n    Uploader.prototype.isFormUpload = function () {\n        var isFormUpload = false;\n        if (this.isForm && ((isNullOrUndefined(this.asyncSettings.saveUrl) || this.asyncSettings.saveUrl === '')\n            && (isNullOrUndefined(this.asyncSettings.removeUrl) || this.asyncSettings.removeUrl === ''))) {\n            isFormUpload = true;\n        }\n        return isFormUpload;\n    };\n    Uploader.prototype.clearData = function (singleUpload) {\n        if (!isNullOrUndefined(this.listParent)) {\n            detach(this.listParent);\n            this.listParent = null;\n        }\n        if (this.browserName !== 'msie' && !singleUpload) {\n            this.element.value = '';\n        }\n        this.fileList = [];\n        this.filesData = [];\n        this.removeActionButtons();\n    };\n    Uploader.prototype.updateSortedFileList = function (filesData) {\n        var previousListClone = this.createElement('div', { id: 'clonewrapper' });\n        var added = -1;\n        var removedList;\n        if (this.listParent) {\n            for (var i = 0; i < this.listParent.querySelectorAll('li').length; i++) {\n                var liElement = this.listParent.querySelectorAll('li')[i];\n                previousListClone.appendChild(liElement.cloneNode(true));\n            }\n            removedList = this.listParent.querySelectorAll('li');\n            for (var _i = 0, removedList_1 = removedList; _i < removedList_1.length; _i++) {\n                var item = removedList_1[_i];\n                detach(item);\n            }\n            this.removeActionButtons();\n            var oldList = [].slice.call(previousListClone.childNodes);\n            detach(this.listParent);\n            this.listParent = null;\n            this.fileList = [];\n            this.createParentUL();\n            for (var index = 0; index < filesData.length; index++) {\n                for (var j = 0; j < this.filesData.length; j++) {\n                    if (this.filesData[j].name === filesData[index].name) {\n                        this.listParent.appendChild(oldList[j]);\n                        EventHandler.add(oldList[j].querySelector('.e-icons'), 'click', this.removeFiles, this);\n                        this.fileList.push(oldList[j]);\n                        added = index;\n                    }\n                }\n                if (added !== index) {\n                    this.createFileList([filesData[index]]);\n                }\n            }\n        }\n        else {\n            this.createFileList(filesData);\n        }\n    };\n    Uploader.prototype.isBlank = function (str) {\n        return (!str || /^\\s*$/.test(str));\n    };\n    Uploader.prototype.checkExtension = function (files) {\n        var dropFiles = files;\n        if (!this.isBlank(this.allowedExtensions)) {\n            var allowedExtensions = [];\n            var extensions = this.allowedExtensions.split(',');\n            for (var _i = 0, extensions_1 = extensions; _i < extensions_1.length; _i++) {\n                var extension = extensions_1[_i];\n                allowedExtensions.push(extension.trim().toLocaleLowerCase());\n            }\n            for (var i = 0; i < files.length; i++) {\n                if (allowedExtensions.indexOf(('.' + files[i].type).toLocaleLowerCase()) === -1) {\n                    files[i].status = this.localizedTexts('invalidFileType');\n                    files[i].statusCode = '0';\n                }\n            }\n        }\n        return dropFiles;\n    };\n    Uploader.prototype.validatedFileSize = function (fileSize) {\n        var minSizeError = '';\n        var maxSizeError = '';\n        if (fileSize < this.minFileSize) {\n            minSizeError = this.localizedTexts('invalidMinFileSize');\n        }\n        else if (fileSize > this.maxFileSize) {\n            maxSizeError = this.localizedTexts('invalidMaxFileSize');\n        }\n        else {\n            minSizeError = '';\n            maxSizeError = '';\n        }\n        var errorMessage = { minSize: minSizeError, maxSize: maxSizeError };\n        return errorMessage;\n    };\n    Uploader.prototype.isPreLoadFile = function (fileData) {\n        var isPreload = false;\n        for (var i = 0; i < this.files.length; i++) {\n            if (this.files[i].name === fileData.name.slice(0, fileData.name.lastIndexOf('.')) && this.files[i].type === fileData.type) {\n                isPreload = true;\n            }\n        }\n        return isPreload;\n    };\n    Uploader.prototype.createCustomfileList = function (fileData) {\n        this.createParentUL();\n        for (var _i = 0, fileData_1 = fileData; _i < fileData_1.length; _i++) {\n            var listItem = fileData_1[_i];\n            var listElement = this.createElement('li', { className: FILE, attrs: { 'data-file-name': listItem.name } });\n            this.uploadTemplateFn = this.templateComplier(this.template);\n            var liTempCompiler = this.uploadTemplateFn(listItem, this, 'template', this.element.id + 'Template', this.isStringTemplate, null, listElement);\n            if (liTempCompiler) {\n                var fromElements = [].slice.call(liTempCompiler);\n                append(fromElements, listElement);\n            }\n            var index = fileData.indexOf(listItem);\n            var eventArgs = {\n                element: listElement,\n                fileInfo: listItem,\n                index: index,\n                isPreload: this.isPreLoadFile(listItem)\n            };\n            var eventsArgs = {\n                element: listElement,\n                fileInfo: listItem,\n                index: index,\n                isPreload: this.isPreLoadFile(listItem)\n            };\n            this.trigger('rendering', eventArgs);\n            this.trigger('fileListRendering', eventsArgs);\n            this.listParent.appendChild(listElement);\n            this.fileList.push(listElement);\n        }\n        this.renderReactTemplates();\n    };\n    Uploader.prototype.createParentUL = function () {\n        if (isNullOrUndefined(this.listParent)) {\n            this.listParent = this.createElement('ul', { className: LIST_PARENT });\n            this.uploadWrapper.appendChild(this.listParent);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Uploader.prototype.formFileList = function (fileData, files) {\n        var fileList = this.createElement('li', { className: FILE });\n        fileList.setAttribute('data-files-count', fileData.length + '');\n        var fileContainer = this.createElement('span', { className: TEXT_CONTAINER });\n        var statusMessage;\n        for (var _i = 0, fileData_2 = fileData; _i < fileData_2.length; _i++) {\n            var listItem = fileData_2[_i];\n            var fileNameEle = this.createElement('span', { className: FILE_NAME });\n            fileNameEle.innerHTML = this.getFileNameOnly(listItem.name);\n            var fileTypeEle = this.createElement('span', { className: FILE_TYPE });\n            var fileType = this.getFileType(listItem.name);\n            fileTypeEle.innerHTML = '.' + fileType;\n            if (!fileType) {\n                fileTypeEle.classList.add('e-hidden');\n            }\n            if (!this.enableRtl) {\n                fileContainer.appendChild(fileNameEle);\n                fileContainer.appendChild(fileTypeEle);\n            }\n            else {\n                var rtlContainer = this.createElement('span', { className: RTL_CONTAINER });\n                rtlContainer.appendChild(fileTypeEle);\n                rtlContainer.appendChild(fileNameEle);\n                fileContainer.appendChild(rtlContainer);\n            }\n            this.truncateName(fileNameEle);\n            statusMessage = this.formValidateFileInfo(listItem, fileList);\n        }\n        fileList.appendChild(fileContainer);\n        this.setListToFileInfo(fileData, fileList);\n        var index = this.listParent.querySelectorAll('li').length;\n        var infoEle = this.createElement('span');\n        if (fileList.classList.contains(INVALID_FILE)) {\n            infoEle.classList.add(STATUS);\n            infoEle.classList.add(INVALID_FILE);\n            infoEle.innerText = fileData.length > 1 ? this.localizedTexts('invalidFileSelection') : statusMessage;\n        }\n        else {\n            infoEle.classList.add(fileData.length > 1 ? INFORMATION : FILE_SIZE);\n            infoEle.innerText = fileData.length > 1 ? this.localizedTexts('totalFiles') + ': ' + fileData.length + ' , '\n                + this.localizedTexts('size') + ': ' +\n                this.bytesToSize(this.getFileSize(fileData)) : this.bytesToSize(fileData[0].size);\n            this.createFormInput(fileData);\n        }\n        fileContainer.appendChild(infoEle);\n        if (isNullOrUndefined(fileList.querySelector('.e-icons'))) {\n            var iconElement = this.createElement('span', { className: 'e-icons', attrs: { 'tabindex': this.btnTabIndex } });\n            /* istanbul ignore next */\n            if (this.browserName === 'msie') {\n                iconElement.classList.add('e-msie');\n            }\n            iconElement.setAttribute('title', this.localizedTexts('remove'));\n            fileList.appendChild(fileContainer);\n            fileList.appendChild(iconElement);\n            EventHandler.add(iconElement, 'click', this.removeFiles, this);\n            iconElement.classList.add(REMOVE_ICON);\n        }\n        var eventArgs = {\n            element: fileList,\n            fileInfo: this.mergeFileInfo(fileData, fileList),\n            index: index,\n            isPreload: this.isPreLoadFile(this.mergeFileInfo(fileData, fileList))\n        };\n        var eventsArgs = {\n            element: fileList,\n            fileInfo: this.mergeFileInfo(fileData, fileList),\n            index: index,\n            isPreload: this.isPreLoadFile(this.mergeFileInfo(fileData, fileList))\n        };\n        this.trigger('rendering', eventArgs);\n        this.trigger('fileListRendering', eventsArgs);\n        this.listParent.appendChild(fileList);\n        this.fileList.push(fileList);\n    };\n    Uploader.prototype.formValidateFileInfo = function (listItem, fileList) {\n        var statusMessage = listItem.status;\n        var validationMessages = this.validatedFileSize(listItem.size);\n        if (validationMessages.minSize !== '' || validationMessages.maxSize !== '') {\n            this.addInvalidClass(fileList);\n            statusMessage = validationMessages.minSize !== '' ? this.localizedTexts('invalidMinFileSize') :\n                validationMessages.maxSize !== '' ? this.localizedTexts('invalidMaxFileSize') : statusMessage;\n        }\n        var typeValidationMessage = this.checkExtension(this.getFilesInArray(listItem))[0].status;\n        if (typeValidationMessage === this.localizedTexts('invalidFileType')) {\n            this.addInvalidClass(fileList);\n            statusMessage = typeValidationMessage;\n        }\n        return statusMessage;\n    };\n    Uploader.prototype.addInvalidClass = function (fileList) {\n        fileList.classList.add(INVALID_FILE);\n    };\n    Uploader.prototype.createFormInput = function (fileData) {\n        if (this.browserName !== 'safari') {\n            var inputElement = this.element.cloneNode(true);\n            inputElement.classList.add(HIDDEN_INPUT);\n            for (var _i = 0, fileData_3 = fileData; _i < fileData_3.length; _i++) {\n                var listItem = fileData_3[_i];\n                listItem.input = inputElement;\n            }\n            inputElement.setAttribute('name', this.uploaderName);\n            this.uploadWrapper.querySelector('.' + INPUT_WRAPPER).appendChild(inputElement);\n            if (this.browserName !== 'msie' && this.browserName !== 'edge') {\n                this.element.value = '';\n            }\n        }\n    };\n    Uploader.prototype.getFileSize = function (fileData) {\n        var fileSize = 0;\n        for (var _i = 0, fileData_4 = fileData; _i < fileData_4.length; _i++) {\n            var file = fileData_4[_i];\n            fileSize += file.size;\n        }\n        return fileSize;\n    };\n    Uploader.prototype.mergeFileInfo = function (fileData, fileList) {\n        var result = {\n            name: '',\n            rawFile: '',\n            size: 0,\n            status: '',\n            type: '',\n            validationMessages: { minSize: '', maxSize: '' },\n            statusCode: '1',\n            list: fileList\n        };\n        var fileNames = [];\n        var type = '';\n        for (var _i = 0, fileData_5 = fileData; _i < fileData_5.length; _i++) {\n            var listItem = fileData_5[_i];\n            fileNames.push(listItem.name);\n            type = listItem.type;\n        }\n        result.name = fileNames.join(', ');\n        result.size = this.getFileSize(fileData);\n        result.type = type;\n        result.status = this.statusForFormUpload(fileData, fileList);\n        return result;\n    };\n    Uploader.prototype.statusForFormUpload = function (fileData, fileList) {\n        var isValid = true;\n        var statusMessage;\n        for (var _i = 0, fileData_6 = fileData; _i < fileData_6.length; _i++) {\n            var listItem = fileData_6[_i];\n            statusMessage = listItem.status;\n            var validationMessages = this.validatedFileSize(listItem.size);\n            if (validationMessages.minSize !== '' || validationMessages.maxSize !== '') {\n                isValid = false;\n                statusMessage = validationMessages.minSize !== '' ? this.localizedTexts('invalidMinFileSize') :\n                    validationMessages.maxSize !== '' ? this.localizedTexts('invalidMaxFileSize') : statusMessage;\n            }\n            var typeValidationMessage = this.checkExtension(this.getFilesInArray(listItem))[0].status;\n            if (typeValidationMessage === this.localizedTexts('invalidFileType')) {\n                isValid = false;\n                statusMessage = typeValidationMessage;\n            }\n        }\n        if (!isValid) {\n            fileList.classList.add(INVALID_FILE);\n            statusMessage = fileData.length > 1 ? this.localizedTexts('invalidFileSelection') : statusMessage;\n        }\n        else {\n            statusMessage = this.localizedTexts('totalFiles') + ': ' + fileData.length + ' , '\n                + this.localizedTexts('size') + ': ' +\n                this.bytesToSize(this.getFileSize(fileData));\n        }\n        return statusMessage;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Uploader.prototype.formCustomFileList = function (fileData, files) {\n        this.createParentUL();\n        var fileList = this.createElement('li', { className: FILE });\n        fileList.setAttribute('data-files-count', fileData.length + '');\n        this.setListToFileInfo(fileData, fileList);\n        var result = this.mergeFileInfo(fileData, fileList);\n        fileList.setAttribute('data-file-name', result.name);\n        this.uploadTemplateFn = this.templateComplier(this.template);\n        var liTempCompiler = this.uploadTemplateFn(result, this, 'template', this.element.id + 'Template', this.isStringTemplate, null, fileList);\n        if (liTempCompiler) {\n            var fromElements = [].slice.call(liTempCompiler);\n            append(fromElements, fileList);\n        }\n        var index = this.listParent.querySelectorAll('li').length;\n        if (!fileList.classList.contains(INVALID_FILE)) {\n            this.createFormInput(fileData);\n        }\n        var eventArgs = {\n            element: fileList,\n            fileInfo: result,\n            index: index,\n            isPreload: this.isPreLoadFile(result)\n        };\n        var eventsArgs = {\n            element: fileList,\n            fileInfo: result,\n            index: index,\n            isPreload: this.isPreLoadFile(result)\n        };\n        this.trigger('rendering', eventArgs);\n        this.trigger('fileListRendering', eventsArgs);\n        this.listParent.appendChild(fileList);\n        this.fileList.push(fileList);\n        this.renderReactTemplates();\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Create the file list for specified files data.\n     *\n     * @param { FileInfo[] } fileData - Specifies the files data for file list creation.\n     * @returns {void}\n     */\n    Uploader.prototype.createFileList = function (fileData, isSelectedFile) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        this.createParentUL();\n        if (this.template !== '' && !isNullOrUndefined(this.template)) {\n            if (this.isFormUpload()) {\n                this.uploadWrapper.classList.add(FORM_UPLOAD);\n                this.formCustomFileList(fileData, this.element.files);\n            }\n            else {\n                this.createCustomfileList(fileData);\n            }\n        }\n        else if (this.isFormUpload()) {\n            this.uploadWrapper.classList.add(FORM_UPLOAD);\n            this.formFileList(fileData, this.element.files);\n        }\n        else {\n            for (var _i = 0, fileData_7 = fileData; _i < fileData_7.length; _i++) {\n                var listItem = fileData_7[_i];\n                var liElement = this.createElement('li', {\n                    className: FILE,\n                    attrs: { 'data-file-name': listItem.name, 'data-files-count': '1' }\n                });\n                var textContainer = this.createElement('span', { className: TEXT_CONTAINER });\n                var textElement = this.createElement('span', { className: FILE_NAME, attrs: { 'title': listItem.name } });\n                textElement.innerHTML = this.getFileNameOnly(listItem.name);\n                var fileExtension = this.createElement('span', { className: FILE_TYPE });\n                var fileType = this.getFileType(listItem.name);\n                fileExtension.innerHTML = '.' + fileType;\n                if (!fileType) {\n                    fileExtension.classList.add('e-hidden');\n                }\n                if (!this.enableRtl) {\n                    textContainer.appendChild(textElement);\n                    textContainer.appendChild(fileExtension);\n                }\n                else {\n                    var rtlContainer = this.createElement('span', { className: RTL_CONTAINER });\n                    rtlContainer.appendChild(fileExtension);\n                    rtlContainer.appendChild(textElement);\n                    textContainer.appendChild(rtlContainer);\n                }\n                var fileSize = this.createElement('span', { className: FILE_SIZE });\n                fileSize.innerHTML = this.bytesToSize(listItem.size);\n                textContainer.appendChild(fileSize);\n                var statusElement = this.createElement('span', { className: STATUS });\n                textContainer.appendChild(statusElement);\n                statusElement.innerHTML = listItem.status;\n                liElement.appendChild(textContainer);\n                var iconElement = this.createElement('span', { className: ' e-icons',\n                    attrs: { 'tabindex': this.btnTabIndex } });\n                /* istanbul ignore next */\n                if (this.browserName === 'msie') {\n                    iconElement.classList.add('e-msie');\n                }\n                iconElement.setAttribute('title', this.localizedTexts('remove'));\n                liElement.appendChild(iconElement);\n                EventHandler.add(iconElement, 'click', this.removeFiles, this);\n                if (listItem.statusCode === '2') {\n                    statusElement.classList.add(UPLOAD_SUCCESS);\n                    iconElement.classList.add(DELETE_ICON);\n                    iconElement.setAttribute('title', this.localizedTexts('delete'));\n                }\n                else if (listItem.statusCode !== '1') {\n                    statusElement.classList.remove(UPLOAD_SUCCESS);\n                    statusElement.classList.add(VALIDATION_FAILS);\n                }\n                if (this.autoUpload && listItem.statusCode === '1' && this.asyncSettings.saveUrl !== '') {\n                    statusElement.innerHTML = '';\n                }\n                if (!iconElement.classList.contains(DELETE_ICON)) {\n                    iconElement.classList.add(REMOVE_ICON);\n                }\n                var index = fileData.indexOf(listItem);\n                var eventArgs = {\n                    element: liElement,\n                    fileInfo: listItem,\n                    index: index,\n                    isPreload: this.isPreLoadFile(listItem)\n                };\n                var eventsArgs = {\n                    element: liElement,\n                    fileInfo: listItem,\n                    index: index,\n                    isPreload: this.isPreLoadFile(listItem)\n                };\n                this.trigger('rendering', eventArgs);\n                this.trigger('fileListRendering', eventsArgs);\n                this.listParent.appendChild(liElement);\n                this.fileList.push(liElement);\n                this.truncateName(textElement);\n                var preventActionComplete = this.flag;\n                if (this.isPreLoadFile(listItem)) {\n                    this.flag = false;\n                    this.checkActionComplete(true);\n                    this.flag = preventActionComplete;\n                }\n            }\n        }\n    };\n    Uploader.prototype.getSlicedName = function (nameElement) {\n        var text = nameElement.textContent;\n        nameElement.dataset.tail = text.slice(text.length - 10);\n    };\n    Uploader.prototype.setListToFileInfo = function (fileData, fileList) {\n        for (var _i = 0, fileData_8 = fileData; _i < fileData_8.length; _i++) {\n            var listItem = fileData_8[_i];\n            listItem.list = fileList;\n        }\n    };\n    Uploader.prototype.truncateName = function (name) {\n        var nameElement = name;\n        if (this.browserName !== 'edge' && nameElement.offsetWidth < nameElement.scrollWidth) {\n            this.getSlicedName(nameElement);\n            /* istanbul ignore next */\n        }\n        else if (nameElement.offsetWidth + 1 < nameElement.scrollWidth) {\n            this.getSlicedName(nameElement);\n        }\n    };\n    Uploader.prototype.getFileType = function (name) {\n        var extension;\n        var index = name.lastIndexOf('.');\n        if (index >= 0) {\n            extension = name.substring(index + 1);\n        }\n        return extension ? extension : '';\n    };\n    Uploader.prototype.getFileNameOnly = function (name) {\n        var type = this.getFileType(name);\n        var names = name.split('.' + type);\n        return type = names[0];\n    };\n    Uploader.prototype.setInitialAttributes = function () {\n        if (this.initialAttr.accept) {\n            this.element.setAttribute('accept', this.initialAttr.accept);\n        }\n        if (this.initialAttr.disabled) {\n            this.element.setAttribute('disabled', 'disabled');\n        }\n        if (this.initialAttr.multiple) {\n            var newAttr = document.createAttribute('multiple');\n            this.element.setAttributeNode(newAttr);\n        }\n    };\n    Uploader.prototype.filterfileList = function (files) {\n        var filterFiles = [];\n        var li;\n        for (var i = 0; i < files.length; i++) {\n            li = this.getLiElement(files[i]);\n            if (!li.classList.contains(UPLOAD_SUCCESS)) {\n                filterFiles.push(files[i]);\n            }\n        }\n        return filterFiles;\n    };\n    Uploader.prototype.updateStatus = function (files, status, statusCode, updateLiStatus) {\n        if (updateLiStatus === void 0) { updateLiStatus = true; }\n        if (!(status === '' || isNullOrUndefined(status)) && !(statusCode === '' || isNullOrUndefined(statusCode))) {\n            files.status = status;\n            files.statusCode = statusCode;\n        }\n        if (updateLiStatus) {\n            var li = this.getLiElement(files);\n            if (!isNullOrUndefined(li)) {\n                if (!isNullOrUndefined(li.querySelector('.' + STATUS)) && !((status === '' || isNullOrUndefined(status)))) {\n                    li.querySelector('.' + STATUS).textContent = status;\n                }\n            }\n        }\n        return files;\n    };\n    Uploader.prototype.getLiElement = function (files) {\n        var index;\n        for (var i = 0; i < this.filesData.length; i++) {\n            if (!isNullOrUndefined(files) && ((!isNullOrUndefined(this.filesData[i].id) &&\n                !isNullOrUndefined(files.id)) ? (this.filesData[i].name === files.name &&\n                this.filesData[i].id === files.id) : this.filesData[i].name === files.name)) {\n                index = i;\n            }\n        }\n        return this.fileList[index];\n    };\n    Uploader.prototype.createProgressBar = function (liElement) {\n        var progressbarWrapper = this.createElement('span', { className: PROGRESS_WRAPPER });\n        var progressBar = this.createElement('progressbar', { className: PROGRESSBAR, attrs: { value: '0', max: '100' } });\n        var progressbarInnerWrapper = this.createElement('span', { className: PROGRESS_INNER_WRAPPER });\n        progressBar.setAttribute('style', 'width: 0%');\n        var progressbarText = this.createElement('span', { className: PROGRESSBAR_TEXT });\n        progressbarText.textContent = '0%';\n        progressbarInnerWrapper.appendChild(progressBar);\n        progressbarWrapper.appendChild(progressbarInnerWrapper);\n        progressbarWrapper.appendChild(progressbarText);\n        liElement.querySelector('.' + TEXT_CONTAINER).appendChild(progressbarWrapper);\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.updateProgressbar = function (e, li) {\n        if (!isNaN(Math.round((e.loaded / e.total) * 100)) && !isNullOrUndefined(li.querySelector('.' + PROGRESSBAR))) {\n            if (!isNullOrUndefined(this.progressInterval) && this.progressInterval !== '') {\n                var value = (Math.round((e.loaded / e.total) * 100)) % parseInt(this.progressInterval, 10);\n                if (value === 0 || value === 100) {\n                    this.changeProgressValue(li, Math.round((e.loaded / e.total) * 100).toString() + '%');\n                }\n            }\n            else {\n                this.changeProgressValue(li, Math.round((e.loaded / e.total) * 100).toString() + '%');\n            }\n        }\n    };\n    Uploader.prototype.changeProgressValue = function (li, progressValue) {\n        li.querySelector('.' + PROGRESSBAR).setAttribute('style', 'width:' + progressValue);\n        li.querySelector('.' + PROGRESSBAR_TEXT).textContent = progressValue;\n    };\n    Uploader.prototype.uploadInProgress = function (e, files, customUI, request) {\n        var li = this.getLiElement(files);\n        if (isNullOrUndefined(li) && (!customUI)) {\n            return;\n        }\n        if (!isNullOrUndefined(li)) {\n            /* istanbul ignore next */\n            if (files.statusCode === '5') {\n                this.cancelUploadingFile(files, e, request, li);\n            }\n            if (!(li.querySelectorAll('.' + PROGRESS_WRAPPER).length > 0) && li.querySelector('.' + STATUS)) {\n                li.querySelector('.' + STATUS).classList.add(UPLOAD_INPROGRESS);\n                this.createProgressBar(li);\n                this.updateProgressBarClasses(li, UPLOAD_INPROGRESS);\n                li.querySelector('.' + STATUS).classList.remove(UPLOAD_FAILED);\n            }\n            this.updateProgressbar(e, li);\n            var iconEle = li.querySelector('.' + REMOVE_ICON);\n            if (!isNullOrUndefined(iconEle)) {\n                iconEle.classList.add(ABORT_ICON, UPLOAD_INPROGRESS);\n                iconEle.setAttribute('title', this.localizedTexts('abort'));\n                iconEle.classList.remove(REMOVE_ICON);\n            }\n        }\n        else {\n            this.cancelUploadingFile(files, e, request);\n        }\n        var args = { e: e, operation: 'upload', file: this.updateStatus(files, this.localizedTexts('inProgress'), '3') };\n        this.trigger('progress', args);\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.cancelUploadingFile = function (files, e, request, li) {\n        var _this = this;\n        if (files.statusCode === '5') {\n            var eventArgs = {\n                event: e,\n                fileData: files,\n                cancel: false,\n                customFormData: []\n            };\n            this.trigger('canceling', eventArgs, function (eventArgs) {\n                if (eventArgs.cancel) {\n                    files.statusCode = '3';\n                    if (!isNullOrUndefined(li)) {\n                        var spinnerTarget = li.querySelector('.' + ABORT_ICON);\n                        if (!isNullOrUndefined(spinnerTarget)) {\n                            hideSpinner(spinnerTarget);\n                            detach(li.querySelector('.e-spinner-pane'));\n                        }\n                    }\n                }\n                else {\n                    request.emitError = false;\n                    request.httpRequest.abort();\n                    var formData = new FormData();\n                    if (files.statusCode === '5') {\n                        var name_1 = _this.element.getAttribute('name');\n                        formData.append(name_1, files.name);\n                        formData.append('cancel-uploading', files.name);\n                        _this.updateFormData(formData, eventArgs.customFormData);\n                        var ajax = new Ajax(_this.asyncSettings.removeUrl, 'POST', true, null);\n                        ajax.emitError = false;\n                        ajax.onLoad = function (e) {\n                            _this.removecanceledFile(e, files);\n                            return {};\n                        };\n                        ajax.send(formData);\n                    }\n                }\n            });\n        }\n    };\n    Uploader.prototype.removecanceledFile = function (e, file) {\n        var liElement = this.getLiElement(file);\n        if (isNullOrUndefined(liElement) || liElement.querySelector('.' + RETRY_ICON) || isNullOrUndefined(liElement.querySelector('.' + ABORT_ICON))) {\n            return;\n        }\n        this.updateStatus(file, this.localizedTexts('fileUploadCancel'), '5');\n        this.renderFailureState(e, file, liElement);\n        var spinnerTarget = liElement.querySelector('.' + REMOVE_ICON);\n        if (!isNullOrUndefined(liElement)) {\n            hideSpinner(spinnerTarget);\n            if (!isNullOrUndefined(liElement.querySelector('.e-spinner-pane'))) {\n                detach(liElement.querySelector('.e-spinner-pane'));\n            }\n        }\n        var requestResponse = e && e.currentTarget ? this.getResponse(e) : null;\n        var args = { event: e, response: requestResponse, operation: 'cancel', file: file };\n        this.trigger('success', args);\n    };\n    Uploader.prototype.renderFailureState = function (e, file, liElement) {\n        var _this = this;\n        this.updateProgressBarClasses(liElement, UPLOAD_FAILED);\n        this.removeProgressbar(liElement, 'failure');\n        if (!isNullOrUndefined(liElement.querySelector('.e-file-status'))) {\n            liElement.querySelector('.e-file-status').classList.add(UPLOAD_FAILED);\n        }\n        var deleteIcon = liElement.querySelector('.' + ABORT_ICON);\n        if (isNullOrUndefined(deleteIcon)) {\n            return;\n        }\n        deleteIcon.classList.remove(ABORT_ICON, UPLOAD_INPROGRESS);\n        deleteIcon.classList.add(REMOVE_ICON);\n        deleteIcon.setAttribute('title', this.localizedTexts('remove'));\n        this.pauseButton = this.createElement('span', { className: 'e-icons e-file-reload-btn', attrs: { 'tabindex': this.btnTabIndex } });\n        deleteIcon.parentElement.insertBefore(this.pauseButton, deleteIcon);\n        this.pauseButton.setAttribute('title', this.localizedTexts('retry'));\n        var retryElement = liElement.querySelector('.' + RETRY_ICON);\n        /* istanbul ignore next */\n        retryElement.addEventListener('click', function (e) {\n            _this.reloadcanceledFile(e, file, liElement, false);\n        }, false);\n    };\n    Uploader.prototype.reloadcanceledFile = function (e, file, liElement, custom) {\n        file.statusCode = '1';\n        file.status = this.localizedTexts('readyToUploadMessage');\n        if (!custom) {\n            if (!isNullOrUndefined(liElement.querySelector('.' + STATUS))) {\n                liElement.querySelector('.' + STATUS).classList.remove(UPLOAD_FAILED);\n            }\n            if (!isNullOrUndefined(liElement.querySelector('.' + RETRY_ICON))) {\n                detach(liElement.querySelector('.' + RETRY_ICON));\n            }\n            this.pauseButton = null;\n        }\n        /* istanbul ignore next */\n        liElement.classList.add(RESTRICT_RETRY);\n        this.upload([file]);\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.uploadComplete = function (e, file, customUI) {\n        var status = e.target;\n        if (status.readyState === 4 && status.status >= 200 && status.status <= 299) {\n            var li = this.getLiElement(file);\n            if (isNullOrUndefined(li) && (!customUI || isNullOrUndefined(customUI))) {\n                return;\n            }\n            if (!isNullOrUndefined(li)) {\n                this.updateProgressBarClasses(li, UPLOAD_SUCCESS);\n                this.removeProgressbar(li, 'success');\n                var iconEle = li.querySelector('.' + ABORT_ICON);\n                if (!isNullOrUndefined(iconEle)) {\n                    iconEle.classList.add(DELETE_ICON);\n                    iconEle.setAttribute('title', this.localizedTexts('delete'));\n                    iconEle.classList.remove(ABORT_ICON);\n                    iconEle.classList.remove(UPLOAD_INPROGRESS);\n                }\n            }\n            this.raiseSuccessEvent(e, file);\n        }\n        else {\n            this.uploadFailed(e, file);\n        }\n    };\n    Uploader.prototype.getResponse = function (e) {\n        var target = e.currentTarget;\n        var response = {\n            readyState: target.readyState,\n            statusCode: target.status,\n            statusText: target.statusText,\n            headers: target.getAllResponseHeaders(),\n            withCredentials: target.withCredentials\n        };\n        return response;\n    };\n    Uploader.prototype.raiseSuccessEvent = function (e, file) {\n        var _this = this;\n        var response = e && e.currentTarget ? this.getResponse(e) : null;\n        var statusMessage = this.localizedTexts('uploadSuccessMessage');\n        var args = {\n            e: e, response: response, operation: 'upload', file: this.updateStatus(file, statusMessage, '2', false), statusText: statusMessage\n        };\n        var liElement = this.getLiElement(file);\n        if (!isNullOrUndefined(liElement)) {\n            var spinnerEle = liElement.querySelector('.' + SPINNER_PANE);\n            if (!isNullOrUndefined(spinnerEle)) {\n                hideSpinner(liElement);\n                detach(spinnerEle);\n            }\n        }\n        this.trigger('success', args, function (args) {\n            _this.updateStatus(file, args.statusText, '2');\n            _this.uploadedFilesData.push(file);\n            _this.trigger('change', { file: _this.uploadedFilesData });\n            _this.checkActionButtonStatus();\n            if (_this.fileList.length > 0) {\n                if ((!(_this.getLiElement(file)).classList.contains(RESTRICT_RETRY))) {\n                    _this.uploadSequential();\n                    _this.checkActionComplete(true);\n                }\n                else {\n                    /* istanbul ignore next */\n                    (_this.getLiElement(file)).classList.remove(RESTRICT_RETRY);\n                }\n            }\n        });\n    };\n    Uploader.prototype.uploadFailed = function (e, file) {\n        var _this = this;\n        var li = this.getLiElement(file);\n        var response = e && e.currentTarget ? this.getResponse(e) : null;\n        var statusMessage = this.localizedTexts('uploadFailedMessage');\n        var args = {\n            e: e, response: response, operation: 'upload', file: this.updateStatus(file, statusMessage, '0', false), statusText: statusMessage\n        };\n        if (!isNullOrUndefined(li)) {\n            this.renderFailureState(e, file, li);\n        }\n        this.trigger('failure', args, function (args) {\n            _this.updateStatus(file, args.statusText, '0');\n            _this.checkActionButtonStatus();\n            _this.uploadSequential();\n            _this.checkActionComplete(true);\n        });\n    };\n    Uploader.prototype.uploadSequential = function () {\n        if (this.sequentialUpload) {\n            if (this.autoUpload) {\n                /* istanbul ignore next */\n                this.checkAutoUpload(this.filesData);\n            }\n            else {\n                this.uploadButtonClick();\n            }\n        }\n    };\n    Uploader.prototype.checkActionComplete = function (increment) {\n        if (increment) {\n            ++this.actionCompleteCount;\n        }\n        else {\n            --this.actionCompleteCount;\n        }\n        this.raiseActionComplete();\n    };\n    Uploader.prototype.raiseActionComplete = function () {\n        if ((this.filesData.length === this.actionCompleteCount) && this.flag) {\n            this.flag = false;\n            var eventArgs = {\n                fileData: []\n            };\n            eventArgs.fileData = this.getSelectedFileStatus(this.selectedFiles);\n            this.trigger('actionComplete', eventArgs);\n        }\n    };\n    Uploader.prototype.getSelectedFileStatus = function (selectedFiles) {\n        var matchFiles = [];\n        var matchFilesIndex = 0;\n        for (var selectFileIndex = 0; selectFileIndex < selectedFiles.length; selectFileIndex++) {\n            var selectedFileData = selectedFiles[selectFileIndex];\n            for (var fileDataIndex = 0; fileDataIndex < this.filesData.length; fileDataIndex++) {\n                if (this.filesData[fileDataIndex].name === selectedFileData.name) {\n                    matchFiles[matchFilesIndex] = this.filesData[fileDataIndex];\n                    ++matchFilesIndex;\n                }\n            }\n        }\n        return matchFiles;\n    };\n    Uploader.prototype.updateProgressBarClasses = function (li, className) {\n        var progressBar = li.querySelector('.' + PROGRESSBAR);\n        if (!isNullOrUndefined(progressBar)) {\n            progressBar.classList.add(className);\n        }\n    };\n    Uploader.prototype.removeProgressbar = function (li, callType) {\n        var _this = this;\n        if (!isNullOrUndefined(li.querySelector('.' + PROGRESS_WRAPPER))) {\n            this.progressAnimation = new Animation({ duration: 1250 });\n            this.progressAnimation.animate(li.querySelector('.' + PROGRESS_WRAPPER), { name: 'FadeOut' });\n            this.progressAnimation.animate(li.querySelector('.' + PROGRESSBAR_TEXT), { name: 'FadeOut' });\n            setTimeout(function () {\n                _this.animateProgressBar(li, callType);\n            }, 750);\n        }\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.animateProgressBar = function (li, callType) {\n        if (callType === 'success') {\n            li.classList.add(UPLOAD_SUCCESS);\n            if (!isNullOrUndefined(li.querySelector('.' + STATUS))) {\n                li.querySelector('.' + STATUS).classList.remove(UPLOAD_INPROGRESS);\n                this.progressAnimation.animate(li.querySelector('.' + STATUS), { name: 'FadeIn' });\n                li.querySelector('.' + STATUS).classList.add(UPLOAD_SUCCESS);\n            }\n        }\n        else {\n            if (!isNullOrUndefined(li.querySelector('.' + STATUS))) {\n                li.querySelector('.' + STATUS).classList.remove(UPLOAD_INPROGRESS);\n                this.progressAnimation.animate(li.querySelector('.' + STATUS), { name: 'FadeIn' });\n                li.querySelector('.' + STATUS).classList.add(UPLOAD_FAILED);\n            }\n        }\n        if (li.querySelector('.' + PROGRESS_WRAPPER)) {\n            detach(li.querySelector('.' + PROGRESS_WRAPPER));\n        }\n    };\n    Uploader.prototype.setExtensions = function (extensions) {\n        if (extensions !== '' && !isNullOrUndefined(extensions)) {\n            this.element.setAttribute('accept', extensions);\n        }\n        else {\n            this.element.removeAttribute('accept');\n        }\n    };\n    Uploader.prototype.templateComplier = function (uploadTemplate) {\n        if (uploadTemplate) {\n            try {\n                if (selectAll(uploadTemplate, document).length) {\n                    return compile(select(uploadTemplate, document).innerHTML.trim());\n                }\n                else {\n                    return compile(uploadTemplate);\n                }\n            }\n            catch (exception) {\n                return compile(uploadTemplate);\n            }\n        }\n        return undefined;\n    };\n    Uploader.prototype.setRTL = function () {\n        if (this.enableRtl) {\n            addClass([this.uploadWrapper], RTL);\n        }\n        else {\n            removeClass([this.uploadWrapper], RTL);\n        }\n    };\n    Uploader.prototype.localizedTexts = function (localeText) {\n        this.l10n.setLocale(this.locale);\n        return this.l10n.getConstant(localeText);\n    };\n    Uploader.prototype.setControlStatus = function () {\n        if (!this.enabled) {\n            this.uploadWrapper.classList.add(DISABLED);\n            this.element.setAttribute('disabled', 'disabled');\n            this.browseButton.setAttribute('disabled', 'disabled');\n            if (!isNullOrUndefined(this.clearButton)) {\n                this.clearButton.setAttribute('disabled', 'disabled');\n            }\n            if (!isNullOrUndefined(this.uploadButton)) {\n                this.uploadButton.setAttribute('disabled', 'disabled');\n            }\n        }\n        else {\n            if (this.uploadWrapper.classList.contains(DISABLED)) {\n                this.uploadWrapper.classList.remove(DISABLED);\n            }\n            if (!isNullOrUndefined(this.browseButton) && this.element.hasAttribute('disabled')) {\n                this.element.removeAttribute('disabled');\n                this.browseButton.removeAttribute('disabled');\n            }\n            if (!isNullOrUndefined(this.clearButton) && this.clearButton.hasAttribute('disabled')) {\n                this.clearButton.removeAttribute('disabled');\n            }\n            if (!isNullOrUndefined(this.uploadButton) && this.uploadButton.hasAttribute('disabled')) {\n                this.uploadButton.hasAttribute('disabled');\n            }\n        }\n    };\n    Uploader.prototype.checkHTMLAttributes = function (isDynamic) {\n        var attributes = isDynamic ? isNullOrUndefined(this.htmlAttributes) ? [] : Object.keys(this.htmlAttributes) :\n            ['accept', 'multiple', 'disabled'];\n        for (var _i = 0, attributes_1 = attributes; _i < attributes_1.length; _i++) {\n            var prop = attributes_1[_i];\n            if (!isNullOrUndefined(this.element.getAttribute(prop))) {\n                switch (prop) {\n                    case 'accept':\n                        if ((isNullOrUndefined(this.uploaderOptions) || (this.uploaderOptions['allowedExtensions'] === undefined))\n                            || isDynamic) {\n                            this.setProperties({ allowedExtensions: this.element.getAttribute('accept') }, !isDynamic);\n                            this.initialAttr.accept = this.allowedExtensions;\n                        }\n                        break;\n                    case 'multiple':\n                        if ((isNullOrUndefined(this.uploaderOptions) || (this.uploaderOptions['multiple'] === undefined)) || isDynamic) {\n                            var isMutiple = this.element.getAttribute(prop) === 'multiple' ||\n                                this.element.getAttribute(prop) === '' || this.element.getAttribute(prop) === 'true' ? true : false;\n                            this.setProperties({ multiple: isMutiple }, !isDynamic);\n                            this.initialAttr.multiple = true;\n                        }\n                        break;\n                    case 'disabled':\n                        if ((isNullOrUndefined(this.uploaderOptions) || (this.uploaderOptions['enabled'] === undefined)) || isDynamic) {\n                            var isDisabled = this.element.getAttribute(prop) === 'disabled' ||\n                                this.element.getAttribute(prop) === '' || this.element.getAttribute(prop) === 'true' ? false : true;\n                            this.setProperties({ enabled: isDisabled }, !isDynamic);\n                            this.initialAttr.disabled = true;\n                        }\n                }\n            }\n        }\n    };\n    Uploader.prototype.chunkUpload = function (file, custom, fileIndex) {\n        var start = 0;\n        var end = Math.min(this.asyncSettings.chunkSize, file.size);\n        var index = 0;\n        var blob = file.rawFile.slice(start, end);\n        var metaData = { chunkIndex: index, blob: blob, file: file, start: start, end: end, retryCount: 0, request: null };\n        this.sendRequest(file, metaData, custom, fileIndex);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Uploader.prototype.sendRequest = function (file, metaData, custom, fileIndex) {\n        var _this = this;\n        var formData = new FormData();\n        var blob = file.rawFile.slice(metaData.start, metaData.end);\n        formData.append('chunkFile', blob, file.name);\n        formData.append(this.uploaderName, blob, file.name);\n        formData.append('chunk-index', metaData.chunkIndex.toString());\n        formData.append('chunkIndex', metaData.chunkIndex.toString());\n        var totalChunk = Math.max(Math.ceil(file.size / this.asyncSettings.chunkSize), 1);\n        formData.append('total-chunk', totalChunk.toString());\n        formData.append('totalChunk', totalChunk.toString());\n        var ajax = new Ajax({ url: this.asyncSettings.saveUrl, type: 'POST', async: true, contentType: null });\n        ajax.emitError = false;\n        ajax.onLoad = function (e) {\n            _this.chunkUploadComplete(e, metaData, custom);\n            return {};\n        };\n        ajax.onUploadProgress = function (e) {\n            _this.chunkUploadInProgress(e, metaData, custom);\n            return {};\n        };\n        var eventArgs = {\n            fileData: file,\n            customFormData: [],\n            cancel: false,\n            chunkSize: this.asyncSettings.chunkSize === 0 ? null : this.asyncSettings.chunkSize\n        };\n        ajax.beforeSend = function (e) {\n            eventArgs.currentRequest = ajax.httpRequest;\n            eventArgs.currentChunkIndex = metaData.chunkIndex;\n            if (eventArgs.currentChunkIndex === 0) {\n                // This event is currently not required but to avoid breaking changes for previous customer, we have included.\n                _this.trigger('uploading', eventArgs, function (eventArgs) {\n                    _this.uploadingEventCallback(formData, eventArgs, e, file);\n                });\n            }\n            else {\n                _this.trigger('chunkUploading', eventArgs, function (eventArgs) {\n                    _this.uploadingEventCallback(formData, eventArgs, e, file);\n                });\n            }\n        };\n        /* istanbul ignore next */\n        ajax.onError = function (e) {\n            _this.chunkUploadFailed(e, metaData, custom);\n            return {};\n        };\n        ajax.send(formData);\n        metaData.request = ajax;\n    };\n    Uploader.prototype.uploadingEventCallback = function (formData, eventArgs, e, file) {\n        if (eventArgs.cancel) {\n            this.eventCancelByArgs(e, eventArgs, file);\n        }\n        else {\n            this.updateFormData(formData, eventArgs.customFormData);\n        }\n    };\n    Uploader.prototype.eventCancelByArgs = function (e, eventArgs, file) {\n        var _this = this;\n        e.cancel = true;\n        if (eventArgs.fileData.statusCode === '5') {\n            return;\n        }\n        eventArgs.fileData.statusCode = '5';\n        eventArgs.fileData.status = this.localizedTexts('fileUploadCancel');\n        var liElement = this.getLiElement(eventArgs.fileData);\n        if (liElement) {\n            if (!isNullOrUndefined(liElement.querySelector('.' + STATUS))) {\n                liElement.querySelector('.' + STATUS).innerHTML = this.localizedTexts('fileUploadCancel');\n                liElement.querySelector('.' + STATUS).classList.add(UPLOAD_FAILED);\n            }\n            this.pauseButton = this.createElement('span', { className: 'e-icons e-file-reload-btn', attrs: { 'tabindex': this.btnTabIndex } });\n            var removeIcon = liElement.querySelector('.' + REMOVE_ICON);\n            if (removeIcon) {\n                removeIcon.parentElement.insertBefore(this.pauseButton, removeIcon);\n            }\n            this.pauseButton.setAttribute('title', this.localizedTexts('retry'));\n            /* istanbul ignore next */\n            this.pauseButton.addEventListener('click', function (e) {\n                _this.reloadcanceledFile(e, file, liElement);\n            }, false);\n            this.checkActionButtonStatus();\n        }\n    };\n    Uploader.prototype.checkChunkUpload = function () {\n        return (this.asyncSettings.chunkSize <= 0 || isNullOrUndefined(this.asyncSettings.chunkSize)) ? false : true;\n    };\n    Uploader.prototype.chunkUploadComplete = function (e, metaData, custom) {\n        var _this = this;\n        var response = e.target;\n        var liElement;\n        if (response.readyState === 4 && response.status >= 200 && response.status < 300) {\n            var requestResponse = e && e.currentTarget ? this.getResponse(e) : null;\n            var totalChunk = Math.max(Math.ceil(metaData.file.size / this.asyncSettings.chunkSize), 1);\n            var eventArgs = {\n                event: e,\n                file: metaData.file,\n                chunkIndex: metaData.chunkIndex,\n                totalChunk: totalChunk,\n                chunkSize: this.asyncSettings.chunkSize,\n                response: requestResponse\n            };\n            this.trigger('chunkSuccess', eventArgs);\n            if (isNullOrUndefined(custom) || !custom) {\n                liElement = this.getLiElement(metaData.file);\n            }\n            this.updateMetaData(metaData);\n            if (metaData.end === metaData.file.size) {\n                metaData.file.statusCode = '3';\n            }\n            if (metaData.file.statusCode === '5') {\n                var eventArgs_1 = { event: e, fileData: metaData.file, cancel: false, customFormData: [] };\n                this.trigger('canceling', eventArgs_1, function (eventArgs) {\n                    /* istanbul ignore next */\n                    if (eventArgs.cancel) {\n                        metaData.file.statusCode = '3';\n                        var spinnerTarget = liElement.querySelector('.' + ABORT_ICON);\n                        if (!isNullOrUndefined(liElement) && !isNullOrUndefined(spinnerTarget)) {\n                            hideSpinner(spinnerTarget);\n                            detach(liElement.querySelector('.e-spinner-pane'));\n                        }\n                        _this.sendNextRequest(metaData);\n                    }\n                    else {\n                        metaData.request.emitError = false;\n                        response.abort();\n                        var formData = new FormData();\n                        var name_2 = _this.element.getAttribute('name');\n                        formData.append(name_2, metaData.file.name);\n                        formData.append('cancel-uploading', metaData.file.name);\n                        formData.append('cancelUploading', metaData.file.name);\n                        _this.updateFormData(formData, eventArgs.customFormData);\n                        var ajax = new Ajax(_this.asyncSettings.removeUrl, 'POST', true, null);\n                        ajax.emitError = false;\n                        ajax.onLoad = function (e) {\n                            _this.removeChunkFile(e, metaData, custom);\n                            return {};\n                        };\n                        ajax.send(formData);\n                    }\n                });\n            }\n            else {\n                if ((totalChunk - 1) === metaData.chunkIndex && totalChunk > metaData.chunkIndex) {\n                    var index = this.pausedData.indexOf(metaData);\n                    if (index >= 0) {\n                        this.pausedData.splice(index, 1);\n                    }\n                    if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) || !custom) && liElement) {\n                        if (liElement && !isNullOrUndefined(liElement.querySelector('.' + PAUSE_UPLOAD))) {\n                            detach(liElement.querySelector('.' + PAUSE_UPLOAD));\n                        }\n                        this.removeChunkProgressBar(metaData);\n                    }\n                    this.raiseSuccessEvent(e, metaData.file);\n                    return;\n                }\n                if (metaData.file.statusCode !== '4') {\n                    this.sendNextRequest(metaData);\n                }\n            }\n        }\n        else {\n            this.chunkUploadFailed(e, metaData);\n        }\n    };\n    Uploader.prototype.sendNextRequest = function (metaData) {\n        metaData.start = metaData.end;\n        metaData.end += this.asyncSettings.chunkSize;\n        metaData.end = Math.min(metaData.end, metaData.file.size);\n        metaData.chunkIndex += 1;\n        this.sendRequest(metaData.file, metaData);\n    };\n    Uploader.prototype.removeChunkFile = function (e, metaData, custom) {\n        if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) && !custom)) {\n            var liElement = this.getLiElement(metaData.file);\n            var deleteIcon = liElement.querySelector('.' + ABORT_ICON);\n            var spinnerTarget = deleteIcon;\n            this.updateStatus(metaData.file, this.localizedTexts('fileUploadCancel'), '5');\n            this.updateProgressBarClasses(liElement, UPLOAD_FAILED);\n            this.removeProgressbar(liElement, 'failure');\n            deleteIcon && deleteIcon.classList.remove(ABORT_ICON);\n            deleteIcon && deleteIcon.classList.add(REMOVE_ICON);\n            deleteIcon && deleteIcon.setAttribute('title', this.localizedTexts('remove'));\n            var pauseIcon = liElement.querySelector('.' + PAUSE_UPLOAD);\n            pauseIcon && pauseIcon.classList.add(RETRY_ICON);\n            pauseIcon && pauseIcon.classList.remove(PAUSE_UPLOAD);\n            pauseIcon && pauseIcon.setAttribute('title', this.localizedTexts('retry'));\n            if (!isNullOrUndefined(liElement) && !isNullOrUndefined(deleteIcon)\n                && !isNullOrUndefined(liElement.querySelector('.e-spinner-pane'))) {\n                hideSpinner(spinnerTarget);\n                detach(liElement.querySelector('.e-spinner-pane'));\n            }\n        }\n    };\n    Uploader.prototype.pauseUpload = function (metaData, e, custom) {\n        metaData.file.statusCode = '4';\n        metaData.file.status = this.localizedTexts('pause');\n        this.updateMetaData(metaData);\n        var eventArgs = {\n            event: e ? e : null,\n            file: metaData.file,\n            chunkIndex: metaData.chunkIndex,\n            chunkCount: Math.round(metaData.file.size / this.asyncSettings.chunkSize),\n            chunkSize: this.asyncSettings.chunkSize\n        };\n        this.abortUpload(metaData, custom, eventArgs);\n    };\n    Uploader.prototype.abortUpload = function (metaData, custom, eventArgs) {\n        if (metaData.file.statusCode !== '4') {\n            metaData.request.emitError = false;\n            metaData.request.httpRequest.abort();\n        }\n        var liElement = this.getLiElement(metaData.file);\n        if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) || !custom)) {\n            var targetElement = liElement.querySelector('.' + PAUSE_UPLOAD);\n            targetElement.classList.remove(PAUSE_UPLOAD);\n            targetElement.classList.add(RESUME_UPLOAD);\n            targetElement.setAttribute('title', this.localizedTexts('resume'));\n            targetElement.nextElementSibling.classList.add(REMOVE_ICON);\n            targetElement.nextElementSibling.classList.remove(ABORT_ICON);\n            targetElement.nextElementSibling.setAttribute('title', this.localizedTexts('remove'));\n        }\n        for (var i = 0; i < this.pausedData.length; i++) {\n            if (this.pausedData[i].file.name === metaData.file.name) {\n                this.pausedData.splice(i, 1);\n            }\n        }\n        this.pausedData.push(metaData);\n        this.trigger('pausing', eventArgs);\n    };\n    Uploader.prototype.resumeUpload = function (metaData, e, custom) {\n        var liElement = this.getLiElement(metaData.file);\n        var targetElement;\n        if (!isNullOrUndefined(liElement)) {\n            targetElement = liElement.querySelector('.' + RESUME_UPLOAD);\n        }\n        if (!isNullOrUndefined(targetElement) && (isNullOrUndefined(custom) || !custom)) {\n            targetElement.classList.remove(RESUME_UPLOAD);\n            targetElement.classList.add(PAUSE_UPLOAD);\n            targetElement.setAttribute('title', this.localizedTexts('pause'));\n            targetElement.nextElementSibling.classList.remove(REMOVE_ICON);\n            targetElement.nextElementSibling.classList.add(ABORT_ICON);\n            targetElement.nextElementSibling.setAttribute('title', this.localizedTexts('abort'));\n        }\n        metaData.file.status = this.localizedTexts('inProgress');\n        metaData.file.statusCode = '3';\n        this.updateMetaData(metaData);\n        var eventArgs = {\n            event: e ? e : null,\n            file: metaData.file,\n            chunkIndex: metaData.chunkIndex,\n            chunkCount: Math.round(metaData.file.size / this.asyncSettings.chunkSize),\n            chunkSize: this.asyncSettings.chunkSize\n        };\n        this.trigger('resuming', eventArgs);\n        for (var i = 0; i < this.pausedData.length; i++) {\n            if (this.pausedData[i].end === this.pausedData[i].file.size) {\n                this.chunkUploadComplete(e, metaData, custom);\n            }\n            else {\n                if (this.pausedData[i].file.name === metaData.file.name) {\n                    this.pausedData[i].start = this.pausedData[i].end;\n                    this.pausedData[i].end = this.pausedData[i].end + this.asyncSettings.chunkSize;\n                    this.pausedData[i].end = Math.min(this.pausedData[i].end, this.pausedData[i].file.size);\n                    this.pausedData[i].chunkIndex = this.pausedData[i].chunkIndex + 1;\n                    this.sendRequest(this.pausedData[i].file, this.pausedData[i], custom);\n                }\n            }\n        }\n    };\n    Uploader.prototype.updateMetaData = function (metaData) {\n        if (this.uploadMetaData.indexOf(metaData) === -1) {\n            this.uploadMetaData.push(metaData);\n        }\n        else {\n            this.uploadMetaData.splice(this.uploadMetaData.indexOf(metaData), 1);\n            this.uploadMetaData.push(metaData);\n        }\n    };\n    Uploader.prototype.removeChunkProgressBar = function (metaData) {\n        var liElement = this.getLiElement(metaData.file);\n        if (!isNullOrUndefined(liElement)) {\n            this.updateProgressBarClasses(liElement, UPLOAD_SUCCESS);\n            this.removeProgressbar(liElement, 'success');\n            var cancelButton = liElement.querySelector('.' + ABORT_ICON);\n            if (!isNullOrUndefined(cancelButton)) {\n                cancelButton.classList.add(DELETE_ICON);\n                cancelButton.setAttribute('title', this.localizedTexts('delete'));\n                cancelButton.classList.remove(ABORT_ICON, UPLOAD_INPROGRESS);\n            }\n        }\n    };\n    Uploader.prototype.chunkUploadFailed = function (e, metaData, custom) {\n        var _this = this;\n        var chunkCount = Math.max(Math.ceil(metaData.file.size / this.asyncSettings.chunkSize), 1);\n        var liElement;\n        if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) || !custom)) {\n            liElement = this.getLiElement(metaData.file);\n        }\n        var requestResponse = e && e.currentTarget ? this.getResponse(e) : null;\n        var eventArgs = {\n            event: e,\n            file: metaData.file,\n            chunkIndex: metaData.chunkIndex,\n            totalChunk: chunkCount,\n            chunkSize: this.asyncSettings.chunkSize,\n            cancel: false,\n            response: requestResponse\n        };\n        this.trigger('chunkFailure', eventArgs, function (eventArgs) {\n            // To prevent triggering of failure event\n            if (!eventArgs.cancel) {\n                if (metaData.retryCount < _this.asyncSettings.retryCount) {\n                    setTimeout(function () {\n                        _this.retryRequest(liElement, metaData, custom);\n                    }, _this.asyncSettings.retryAfterDelay);\n                }\n                else {\n                    if (!isNullOrUndefined(liElement)) {\n                        var pauseButton = liElement.querySelector('.' + PAUSE_UPLOAD) ?\n                            liElement.querySelector('.' + PAUSE_UPLOAD) : liElement.querySelector('.' + RESUME_UPLOAD);\n                        if (!isNullOrUndefined(pauseButton)) {\n                            pauseButton.classList.add(RETRY_ICON);\n                            pauseButton.classList.remove(PAUSE_UPLOAD, RESUME_UPLOAD);\n                        }\n                        _this.updateProgressBarClasses(liElement, UPLOAD_FAILED);\n                        _this.removeProgressbar(liElement, 'failure');\n                        liElement.querySelector('.e-icons').classList.remove(UPLOAD_INPROGRESS);\n                        var iconElement = liElement.querySelector('.' + ABORT_ICON) ?\n                            liElement.querySelector('.' + ABORT_ICON) : liElement.querySelector('.' + REMOVE_ICON);\n                        iconElement.classList.remove(ABORT_ICON);\n                        if (!isNullOrUndefined(liElement.querySelector('.' + PAUSE_UPLOAD))) {\n                            detach(liElement.querySelector('.' + PAUSE_UPLOAD));\n                        }\n                        if (metaData.start > 0) {\n                            iconElement.classList.add(DELETE_ICON);\n                            iconElement.setAttribute('title', _this.localizedTexts('delete'));\n                        }\n                        else {\n                            iconElement.classList.add(REMOVE_ICON);\n                            iconElement.setAttribute('title', _this.localizedTexts('remove'));\n                        }\n                    }\n                    metaData.retryCount = 0;\n                    var file_1 = metaData.file;\n                    var failureMessage = _this.localizedTexts('uploadFailedMessage');\n                    var args = {\n                        e: e, response: requestResponse,\n                        operation: 'upload',\n                        file: _this.updateStatus(file_1, failureMessage, '0', false),\n                        statusText: failureMessage\n                    };\n                    _this.trigger('failure', args, function (args) {\n                        _this.updateStatus(file_1, args.statusText, '0');\n                        _this.uploadSequential();\n                        _this.checkActionComplete(true);\n                    });\n                }\n            }\n        });\n    };\n    Uploader.prototype.retryRequest = function (liElement, metaData, custom) {\n        if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) || !custom) && liElement) {\n            this.updateProgressBarClasses(liElement, UPLOAD_FAILED);\n        }\n        metaData.retryCount += 1;\n        this.sendRequest(metaData.file, metaData);\n    };\n    Uploader.prototype.checkPausePlayAction = function (e) {\n        var targetElement = e.target;\n        var selectedElement = e.target.parentElement;\n        var index = this.fileList.indexOf(selectedElement);\n        var fileData = this.filesData[index];\n        var metaData = this.getCurrentMetaData(fileData);\n        if (targetElement.classList.contains(PAUSE_UPLOAD)) {\n            /* istanbul ignore next */\n            this.pauseUpload(metaData, e);\n        }\n        else if (targetElement.classList.contains(RESUME_UPLOAD)) {\n            /* istanbul ignore next */\n            this.resumeUpload(metaData, e);\n        }\n        else if (targetElement.classList.contains(RETRY_ICON)) {\n            if (metaData.file.status === this.localizedTexts('fileUploadCancel')) {\n                this.retryUpload(metaData, false);\n            }\n            else {\n                this.retryUpload(metaData, true);\n            }\n        }\n    };\n    Uploader.prototype.retryUpload = function (metaData, fromcanceledStage) {\n        if (fromcanceledStage) {\n            metaData.end = metaData.end + this.asyncSettings.chunkSize;\n            metaData.start = metaData.start + this.asyncSettings.chunkSize;\n            this.sendRequest(metaData.file, metaData);\n        }\n        else {\n            metaData.file.statusCode = '1';\n            metaData.file.status = this.localizedTexts('readyToUploadMessage');\n            this.chunkUpload(metaData.file);\n        }\n        /* istanbul ignore next */\n        (this.getLiElement(metaData.file)).classList.add(RESTRICT_RETRY);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Uploader.prototype.chunkUploadInProgress = function (e, metaData, custom) {\n        var _this = this;\n        if (metaData.file.statusCode === '4') {\n            return;\n        }\n        if (metaData.file.statusCode !== '4' && metaData.file.statusCode !== '5') {\n            metaData.file.statusCode = '3';\n            metaData.file.status = this.localizedTexts('inProgress');\n        }\n        this.updateMetaData(metaData);\n        var liElement = this.getLiElement(metaData.file);\n        if (isNullOrUndefined(liElement)) {\n            return;\n        }\n        var retryElement = liElement.querySelector('.' + RETRY_ICON);\n        if (!isNullOrUndefined(retryElement)) {\n            retryElement.classList.add(PAUSE_UPLOAD);\n            retryElement.setAttribute('title', this.localizedTexts('pause'));\n            retryElement.classList.remove(RETRY_ICON);\n        }\n        if (!isNullOrUndefined(liElement)) {\n            if (!(liElement.querySelectorAll('.' + PROGRESS_WRAPPER).length > 0)) {\n                var statusElement = liElement.querySelector('.' + STATUS);\n                if (isNullOrUndefined(this.template)) {\n                    statusElement.classList.add(UPLOAD_INPROGRESS);\n                    statusElement.classList.remove(UPLOAD_FAILED);\n                    this.createProgressBar(liElement);\n                    this.updateProgressBarClasses(liElement, UPLOAD_INPROGRESS);\n                }\n                var clearIcon = liElement.querySelector('.' + REMOVE_ICON) ? liElement.querySelector('.' + REMOVE_ICON) :\n                    liElement.querySelector('.' + DELETE_ICON);\n                if (!isNullOrUndefined(clearIcon)) {\n                    clearIcon.classList.add(ABORT_ICON);\n                    clearIcon.setAttribute('title', this.localizedTexts('abort'));\n                    clearIcon.classList.remove(REMOVE_ICON);\n                }\n            }\n            if (!isNaN(Math.round((e.loaded / e.total) * 100)) && isNullOrUndefined(this.template) && metaData.file.statusCode !== '4') {\n                var progressVal = void 0;\n                var totalChunks = Math.ceil(metaData.file.size / this.asyncSettings.chunkSize) - 1;\n                if (this.asyncSettings.chunkSize && totalChunks) {\n                    progressVal = Math.round(metaData.chunkIndex / totalChunks * 100);\n                    this.changeProgressValue(liElement, progressVal.toString() + '%');\n                }\n            }\n            if (metaData.chunkIndex === 0) {\n                this.checkActionButtonStatus();\n            }\n        }\n        if (isNullOrUndefined(liElement.querySelector('.' + PAUSE_UPLOAD)) && isNullOrUndefined(this.template)\n            && isNullOrUndefined(liElement.querySelector('.' + DELETE_ICON))) {\n            this.pauseButton = this.createElement('span', { className: 'e-icons e-file-pause-btn', attrs: { 'tabindex': this.btnTabIndex } });\n            if (this.browserName === 'msie') {\n                this.pauseButton.classList.add('e-msie');\n            }\n            var abortIcon = liElement.querySelector('.' + ABORT_ICON);\n            abortIcon.parentElement.insertBefore(this.pauseButton, abortIcon);\n            this.pauseButton.setAttribute('title', this.localizedTexts('pause'));\n            this.pauseButton.addEventListener('click', function (e) {\n                _this.checkPausePlayAction(e);\n            }, false);\n        }\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * It is used to convert bytes value into kilobytes or megabytes depending on the size based\n     * on [binary prefix](https://en.wikipedia.org/wiki/Binary_prefix).\n     *\n     * @param { number } bytes - Specifies the file size in bytes.\n     * @returns {string}\n     */\n    Uploader.prototype.bytesToSize = function (bytes) {\n        var i = -1;\n        if (!bytes) {\n            return '0.0 KB';\n        }\n        do {\n            bytes = bytes / 1024;\n            i++;\n        } while (bytes > 99);\n        if (i >= 2) {\n            bytes = bytes * 1024;\n            i = 1;\n        }\n        return Math.max(bytes, 0).toFixed(1) + ' ' + ['KB', 'MB'][i];\n    };\n    /**\n     * Allows you to sort the file data alphabetically based on its file name clearly.\n     *\n     * @param { FileList } filesData - specifies the files data for upload.\n     * @returns {File[]}\n     */\n    /* istanbul ignore next */\n    Uploader.prototype.sortFileList = function (filesData) {\n        filesData = filesData ? filesData : this.sortFilesList;\n        var files = filesData;\n        var fileNames = [];\n        for (var i = 0; i < files.length; i++) {\n            fileNames.push(files[i].name);\n        }\n        var sortedFileNames = fileNames.sort();\n        var sortedFilesData = [];\n        for (var _i = 0, sortedFileNames_1 = sortedFileNames; _i < sortedFileNames_1.length; _i++) {\n            var name_3 = sortedFileNames_1[_i];\n            for (var i = 0; i < files.length; i++) {\n                if (name_3 === files[i].name) {\n                    sortedFilesData.push(files[i]);\n                }\n            }\n        }\n        return sortedFilesData;\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    Uploader.prototype.destroy = function () {\n        this.element.value = null;\n        this.clearTemplate();\n        this.clearAll();\n        this.unWireEvents();\n        this.unBindDropEvents();\n        if (this.multiple) {\n            this.element.removeAttribute('multiple');\n        }\n        if (!this.enabled) {\n            this.element.removeAttribute('disabled');\n        }\n        this.element.removeAttribute('accept');\n        this.setInitialAttributes();\n        var attributes = ['aria-label', 'directory', 'webkitdirectory', 'tabindex'];\n        for (var _i = 0, attributes_2 = attributes; _i < attributes_2.length; _i++) {\n            var key = attributes_2[_i];\n            this.element.removeAttribute(key);\n        }\n        if (!isNullOrUndefined(this.uploadWrapper)) {\n            this.uploadWrapper.parentElement.appendChild(this.element);\n            detach(this.uploadWrapper);\n        }\n        this.uploadWrapper = null;\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * Allows you to call the upload process manually by calling save URL action.\n     * To process the selected files (added in upload queue), pass an empty argument otherwise\n     * upload the specific file based on its argument.\n     *\n     * @param { FileInfo | FileInfo[] } files - Specifies the files data for upload.\n     * @param {boolean} custom - Specifies whether the uploader is rendered with custom file list.\n     * @returns {void}\n     */\n    Uploader.prototype.upload = function (files, custom) {\n        var _this = this;\n        files = files ? files : this.filesData;\n        if (this.sequentialUpload && (this.isFirstFileOnSelection || custom)) {\n            this.sequenceUpload(files);\n        }\n        else {\n            var uploadFiles_1 = this.getFilesInArray(files);\n            var eventArgs = {\n                customFormData: [],\n                currentRequest: null,\n                cancel: false\n            };\n            this.trigger('beforeUpload', eventArgs, function (eventArgs) {\n                if (!eventArgs.cancel) {\n                    _this.uploadFiles(uploadFiles_1, custom);\n                }\n            });\n        }\n    };\n    Uploader.prototype.getFilesInArray = function (files) {\n        var uploadFiles = [];\n        if (files instanceof Array) {\n            uploadFiles = files;\n        }\n        else {\n            uploadFiles.push(files);\n        }\n        return uploadFiles;\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.serverReadFileBase64 = function (fileIndex, position, totalCount) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var file = _this.fileStreams[fileIndex].rawFile;\n            try {\n                var reader = new FileReader();\n                reader.onload = (function (args) {\n                    return function () {\n                        try {\n                            var contents = args.result;\n                            var data = contents ? contents.split(';base64,')[1] : null;\n                            resolve(data);\n                        }\n                        catch (e) {\n                            reject(e);\n                        }\n                    };\n                })(reader);\n                reader.readAsDataURL(file.slice(position, position + totalCount));\n            }\n            catch (e) {\n                reject(e);\n            }\n        });\n    };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    /* istanbul ignore next */\n    Uploader.prototype.uploadFileCount = function (ele) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        var files = this.filesData;\n        if (!files || files.length === 0) {\n            return -1;\n        }\n        var result = files.length;\n        return result;\n    };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    /* istanbul ignore next */\n    Uploader.prototype.getFileRead = function (index, ele) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        var files = this.filesData;\n        if (!files || files.length === 0) {\n            return -1;\n        }\n        var file = files[index];\n        var fileCount = this.newFileRef++;\n        this.fileStreams[fileCount] = file;\n        return fileCount;\n    };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    /* istanbul ignore next */\n    Uploader.prototype.getFileInfo = function (index, ele) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        var files = this.filesData;\n        if (!files || files.length === 0) {\n            return null;\n        }\n        var file = files[index];\n        if (!file) {\n            return null;\n        }\n        return this.filesData[index];\n    };\n    Uploader.prototype.uploadFiles = function (files, custom) {\n        var selectedFiles = [];\n        if (this.asyncSettings.saveUrl === '' || isNullOrUndefined(this.asyncSettings.saveUrl)) {\n            return;\n        }\n        if (!custom || isNullOrUndefined(custom)) {\n            if (!this.multiple) {\n                var file = [];\n                file.push(files[0]);\n                selectedFiles = this.filterfileList(file);\n            }\n            else {\n                selectedFiles = this.filterfileList(files);\n            }\n        }\n        else {\n            selectedFiles = files;\n        }\n        for (var i = 0; i < selectedFiles.length; i++) {\n            this.uploadFilesRequest(selectedFiles, i, custom);\n        }\n    };\n    Uploader.prototype.uploadFilesRequest = function (selectedFiles, i, custom) {\n        var _this = this;\n        var cloneFiles = [];\n        var chunkEnabled = this.checkChunkUpload();\n        var ajax = new Ajax(this.asyncSettings.saveUrl, 'POST', true, null);\n        ajax.emitError = false;\n        var getFileData;\n        var eventArgs = {\n            fileData: selectedFiles[i],\n            customFormData: [],\n            cancel: false\n        };\n        var formData = new FormData();\n        ajax.beforeSend = function (e) {\n            eventArgs.currentRequest = ajax.httpRequest;\n            _this.trigger('uploading', eventArgs, function (eventArgs) {\n                /* istanbul ignore next */\n                if (eventArgs.cancel) {\n                    _this.eventCancelByArgs(e, eventArgs, selectedFiles[i]);\n                }\n                _this.updateFormData(formData, eventArgs.customFormData);\n            });\n        };\n        if (selectedFiles[i].statusCode === '1') {\n            var name_4 = this.element.getAttribute('name');\n            formData.append(name_4, selectedFiles[i].rawFile, selectedFiles[i].name);\n            if (chunkEnabled && selectedFiles[i].size > this.asyncSettings.chunkSize) {\n                this.chunkUpload(selectedFiles[i], custom, i);\n            }\n            else {\n                ajax.onLoad = function (e) {\n                    if (eventArgs.cancel) {\n                        return {};\n                    }\n                    else {\n                        _this.uploadComplete(e, selectedFiles[i], custom);\n                        return {};\n                    }\n                };\n                ajax.onUploadProgress = function (e) {\n                    if (eventArgs.cancel) {\n                        return {};\n                    }\n                    else {\n                        _this.uploadInProgress(e, selectedFiles[i], custom, ajax);\n                        return {};\n                    }\n                };\n                /* istanbul ignore next */\n                ajax.onError = function (e) {\n                    _this.uploadFailed(e, selectedFiles[i]);\n                    return {};\n                };\n                ajax.send(formData);\n            }\n        }\n    };\n    Uploader.prototype.spliceFiles = function (liIndex) {\n        var liElement = this.fileList[liIndex];\n        var allFiles = this.getFilesData();\n        var nameElements = +liElement.getAttribute('data-files-count');\n        var startIndex = 0;\n        for (var i = 0; i < liIndex; i++) {\n            startIndex += (+this.fileList[i].getAttribute('data-files-count'));\n        }\n        var endIndex = (startIndex + nameElements) - 1;\n        for (var j = endIndex; j >= startIndex; j--) {\n            allFiles.splice(j, 1);\n        }\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Remove the uploaded file from server manually by calling the remove URL action.\n     * If you pass an empty argument to this method, the complete file list can be cleared,\n     * otherwise remove the specific file based on its argument (file_data).\n     *\n     * @param { FileInfo | FileInfo[] } fileData - specifies the files data to remove from file list/server.\n     * @param { boolean } customTemplate - Set true if the component rendering with customize template.\n     * @param { boolean } removeDirectly - Set true if files remove without removing event.\n     * @param { boolean } postRawFile - Set false, to post file name only to the remove action.\n     * @returns {void}\n     */\n    Uploader.prototype.remove = function (fileData, customTemplate, removeDirectly, postRawFile, args) {\n        var _this = this;\n        if (isNullOrUndefined(postRawFile)) {\n            postRawFile = true;\n        }\n        var eventArgs = {\n            event: args,\n            cancel: false,\n            filesData: [],\n            customFormData: [],\n            postRawFile: postRawFile,\n            currentRequest: null\n        };\n        var beforeEventArgs = {\n            cancel: false,\n            customFormData: [],\n            currentRequest: null\n        };\n        this.trigger('beforeRemove', beforeEventArgs, function (beforeEventArgs) {\n            if (!beforeEventArgs.cancel) {\n                if (_this.isFormUpload()) {\n                    eventArgs.filesData = fileData;\n                    _this.trigger('removing', eventArgs, function (eventArgs) {\n                        if (!eventArgs.cancel) {\n                            var removingFiles = _this.getFilesInArray(fileData);\n                            var isLiRemoved = false;\n                            var liIndex = void 0;\n                            for (var _i = 0, removingFiles_1 = removingFiles; _i < removingFiles_1.length; _i++) {\n                                var data = removingFiles_1[_i];\n                                if (!isLiRemoved) {\n                                    liIndex = _this.fileList.indexOf(data.list);\n                                }\n                                if (liIndex > -1) {\n                                    var inputElement = !isNullOrUndefined(data.input) ? data.input : null;\n                                    if (inputElement) {\n                                        detach(inputElement);\n                                    }\n                                    _this.spliceFiles(liIndex);\n                                    detach(_this.fileList[liIndex]);\n                                    _this.fileList.splice(liIndex, 1);\n                                    isLiRemoved = true;\n                                    liIndex = -1;\n                                }\n                            }\n                        }\n                    });\n                }\n                else if (_this.isForm && (isNullOrUndefined(_this.asyncSettings.removeUrl) || _this.asyncSettings.removeUrl === '')) {\n                    eventArgs.filesData = _this.getFilesData();\n                    _this.trigger('removing', eventArgs, function (eventArgs) {\n                        if (!eventArgs.cancel) {\n                            _this.clearAll();\n                        }\n                    });\n                }\n                else {\n                    var removeFiles = [];\n                    fileData = !isNullOrUndefined(fileData) ? fileData : _this.filesData;\n                    if (fileData instanceof Array) {\n                        removeFiles = fileData;\n                    }\n                    else {\n                        removeFiles.push(fileData);\n                    }\n                    eventArgs.filesData = removeFiles;\n                    var removeUrl = _this.asyncSettings.removeUrl;\n                    var validUrl = (removeUrl === '' || isNullOrUndefined(removeUrl)) ? false : true;\n                    var _loop_5 = function (files) {\n                        var fileUploadedIndex = _this.uploadedFilesData.indexOf(files);\n                        if ((files.statusCode === '2' || files.statusCode === '4' || (files.statusCode === '0' &&\n                            fileUploadedIndex !== -1)) && validUrl) {\n                            _this.removeUploadedFile(files, eventArgs, removeDirectly, customTemplate);\n                        }\n                        else {\n                            if (!removeDirectly) {\n                                _this.trigger('removing', eventArgs, function (eventArgs) {\n                                    if (!eventArgs.cancel) {\n                                        _this.removeFilesData(files, customTemplate);\n                                    }\n                                });\n                            }\n                            else {\n                                _this.removeFilesData(files, customTemplate);\n                            }\n                        }\n                        if (args && !args.target.classList.contains(REMOVE_ICON)) {\n                            _this.checkActionComplete(false);\n                        }\n                    };\n                    for (var _i = 0, removeFiles_1 = removeFiles; _i < removeFiles_1.length; _i++) {\n                        var files = removeFiles_1[_i];\n                        _loop_5(files);\n                    }\n                }\n            }\n        });\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Clear all the file entries from list that can be uploaded files or added in upload queue.\n     *\n     * @returns {void}\n     */\n    Uploader.prototype.clearAll = function () {\n        var _this = this;\n        if (isNullOrUndefined(this.listParent)) {\n            if (this.browserName !== 'msie') {\n                this.element.value = '';\n            }\n            this.filesData = [];\n            return;\n        }\n        var eventArgs = {\n            cancel: false,\n            filesData: this.filesData\n        };\n        this.trigger('clearing', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                _this.clearData();\n                _this.actionCompleteCount = 0;\n                _this.count = -1;\n            }\n        });\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Get the data of files which are shown in file list.\n     *\n     * @param { number } index - specifies the file list item(li) index.\n     * @returns {FileInfo[]}\n     */\n    Uploader.prototype.getFilesData = function (index) {\n        if (isNullOrUndefined(index)) {\n            return this.filesData;\n        }\n        else {\n            return this.getSelectedFiles(index);\n        }\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Pauses the in-progress chunked upload based on the file data.\n     *\n     * @param { FileInfo | FileInfo[] } fileData - specifies the files data to pause from uploading.\n     * @param { boolean } custom - Set true if used custom UI.\n     * @returns {void}\n     */\n    Uploader.prototype.pause = function (fileData, custom) {\n        fileData = fileData ? fileData : this.filesData;\n        var fileDataFiles = this.getFilesInArray(fileData);\n        this.pauseUploading(fileDataFiles, custom);\n    };\n    Uploader.prototype.pauseUploading = function (fileData, custom) {\n        var files = this.getFiles(fileData);\n        for (var i = 0; i < files.length; i++) {\n            if (files[i].statusCode === '3') {\n                this.pauseUpload(this.getCurrentMetaData(files[i], null), null, custom);\n            }\n        }\n    };\n    Uploader.prototype.getFiles = function (fileData) {\n        var files = [];\n        if (!isNullOrUndefined(fileData) && !(fileData instanceof Array)) {\n            files.push(fileData);\n        }\n        else {\n            files = fileData;\n        }\n        return files;\n    };\n    /**\n     * Resumes the chunked upload that is previously paused based on the file data.\n     *\n     * @param { FileInfo | FileInfo[] } fileData - specifies the files data to resume the paused file.\n     * @param { boolean } custom - Set true if used custom UI.\n     * @returns {void}\n     */\n    Uploader.prototype.resume = function (fileData, custom) {\n        fileData = fileData ? fileData : this.filesData;\n        var fileDataFiles = this.getFilesInArray(fileData);\n        this.resumeFiles(fileDataFiles, custom);\n    };\n    Uploader.prototype.resumeFiles = function (fileData, custom) {\n        var files = this.getFiles(fileData);\n        for (var i = 0; i < files.length; i++) {\n            if (files[i].statusCode === '4') {\n                this.resumeUpload(this.getCurrentMetaData(files[i], null), null, custom);\n            }\n        }\n    };\n    /**\n     * Retries the canceled or failed file upload based on the file data.\n     *\n     * @param { FileInfo | FileInfo[] } fileData - specifies the files data to retry the canceled or failed file.\n     * @param { boolean } fromcanceledStage - Set true to retry from canceled stage and set false to retry from initial stage.\n     * @param {boolean} custom -Specifies whether the uploader is rendered with custom file list.\n     * @returns {void}\n     */\n    Uploader.prototype.retry = function (fileData, fromcanceledStage, custom) {\n        fileData = fileData ? fileData : this.filesData;\n        var fileDataFiles = this.getFilesInArray(fileData);\n        if (this.sequentialUpload && this.isFirstFileOnSelection) {\n            this.isFirstFileOnSelection = false;\n        }\n        this.retryFailedFiles(fileDataFiles, fromcanceledStage, custom);\n    };\n    Uploader.prototype.retryFailedFiles = function (fileData, fromcanceledStage, custom) {\n        var files = this.getFiles(fileData);\n        for (var i = 0; i < files.length; i++) {\n            if (files[i].statusCode === '5' || files[i].statusCode === '0') {\n                if (this.asyncSettings.chunkSize > 0) {\n                    this.retryUpload(this.getCurrentMetaData(files[i], null), fromcanceledStage);\n                }\n                else {\n                    var liElement = void 0;\n                    if (!custom) {\n                        liElement = this.fileList[this.filesData.indexOf(files[i])];\n                    }\n                    this.reloadcanceledFile(null, files[i], liElement, custom);\n                }\n            }\n        }\n    };\n    /**\n     * Stops the in-progress chunked upload based on the file data.\n     * When the file upload is canceled, the partially uploaded file is removed from server.\n     *\n     * @param { FileInfo | FileInfo[] } fileData - specifies the files data to cancel the progressing file.\n     * @returns {void}\n     */\n    Uploader.prototype.cancel = function (fileData) {\n        fileData = fileData ? fileData : this.filesData;\n        var cancelingFiles = this.getFilesInArray(fileData);\n        this.cancelUpload(cancelingFiles);\n    };\n    Uploader.prototype.cancelUpload = function (fileData) {\n        var files = this.getFiles(fileData);\n        if (this.asyncSettings.chunkSize > 0) {\n            for (var i = 0; i < files.length; i++) {\n                if (files[i].statusCode === '3') {\n                    var metaData = this.getCurrentMetaData(files[i], null);\n                    metaData.file.statusCode = '5';\n                    metaData.file.status = this.localizedTexts('fileUploadCancel');\n                    this.updateMetaData(metaData);\n                    this.showHideUploadSpinner(files[i]);\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < files.length; i++) {\n                if (files[i].statusCode === '3') {\n                    files[i].statusCode = '5';\n                    files[i].status = this.localizedTexts('fileUploadCancel');\n                    this.showHideUploadSpinner(files[i]);\n                }\n            }\n        }\n    };\n    Uploader.prototype.showHideUploadSpinner = function (files) {\n        var liElement = this.getLiElement(files);\n        if (!isNullOrUndefined(liElement) && isNullOrUndefined(this.template)) {\n            var spinnerTarget = liElement.querySelector('.' + ABORT_ICON);\n            createSpinner({ target: spinnerTarget, width: '20px' });\n            showSpinner(spinnerTarget);\n        }\n    };\n    __decorate([\n        Complex({ saveUrl: '', removeUrl: '' }, AsyncSettings)\n    ], Uploader.prototype, \"asyncSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Uploader.prototype, \"sequentialUpload\", void 0);\n    __decorate([\n        Property({})\n    ], Uploader.prototype, \"htmlAttributes\", void 0);\n    __decorate([\n        Property('')\n    ], Uploader.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(true)\n    ], Uploader.prototype, \"enabled\", void 0);\n    __decorate([\n        Property(null)\n    ], Uploader.prototype, \"template\", void 0);\n    __decorate([\n        Property(true)\n    ], Uploader.prototype, \"multiple\", void 0);\n    __decorate([\n        Property(true)\n    ], Uploader.prototype, \"autoUpload\", void 0);\n    __decorate([\n        Complex({}, ButtonsProps)\n    ], Uploader.prototype, \"buttons\", void 0);\n    __decorate([\n        Property('')\n    ], Uploader.prototype, \"allowedExtensions\", void 0);\n    __decorate([\n        Property(0)\n    ], Uploader.prototype, \"minFileSize\", void 0);\n    __decorate([\n        Property(30000000)\n    ], Uploader.prototype, \"maxFileSize\", void 0);\n    __decorate([\n        Property(null)\n    ], Uploader.prototype, \"dropArea\", void 0);\n    __decorate([\n        Collection([{}], FilesProp)\n    ], Uploader.prototype, \"files\", void 0);\n    __decorate([\n        Property(true)\n    ], Uploader.prototype, \"showFileList\", void 0);\n    __decorate([\n        Property(false)\n    ], Uploader.prototype, \"directoryUpload\", void 0);\n    __decorate([\n        Property('Default')\n    ], Uploader.prototype, \"dropEffect\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"rendering\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"beforeUpload\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"fileListRendering\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"selected\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"uploading\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"success\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"failure\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"removing\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"beforeRemove\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"clearing\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"progress\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"change\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"chunkSuccess\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"chunkFailure\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"chunkUploading\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"canceling\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"pausing\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"resuming\", void 0);\n    Uploader = __decorate([\n        NotifyPropertyChanges\n    ], Uploader);\n    return Uploader;\n}(Component));\nexport { Uploader };\n/* eslint-enable @typescript-eslint/no-explicit-any */\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}