{"ast":null,"code":"import { isNullOrUndefined, merge } from './util';\nvar headerRegex = /^(.*?):[ \\t]*([^\\r\\n]*)$/gm;\nvar defaultType = 'GET';\n/**\n * Ajax class provides ability to make asynchronous HTTP request to the server\n * ```typescript\n *   var ajax = new Ajax(\"index.html\", \"GET\", true);\n *   ajax.send().then(\n *               function (value) {\n *                   console.log(value);\n *               },\n *               function (reason) {\n *                   console.log(reason);\n *               });\n * ```\n */\n\nvar Ajax =\n/** @class */\nfunction () {\n  /**\n   * Constructor for Ajax class\n   *\n   * @param  {string|Object} options ?\n   * @param  {string} type ?\n   * @param  {boolean} async ?\n   * @returns defaultType any\n   */\n  function Ajax(options, type, async, contentType) {\n    /**\n     * A boolean value indicating whether the request should be sent asynchronous or not.\n     *\n     * @default true\n     */\n    this.mode = true;\n    /**\n     * A boolean value indicating whether to ignore the promise reject.\n     *\n     * @private\n     * @default true\n     */\n\n    this.emitError = true;\n    this.options = {};\n\n    if (typeof options === 'string') {\n      this.url = options;\n      this.type = type ? type.toUpperCase() : defaultType;\n      this.mode = !isNullOrUndefined(async) ? async : true;\n    } else if (typeof options === 'object') {\n      this.options = options;\n      merge(this, this.options);\n    }\n\n    this.type = this.type ? this.type.toUpperCase() : defaultType;\n    this.contentType = this.contentType !== undefined ? this.contentType : contentType;\n  }\n  /**\n   *\n   * Send the request to server.\n   *\n   * @param {any} data - To send the user data\n   * @return {Promise} ?\n   */\n\n\n  Ajax.prototype.send = function (data) {\n    var _this = this;\n\n    this.data = isNullOrUndefined(data) ? this.data : data;\n    var eventArgs = {\n      cancel: false,\n      httpRequest: null\n    };\n    var promise = new Promise(function (resolve, reject) {\n      _this.httpRequest = new XMLHttpRequest();\n\n      _this.httpRequest.onreadystatechange = function () {\n        _this.stateChange(resolve, reject);\n      };\n\n      if (!isNullOrUndefined(_this.onLoad)) {\n        _this.httpRequest.onload = _this.onLoad;\n      }\n\n      if (!isNullOrUndefined(_this.onProgress)) {\n        _this.httpRequest.onprogress = _this.onProgress;\n      }\n      /* istanbul ignore next */\n\n\n      if (!isNullOrUndefined(_this.onAbort)) {\n        _this.httpRequest.onabort = _this.onAbort;\n      }\n      /* istanbul ignore next */\n\n\n      if (!isNullOrUndefined(_this.onError)) {\n        _this.httpRequest.onerror = _this.onError;\n      } //** Upload Events **/\n\n      /* istanbul ignore next */\n\n\n      if (!isNullOrUndefined(_this.onUploadProgress)) {\n        _this.httpRequest.upload.onprogress = _this.onUploadProgress;\n      }\n\n      _this.httpRequest.open(_this.type, _this.url, _this.mode); // Set default headers\n\n\n      if (!isNullOrUndefined(_this.data) && _this.contentType !== null) {\n        _this.httpRequest.setRequestHeader('Content-Type', _this.contentType || 'application/json; charset=utf-8');\n      }\n\n      if (_this.beforeSend) {\n        eventArgs.httpRequest = _this.httpRequest;\n\n        _this.beforeSend(eventArgs);\n      }\n\n      if (!eventArgs.cancel) {\n        _this.httpRequest.send(!isNullOrUndefined(_this.data) ? _this.data : null);\n      }\n    });\n    return promise;\n  };\n\n  Ajax.prototype.successHandler = function (data) {\n    if (this.onSuccess) {\n      this.onSuccess(data, this);\n    }\n\n    return data;\n  };\n\n  Ajax.prototype.failureHandler = function (reason) {\n    if (this.onFailure) {\n      this.onFailure(this.httpRequest);\n    }\n\n    return reason;\n  };\n\n  Ajax.prototype.stateChange = function (resolve, reject) {\n    var data = this.httpRequest.responseText;\n\n    if (this.dataType && this.dataType.toLowerCase() === 'json') {\n      if (data === '') {\n        data = undefined;\n      } else {\n        try {\n          data = JSON.parse(data);\n        } catch (error) {// no exception handle\n        }\n      }\n    }\n\n    if (this.httpRequest.readyState === 4) {\n      //success range should be 200 to 299\n      if (this.httpRequest.status >= 200 && this.httpRequest.status <= 299 || this.httpRequest.status === 304) {\n        resolve(this.successHandler(data));\n      } else {\n        if (this.emitError) {\n          reject(new Error(this.failureHandler(this.httpRequest.statusText)));\n        } else {\n          resolve();\n        }\n      }\n    }\n  };\n  /**\n   * To get the response header from XMLHttpRequest\n   *\n   * @param  {string} key Key to search in the response header\n   * @returns {string} ?\n   */\n\n\n  Ajax.prototype.getResponseHeader = function (key) {\n    var responseHeaders;\n    var header; // eslint-disable-next-line\n\n    responseHeaders = {};\n    var headers = headerRegex.exec(this.httpRequest.getAllResponseHeaders());\n\n    while (headers) {\n      responseHeaders[headers[1].toLowerCase()] = headers[2];\n      headers = headerRegex.exec(this.httpRequest.getAllResponseHeaders());\n    } // eslint-disable-next-line\n\n\n    header = responseHeaders[key.toLowerCase()];\n    return isNullOrUndefined(header) ? null : header;\n  };\n\n  return Ajax;\n}();\n\nexport { Ajax };","map":{"version":3,"names":["isNullOrUndefined","merge","headerRegex","defaultType","Ajax","options","type","async","contentType","mode","emitError","url","toUpperCase","undefined","prototype","send","data","_this","eventArgs","cancel","httpRequest","promise","Promise","resolve","reject","XMLHttpRequest","onreadystatechange","stateChange","onLoad","onload","onProgress","onprogress","onAbort","onabort","onError","onerror","onUploadProgress","upload","open","setRequestHeader","beforeSend","successHandler","onSuccess","failureHandler","reason","onFailure","responseText","dataType","toLowerCase","JSON","parse","error","readyState","status","Error","statusText","getResponseHeader","key","responseHeaders","header","headers","exec","getAllResponseHeaders"],"sources":["C:/Users/leezh/Documents/Coding/Orbital Test/Orbital-Duty-Planner/node_modules/@syncfusion/ej2-base/src/ajax.js"],"sourcesContent":["import { isNullOrUndefined, merge } from './util';\nvar headerRegex = /^(.*?):[ \\t]*([^\\r\\n]*)$/gm;\nvar defaultType = 'GET';\n/**\n * Ajax class provides ability to make asynchronous HTTP request to the server\n * ```typescript\n *   var ajax = new Ajax(\"index.html\", \"GET\", true);\n *   ajax.send().then(\n *               function (value) {\n *                   console.log(value);\n *               },\n *               function (reason) {\n *                   console.log(reason);\n *               });\n * ```\n */\nvar Ajax = /** @class */ (function () {\n    /**\n     * Constructor for Ajax class\n     *\n     * @param  {string|Object} options ?\n     * @param  {string} type ?\n     * @param  {boolean} async ?\n     * @returns defaultType any\n     */\n    function Ajax(options, type, async, contentType) {\n        /**\n         * A boolean value indicating whether the request should be sent asynchronous or not.\n         *\n         * @default true\n         */\n        this.mode = true;\n        /**\n         * A boolean value indicating whether to ignore the promise reject.\n         *\n         * @private\n         * @default true\n         */\n        this.emitError = true;\n        this.options = {};\n        if (typeof options === 'string') {\n            this.url = options;\n            this.type = type ? type.toUpperCase() : defaultType;\n            this.mode = !isNullOrUndefined(async) ? async : true;\n        }\n        else if (typeof options === 'object') {\n            this.options = options;\n            merge(this, this.options);\n        }\n        this.type = this.type ? this.type.toUpperCase() : defaultType;\n        this.contentType = (this.contentType !== undefined) ? this.contentType : contentType;\n    }\n    /**\n     *\n     * Send the request to server.\n     *\n     * @param {any} data - To send the user data\n     * @return {Promise} ?\n     */\n    Ajax.prototype.send = function (data) {\n        var _this = this;\n        this.data = isNullOrUndefined(data) ? this.data : data;\n        var eventArgs = {\n            cancel: false,\n            httpRequest: null\n        };\n        var promise = new Promise(function (resolve, reject) {\n            _this.httpRequest = new XMLHttpRequest();\n            _this.httpRequest.onreadystatechange = function () { _this.stateChange(resolve, reject); };\n            if (!isNullOrUndefined(_this.onLoad)) {\n                _this.httpRequest.onload = _this.onLoad;\n            }\n            if (!isNullOrUndefined(_this.onProgress)) {\n                _this.httpRequest.onprogress = _this.onProgress;\n            }\n            /* istanbul ignore next */\n            if (!isNullOrUndefined(_this.onAbort)) {\n                _this.httpRequest.onabort = _this.onAbort;\n            }\n            /* istanbul ignore next */\n            if (!isNullOrUndefined(_this.onError)) {\n                _this.httpRequest.onerror = _this.onError;\n            }\n            //** Upload Events **/\n            /* istanbul ignore next */\n            if (!isNullOrUndefined(_this.onUploadProgress)) {\n                _this.httpRequest.upload.onprogress = _this.onUploadProgress;\n            }\n            _this.httpRequest.open(_this.type, _this.url, _this.mode);\n            // Set default headers\n            if (!isNullOrUndefined(_this.data) && _this.contentType !== null) {\n                _this.httpRequest.setRequestHeader('Content-Type', _this.contentType || 'application/json; charset=utf-8');\n            }\n            if (_this.beforeSend) {\n                eventArgs.httpRequest = _this.httpRequest;\n                _this.beforeSend(eventArgs);\n            }\n            if (!eventArgs.cancel) {\n                _this.httpRequest.send(!isNullOrUndefined(_this.data) ? _this.data : null);\n            }\n        });\n        return promise;\n    };\n    Ajax.prototype.successHandler = function (data) {\n        if (this.onSuccess) {\n            this.onSuccess(data, this);\n        }\n        return data;\n    };\n    Ajax.prototype.failureHandler = function (reason) {\n        if (this.onFailure) {\n            this.onFailure(this.httpRequest);\n        }\n        return reason;\n    };\n    Ajax.prototype.stateChange = function (resolve, reject) {\n        var data = this.httpRequest.responseText;\n        if (this.dataType && this.dataType.toLowerCase() === 'json') {\n            if (data === '') {\n                data = undefined;\n            }\n            else {\n                try {\n                    data = JSON.parse(data);\n                }\n                catch (error) {\n                    // no exception handle\n                }\n            }\n        }\n        if (this.httpRequest.readyState === 4) {\n            //success range should be 200 to 299\n            if ((this.httpRequest.status >= 200 && this.httpRequest.status <= 299) || this.httpRequest.status === 304) {\n                resolve(this.successHandler(data));\n            }\n            else {\n                if (this.emitError) {\n                    reject(new Error(this.failureHandler(this.httpRequest.statusText)));\n                }\n                else {\n                    resolve();\n                }\n            }\n        }\n    };\n    /**\n     * To get the response header from XMLHttpRequest\n     *\n     * @param  {string} key Key to search in the response header\n     * @returns {string} ?\n     */\n    Ajax.prototype.getResponseHeader = function (key) {\n        var responseHeaders;\n        var header;\n        // eslint-disable-next-line\n        responseHeaders = {};\n        var headers = headerRegex.exec(this.httpRequest.getAllResponseHeaders());\n        while (headers) {\n            responseHeaders[headers[1].toLowerCase()] = headers[2];\n            headers = headerRegex.exec(this.httpRequest.getAllResponseHeaders());\n        }\n        // eslint-disable-next-line\n        header = responseHeaders[key.toLowerCase()];\n        return isNullOrUndefined(header) ? null : header;\n    };\n    return Ajax;\n}());\nexport { Ajax };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}